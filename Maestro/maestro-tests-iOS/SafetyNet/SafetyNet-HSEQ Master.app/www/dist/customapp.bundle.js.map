{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./scripts/app/app.js","webpack:///./scripts/app/directives.js","webpack:///./scripts/app/main.js","webpack:///./scripts/app/popup.js"],"names":[],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8CAA8C;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA,6CAA6C;AAC7C;;AAEA;AACA;AACA,4CAA4C;AAC5C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB,OAAO;;AAEP;AACA,iCAAiC;AACjC,SAAS;AACT,IAAI;AACJ;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACngCa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA,CAAC;;AAED;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA,CAAC;;AAED;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,KAAK,MAAM,IAAI;AACnD,iBAAiB;AACjB,oCAAoC,KAAK,MAAM,IAAI;AACnD;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAmC,sBAAsB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6EAA6E,iBAAiB;AAC9F;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,0DAA0D;;AAE1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb,iCAAiC;AACjC,+CAA+C;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,8CAA8C;AAC9C,+CAA+C;AAC/C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD,4HAA4H;;AAE5H;AACA,iEAAiE;;AAEjE;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,cAAc;;;AAGd,kCAAkC;;AAElC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;;AAEA;AACA;AACA;AACA;AACA,0JAA0J;AAC1J;;AAEA;AACA;AACA,iCAAiC;AACjC;;;AAGA;AACA,mEAAmE;AACnE;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,+BAA+B;AAC/B;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;;AAGA,+BAA+B;;AAE/B;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,wEAAwE,yCAAyC;AACjH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,+BAA+B,qBAAqB;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAA4D;;AAE5D;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qCAAqC,YAAY;AACjD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,CAAC,EAAE;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8FAA8F;;AAE9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8FAA8F;;AAE9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qGAAqG;;AAErG;AACA;AACA,mEAAmE;;AAEnE;AACA,qGAAqG;;AAErG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA+C,sBAAsB;AACrE;;AAEA;AACA,4FAA4F;;AAE5F,qFAAqF;;AAErF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C,wBAAwB;AACnE;;AAEA;AACA,0FAA0F;;AAE1F,iFAAiF;;AAEjF;AACA;AACA;AACA;AACA;;AAEA,yIAAyI;;AAEzI,4CAA4C;;AAE5C;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,qBAAqB;AACrB;AACA;AACA,SAAS;AACT;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iFAAiF;;AAEjF;AACA,8FAA8F;;AAE9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B,yBAAyB;AACzB,iDAAiD;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA,8FAA8F;;AAE9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B,yBAAyB;AACzB,iDAAiD;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;;AAEA;AACA,qGAAqG;;AAErG;AACA;AACA,mEAAmE;;AAEnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,iDAAiD;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,CAAC;AACD;AACA;AACA;AACA,sFAAsF,uJAAuJ,OAAO,0IAA0I,MAAM;AACpY;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,uCAAuC;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qDAAqD;;AAErD;AACA,wDAAwD;;AAExD;AACA,6GAA6G;;AAE7G;AACA;AACA;;AAEA,uCAAuC,iBAAiB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wDAAwD;;AAExD;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA,iCAAiC;;AAEjC,qCAAqC,MAAC;;AAEtC;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;;;AAGb;AACA,iEAAiE;;AAEjE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA,6CAA6C;;AAE7C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qEAAqE;;AAErE;;AAEA;AACA;AACA;AACA,iEAAiE;;AAEjE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;;AAE5C;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA,qBAAqB,8DAA8D;AACnF,qBAAqB,0DAA0D;AAC/E,qBAAqB,gEAAgE;AACrF,qBAAqB,0DAA0D;AAC/E,qBAAqB,wDAAwD;AAC7E;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C,EAAE;AAChD;;AAEA;AACA;AACA,uCAAuC,qBAAqB;AAC5D;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,uCAAuC,2BAA2B;AAClE;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,2CAA2C,2BAA2B;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,yBAAyB;AACzB;AACA,2CAA2C,2BAA2B;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,0BAA0B;AACrE;AACA;AACA;AACA,2CAA2C,0BAA0B;AACrE;AACA;AACA;AACA;AACA;AACA,uCAAuC,yBAAyB;AAChE;AACA;AACA,uCAAuC,0BAA0B;AACjE;AACA;AACA;AACA,2CAA2C,2BAA2B;AACtE;AACA;AACA;AACA,2CAA2C,0BAA0B;AACrE;AACA;AACA;AACA;AACA;AACA,uCAAuC,0BAA0B;AACjE;AACA;AACA,uCAAuC,0BAA0B;AACjE;AACA;AACA;AACA,uCAAuC,yBAAyB;AAChE;AACA;AACA,uCAAuC,2BAA2B;AAClE;AACA;AACA;AACA;AACA,uCAAuC,0BAA0B;AACjE;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,0DAA0D;;AAE1D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA;AACA;;AAEA,gDAAgD,iBAAiB;;AAEjE;AACA;AACA;AACA,qDAAqD,oBAAoB;AACzE;AACA;;AAEA;AACA;AACA,+BAA+B,2BAA2B;AAC1D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2BAA2B;AAC1D;AACA;AACA,uCAAuC,2BAA2B;AAClE;AACA;AACA;AACA,iCAAiC;AACjC,uEAAuE;AACvE,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,2BAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;;AAEb,iCAAiC;AACjC,+CAA+C;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;;AAEzC,+CAA+C;;AAE/C;AACA;AACA;AACA;AACA,uDAAuD;;AAEvD,4HAA4H;;AAE5H;AACA,iEAAiE;;AAEjE;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,cAAc;;;AAGd,kCAAkC;;AAElC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,iDAAiD;AACjD;;AAEA;AACA;AACA;AACA;AACA,0JAA0J;AAC1J;;AAEA;AACA;AACA,iCAAiC;AACjC;;;AAGA;AACA,mEAAmE;;AAEnE;AACA,iCAAiC;AACjC;AACA;AACA;AACA,6BAA6B;AAC7B,+BAA+B;AAC/B;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;;AAGA,+BAA+B;;AAE/B;AACA;AACA;AACA,aAAa;;;AAGb;AACA;AACA;;AAEA;AACA,+BAA+B,qBAAqB;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAA4D;;AAE5D;;AAEA;AACA;AACA;;AAEA;AACA,qCAAqC,YAAY;AACjD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uEAAuE,kDAAkD;AACzH,qCAAqC;AACrC;AACA;AACA;AACA;AACA,+EAA+E,qDAAqD;AACpI,6CAA6C;AAC7C;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA,mCAAmC,cAAc;AACjD;AACA,uCAAuC,eAAe;AACtD,yBAAyB;AACzB,uCAAuC,eAAe;AACtD,yBAAyB;AACzB,sCAAsC,eAAe;AACrD;AACA;AACA,8CAA8C,KAAK;AACnD;AACA;AACA,aAAa;AACb;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,4BAA4B;AACvE;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,uCAAuC,iBAAiB;AACxD,2CAA2C,oBAAoB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,+DAA+D,0BAA0B;AACzF;AACA;AACA;AACA;;AAEA;AACA,+DAA+D,gCAAgC;AAC/F;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;;AAEA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,wBAAwB;AAC/D;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA2C,iBAAiB;AAC5D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;;AAEA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;;AAGb;AACA,iCAAiC;;AAEjC;AACA;AACA;AACA;AACA,yCAAyC;;AAEzC,uCAAuC;;AAEvC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;;AAGA,kCAAkC;;AAElC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA,mCAAmC,wBAAwB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+BAA+B,0CAA0C;AACzE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE;;AAEvB;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA,qCAAqC;AACrC,iCAAiC;AACjC;AACA;AACA,qCAAqC;AACrC;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA,qCAAqC;AACrC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,6BAA6B;AAC7B;;AAEA,qBAAqB;;AAErB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,iBAAiB;;;AAGjB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC,wBAAwB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,oCAAoC;AACvE;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,sFAAsF,kBAAkB;AACxG;AACA;AACA,iCAAiC;AACjC;AACA;;AAEA;;AAEA;;AAEA,wDAAwD,wBAAwB;AAChF;AACA;;AAEA,0DAA0D,iCAAiC;AAC3F;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yCAAyC;AACzC,qCAAqC;AACrC,iCAAiC;AACjC;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,G;;;;;;;;;;;;ACx1IY;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,4DAA4D,gBAAgB;AAC5E;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yDAAyD;;AAEzD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,mBAAmB;AACnB;AACA;AACA,mBAAmB;AACnB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;;AAE3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,2BAA2B;AAC3B;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,iBAAiB;;AAEjB;AACA;AACA;AACA,wDAAwD,eAAe;AACvE,iBAAiB;AACjB,wDAAwD,gBAAgB;AACxE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,mBAAmB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,qBAAqB;AACrB,mBAAmB;AACnB,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,uBAAuB;AACvB;AACA;AACA,yBAAyB;AACzB;AACA,qBAAqB;AACrB;AACA;AACA,uBAAuB;AACvB;AACA,mBAAmB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,yBAAyB;AACzB,uBAAuB;AACvB,qBAAqB;AACrB;AACA;AACA,mBAAmB;AACnB;AACA;;AAEA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E;;AAE7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,iCAAiC;AACjC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,2BAA2B;AAC3B,yBAAyB;AACzB;AACA,qBAAqB;AACrB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,mBAAmB;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,uBAAuB;;AAEvB;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,mBAAmB;AACnB,iBAAiB;AACjB,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,mBAAmB;AACnB,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,qBAAqB;AACrB,mBAAmB;AACnB;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0CAA0C,6BAA6B;AACvE;AACA,yBAAyB,4CAA4C;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,wCAAwC;AACvE;;AAEA,iCAAiC,sCAAsC;AACvE;AACA;AACA;AACA;AACA;AACA,8EAA8E;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA+B,6BAA6B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+BAA+B,6BAA6B;AAC5D;;AAEA,iCAAiC,4BAA4B;AAC7D;AACA;AACA;AACA,0EAA0E;;AAE1E;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,uBAAuB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA+B,6BAA6B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,gCAAgC;AAC/D;;AAEA,iCAAiC,+BAA+B;AAChE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,2BAA2B;AAC3B;AACA;AACA,6BAA6B;AAC7B;AACA,yBAAyB;AACzB;AACA;AACA,2BAA2B;AAC3B;AACA,uBAAuB;AACvB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,CAAC;;AAED;AACA;AACA,CAAC;;AAED;AACA;AACA,CAAC;;AAED;AACA;AACA,CAAC;;;;;;;;;;;;;AC1lEY;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,8FAA8F,KAAK,SAAS,KAAK,uBAAuB,WAAW,iBAAiB;AACpK;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,uBAAuB;AACvB,qBAAqB;AACrB,sBAAsB;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,8BAA8B;AAC7D,+CAA+C,qBAAqB;AACpE;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,+CAA+C;AAC/C,aAAa;;AAEb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,+CAA+C;AAC/C,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,wDAAwD;AACxD,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,+CAA+C;AAC/C,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC","file":"customapp.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\"use strict\";\n\n(function () {\n    var app = angular.module(\"main\", [\n        \"ionic\",\n        \"ionic.native\",\n        \"ngCordova\",\n        \"questionnaire\",\n        \"actionPlan\",\n        \"commonUtils\",\n        \"ui.router\",\n        \"ionic-datepicker\",\n        \"EntityUtils\",\n        \"documentLibrary\",\n        \"askade\",\n    ]);\n    app.factory(\"$exceptionHandler\", [\n        \"$injector\",\n        function ($injector) {\n            return function (exception, cause) {\n                var localStorageUtility = $injector.get(\"LocalStorageUtility\");\n                localStorageUtility.addExceptionToLogTable(exception, cause);\n                var rScope = $injector.get(\"$rootScope\");\n                rScope.$broadcast(\"exceptionRefresh\", exception, cause);\n            };\n        },\n    ]);\n    app\n        .config([\n            \"$stateProvider\",\n            \"$urlRouterProvider\",\n            \"$compileProvider\",\n            \"$ionicConfigProvider\",\n            function (\n                $stateProvider,\n                $urlRouterProvider,\n                $compileProvider,\n                $ionicConfigProvider\n            ) {\n                //Sample Hello world !!\n                $ionicConfigProvider.views.swipeBackEnabled(false);\n                $compileProvider.debugInfoEnabled(false);\n                $stateProvider\n                    .state(\"welcome\", {\n                        url: \"/welcome\",\n                        templateUrl: \"templates/guides/welcome/welcome.html\",\n                        controller: \"guideController\",\n                    })\n                    .state(\"screen\", {\n                        url: \"/screen\",\n                        templateUrl: \"templates/guides/welcome/screen.html\",\n                        controller: \"guideController\",\n                    })\n                    .state(\"toggleUrl\", {\n                        url: \"/toggleUrl:isFromLogin\",\n                        templateUrl: \"templates/toggleUrl.html\",\n                        controller: \"toggleUrlController\",\n                    })\n                    .state(\"login\", {\n                        url: \"/login\",\n                        templateUrl: \"templates/login.html\",\n                        controller: \"loginController\",\n                    })\n                    .state(\"app\", {\n                        url: \"/app\",\n                        templateUrl: \"templates/mainMenu.html\",\n                        controller: \"sideMenuController\",\n                    })\n                    .state(\"sideapp\", {\n                        url: \"/sideapp\",\n                        templateUrl: \"templates/favourite_guide/favouriteslideloader.html\",\n                        controller: \"guideController\",\n                    })\n                    .state(\"app.home\", {\n                        url: \"/home\",\n                        views: {\n                            menuContent: {\n                                templateUrl: \"templates/home.html\",\n                                controller: \"homeController\",\n                            },\n                        },\n                    })\n                    .state(\"app.news\", {\n                        url: \"/news:id\",\n                        views: {\n                            menuContent: {\n                                templateUrl: \"templates/news/news.html\",\n                                controller: \"newsController\",\n                            },\n                        },\n                    })\n                    .state(\"app.favorite\", {\n                        url: \"/favorite\",\n                        views: {\n                            menuContent: {\n                                templateUrl: \"templates/favorite.html\",\n                                controller: \"favoriteController\",\n                            },\n                        },\n                    })\n                    .state(\"app.akwTabs\", {\n                        url: \"/akwTabs:viewTitle:type:modColor\",\n                        views: {\n                            menuContent: {\n                                templateUrl: \"templates/askade_templates/askadeTabs.html\",\n                                controller: [\n                                    \"$scope\",\n                                    \"$stateParams\",\n                                    \"userApplicationsManager\",\n                                    \"userDetailsManager\",\n                                    function controller(\n                                        $scope,\n                                        $stateParams,\n                                        userApplicationsManager,\n                                        userDetailsManager\n                                    ) {\n                                        $scope.title = $stateParams.viewTitle;\n                                        $scope.tabBgColor = $stateParams.modColor;\n                                        $scope.moduleName = $stateParams.type;\n                                        var userProfile =\n                                            userDetailsManager.getUserLastLoggedTimeStamp();\n                                        $scope.applicationDetails =\n                                            userApplicationsManager.getUserApplicationByText(\n                                                userProfile.UserId,\n                                                $scope.moduleName\n                                            );\n\n                                        $scope.checkClassExists = function (tabId) {\n                                            var tabElement = angular.element(\n                                                document.querySelector(\"#\" + tabId)\n                                            );\n                                            var classExisting = tabElement.hasClass(\"active\");\n                                            return classExisting;\n                                        };\n                                    },\n                                ],\n                            },\n                        },\n                    })\n                    .state(\"app.akwTabs.active\", {\n                        url: \"/active:typeCode:viewTitle\",\n                        views: {\n                            \"active-tab\": {\n                                templateUrl: \"templates/askade_templates/askadeList.html\",\n                                controller: \"askadeListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.akwTabs.inProgress\", {\n                        url: \"/inProgress:typeCode:viewTitle\",\n                        views: {\n                            \"inProgress-tab\": {\n                                templateUrl: \"templates/askade_templates/inProgress.html\",\n                                controller: \"askadeListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.akwTabs.completed\", {\n                        url: \"/completed:typeCode:viewTitle\",\n                        views: {\n                            \"completed-tab\": {\n                                templateUrl: \"templates/askade_templates/completed.html\",\n                                controller: \"askadeListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.askade\", {\n                        url: \"/askade:id:state:viewTitle:modColor\",\n                        views: {\n                            menuContent: {\n                                templateUrl: \"templates/askade_templates/askadeTemplate.html\",\n                                controller: \"askadeController\",\n                            },\n                        },\n                    })\n                    .state(\"app.surveyTabs\", {\n                        url: \"/surveyTabs:viewTitle:date\",\n                        views: {\n                            menuContent: {\n                                templateUrl: \"templates/survey/survey.html\",\n                                controller: \"surveyController\",\n                            }\n                        }\n                    })\n                    .state(\"app.surveyTabs.active\", {\n                        url: \"/active\",\n                        views: {\n                            \"active-tab\": {\n                                templateUrl: \"templates/survey/activeSurvey.html\",\n                                controller: \"surveyController\",\n                            }\n                        }\n                    })\n                    .state(\"app.surveyTabs.history\", {\n                        url: \"/history\",\n                        views: {\n                            \"history-tab\": {\n                                templateUrl: \"templates/survey/surveyHistory.html\",\n                                controller: \"surveyController\",\n                            }\n                        }\n                    })\n                    .state(\"app.qTabs\", {\n                        url: \"/qTabs:viewTitle:type:modColor:date\",\n                        views: {\n                            menuContent: {\n                                templateUrl: \"templates/questionnaire/questionnaireTabs.html\",\n                                controller: [\n                                    \"$scope\",\n                                    \"$stateParams\",\n                                    \"userApplicationsManager\",\n                                    \"userDetailsManager\",\n                                    function controller(\n                                        $scope,\n                                        $stateParams,\n                                        userApplicationsManager,\n                                        userDetailsManager\n                                    ) {\n                                        $scope.title = $stateParams.viewTitle;\n                                        $scope.tabBgColor = $stateParams.modColor;\n                                        $scope.moduleName = $stateParams.type;\n                                        $scope.date = $stateParams.date;\n                                        var userProfile =\n                                            userDetailsManager.getUserLastLoggedTimeStamp();\n                                        $scope.applicationDetails =\n                                            userApplicationsManager.getUserApplicationByText(\n                                                userProfile.UserId,\n                                                $scope.moduleName\n                                            );\n\n                                        $scope.checkClassExists = function (tabId) {\n                                            var tabElement = angular.element(\n                                                document.querySelector(\"#\" + tabId)\n                                            );\n                                            var classExisting = tabElement.hasClass(\"active\");\n                                            return classExisting;\n                                        };\n                                    },\n                                ],\n                            },\n                        },\n                    })\n                    .state(\"app.startScreen\", {\n                        url: \"/startScreen:id:state:viewTitle:modColor:date\",\n                        views: {\n                            menuContent: {\n                                templateUrl: \"templates/questionnaire/startScreen.html\",\n                                controller: \"startScreenController\",\n                            },\n                        },\n                    })\n                    .state(\"app.qTabs.active\", {\n                        url: \"/active:viewTitle:type\",\n                        views: {\n                            \"active-tab\": {\n                                templateUrl: \"templates/questionnaireList.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.qTabs.inProgress\", {\n                        url: \"/inProgress:viewTitle:type\",\n                        views: {\n                            \"inProgress-tab\": {\n                                templateUrl: \"templates/questionnaire/inprogress.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.qTabs.completed\", {\n                        url: \"/completed:viewTitle:type\",\n                        views: {\n                            \"completed-tab\": {\n                                templateUrl: \"templates/questionnaire/completed.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.apwTabs\", {\n                        url: \"/apwTabs:viewTitle:type:modColor\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/actionplan_templates/actionPlanWizardTabs.html\",\n                                controller: [\n                                    \"$scope\",\n                                    \"$stateParams\",\n                                    \"userApplicationsManager\",\n                                    \"userDetailsManager\",\n                                    function controller(\n                                        $scope,\n                                        $stateParams,\n                                        userApplicationsManager,\n                                        userDetailsManager\n                                    ) {\n                                        $scope.moduleName = $stateParams.type;\n                                        $scope.title = $stateParams.viewTitle;\n                                        $scope.tabBgColor = $stateParams.modColor;\n                                        var userProfile =\n                                            userDetailsManager.getUserLastLoggedTimeStamp();\n                                        $scope.applicationDetails =\n                                            userApplicationsManager.getUserApplicationByText(\n                                                userProfile.UserId,\n                                                $scope.moduleName\n                                            );\n\n                                        $scope.checkClassExists = function (tabId) {\n                                            var tabElement = angular.element(\n                                                document.querySelector(\"#\" + tabId)\n                                            );\n                                            var classExisting = tabElement.hasClass(\"active\");\n                                            return classExisting;\n                                        };\n                                    },\n                                ],\n                            },\n                        },\n                    })\n                    .state(\"app.apwTabs.active\", {\n                        url: \"/active:typeCode:viewTitle\",\n                        views: {\n                            \"active-tab\": {\n                                templateUrl: \"templates/actionPlanList.html\",\n                                controller: \"actionPlanListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.apwTabs.inProgress\", {\n                        url: \"/inProgress:typeCode:viewTitle\",\n                        views: {\n                            \"inProgress-tab\": {\n                                templateUrl: \"templates/actionplan_templates/inprogress.html\",\n                                controller: \"actionPlanListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.apwTabs.completed\", {\n                        url: \"/completed:typeCode:viewTitle\",\n                        views: {\n                            \"completed-tab\": {\n                                templateUrl: \"templates/actionplan_templates/completed.html\",\n                                controller: \"actionPlanListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.myProfile\", {\n                        url: \"/myProfile\",\n                        views: {\n                            menuContent: {\n                                templateUrl: \"templates/myProfile.html\",\n                            },\n                        },\n                    })\n                    .state(\"app.apv\", {\n                        url: \"/apv:id:state:pov:viewTitle:modColor:date\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/questionnaire/questionnaireTemplate.html\",\n                                controller: \"questionController\",\n                            },\n                        },\n                    })\n                    .state(\"app.riskProfile\", {\n                        url: \"/riskProfile:id:state:pov:viewTitle:date\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/questionnaire/questionnaireTemplate.html\",\n                                controller: \"questionController\",\n                            },\n                        },\n                    })\n                    .state(\"app.employeeSatisfaction\", {\n                        url: \"/employeeSatisfaction:id:state:pov:viewTitle:date\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/questionnaire/questionnaireTemplate.html\",\n                                controller: \"questionController\",\n                            },\n                        },\n                    })\n                    .state(\"app.managementEvaluation\", {\n                        url: \"/managementEvaluation:id:state:pov:viewTitle:date\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/questionnaire/questionnaireTemplate.html\",\n                                controller: \"questionController\",\n                            },\n                        },\n                    })\n                    .state(\"app.planOfAction\", {\n                        url: \"/planOfAction:id:state:viewTitle:modColor\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/actionplan_templates/actionplanTemplate.html\",\n                                controller: \"actionPlanController\",\n                            },\n                        },\n                    })\n                    .state(\"app.administration\", {\n                        url: \"/administration:viewTitle\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/administration_templates/administration.html\",\n                                controller: [\n                                    \"$scope\",\n                                    \"$stateParams\",\n                                    function controller($scope, $stateParams) {\n                                        $scope.title = $stateParams.viewTitle;\n                                    },\n                                ],\n                            },\n                        },\n                    })\n                    .state(\"app.humanResource\", {\n                        url: \"/humanResource:id:state:pov:viewTitle:date\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/questionnaire/questionnaireTemplate.html\",\n                                controller: \"questionController\",\n                            },\n                        },\n                    })\n                    .state(\"app.claimTabs\", {\n                        url: \"/claimTabs:viewTitle:type:modColor\",\n                        views: {\n                            menuContent: {\n                                templateUrl: \"templates/claim/claimTabs.html\",\n                                controller: [\n                                    \"$scope\",\n                                    \"$stateParams\",\n                                    \"userApplicationsManager\",\n                                    \"userDetailsManager\",\n                                    function controller(\n                                        $scope,\n                                        $stateParams,\n                                        userApplicationsManager,\n                                        userDetailsManager\n                                    ) {\n                                        $scope.title = $stateParams.viewTitle;\n                                        $scope.tabBgColor = $stateParams.modColor;\n                                        $scope.moduleName = $stateParams.type;\n                                        var userProfile =\n                                            userDetailsManager.getUserLastLoggedTimeStamp();\n                                        $scope.applicationDetails =\n                                            userApplicationsManager.getUserApplicationByText(\n                                                userProfile.UserId,\n                                                $scope.moduleName\n                                            );\n\n                                        $scope.checkClassExists = function (tabId) {\n                                            var tabElement = angular.element(\n                                                document.querySelector(\"#\" + tabId)\n                                            );\n                                            var classExisting = tabElement.hasClass(\"active\");\n                                            return classExisting;\n                                        };\n                                    },\n                                ],\n                            },\n                        },\n                    })\n                    .state(\"app.claimTabs.active\", {\n                        url: \"/active:typeCode:viewTitle\",\n                        views: {\n                            \"active-tab\": {\n                                templateUrl: \"templates/askade_templates/askadeList.html\",\n                                controller: \"askadeListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.claimTabs.inProgress\", {\n                        url: \"/inProgress:typeCode:viewTitle\",\n                        views: {\n                            \"inProgress-tab\": {\n                                templateUrl: \"templates/askade_templates/inProgress.html\",\n                                controller: \"askadeListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.claimTabs.completed\", {\n                        url: \"/completed:typeCode:viewTitle\",\n                        views: {\n                            \"completed-tab\": {\n                                templateUrl: \"templates/askade_templates/completed.html\",\n                                controller: \"askadeListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.claim\", {\n                        url: \"/claim:id:state:viewTitle:modColor\",\n                        views: {\n                            menuContent: {\n                                templateUrl: \"templates/askade_templates/askadeTemplate.html\",\n                                controller: \"askadeController\",\n                            },\n                        },\n                    })\n                    .state(\"app.documentLibrary\", {\n                        url: \"/docummentLibrary:viewTitle:type:modColor:groupName\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/documentLibrary_templates/documentLibraryList.html\",\n                                controller: \"documentLibraryListController\",\n                            },\n                        },\n                    }) // Preview related state values\n                    .state(\"app.questionnairePV\", {\n                        url: \"/questionnairePV:id:viewTitle\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/preview_templates/questionnaire/questionnairePreview.html\",\n                                controller: \"questionController\",\n                            },\n                        },\n                    })\n                    .state(\"app.planOfActionPV\", {\n                        url: \"/planOfActionPV:id:viewTitle\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/preview_templates/actionPlan/actionPlanPreview.html\",\n                                controller: \"actionPlanController\",\n                            },\n                        },\n                    })\n                    .state(\"app.askadePV\", {\n                        url: \"/askadePV:id:viewTitle\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/preview_templates/askade/askadePreview.html\",\n                                controller: \"askadeController\",\n                            },\n                        },\n                    })\n                    .state(\"app.rTabs\", {\n                        url: \"/rTabs:viewTitle:type:modColor:date\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/riskProfile_templates/riskProfileTabs.html\",\n                                controller: [\n                                    \"$scope\",\n                                    \"$stateParams\",\n                                    \"userApplicationsManager\",\n                                    \"userDetailsManager\",\n                                    function controller(\n                                        $scope,\n                                        $stateParams,\n                                        userApplicationsManager,\n                                        userDetailsManager\n                                    ) {\n                                        $scope.title = $stateParams.viewTitle;\n                                        $scope.tabBgColor = $stateParams.modColor;\n                                        $scope.moduleName = $stateParams.type;\n                                        $scope.date = $stateParams.date;\n                                        var userProfile =\n                                            userDetailsManager.getUserLastLoggedTimeStamp();\n                                        $scope.applicationDetails =\n                                            userApplicationsManager.getUserApplicationByText(\n                                                userProfile.UserId,\n                                                $scope.moduleName\n                                            );\n\n                                        $scope.checkClassExists = function (tabId) {\n                                            var tabElement = angular.element(\n                                                document.querySelector(\"#\" + tabId)\n                                            );\n                                            var classExisting = tabElement.hasClass(\"active\");\n                                            return classExisting;\n                                        };\n                                    },\n                                ],\n                            },\n                        },\n                    })\n                    .state(\"app.rTabs.active\", {\n                        url: \"/active:viewTitle:type\",\n                        views: {\n                            \"active-tab\": {\n                                templateUrl: \"templates/questionnaireList.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.rTabs.inProgress\", {\n                        url: \"/inProgress:viewTitle:type\",\n                        views: {\n                            \"inProgress-tab\": {\n                                templateUrl: \"templates/questionnaire/inprogress.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.rTabs.completed\", {\n                        url: \"/completed:viewTitle:type\",\n                        views: {\n                            \"completed-tab\": {\n                                templateUrl: \"templates/questionnaire/completed.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.eTabs\", {\n                        url: \"/eTabs:viewTitle:type:modColor:date\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/employeeSatisfaction_templates/employeeSatisfactionTabs.html\",\n                                controller: [\n                                    \"$scope\",\n                                    \"$stateParams\",\n                                    \"userApplicationsManager\",\n                                    \"userDetailsManager\",\n                                    function controller(\n                                        $scope,\n                                        $stateParams,\n                                        userApplicationsManager,\n                                        userDetailsManager\n                                    ) {\n                                        $scope.title = $stateParams.viewTitle;\n                                        $scope.tabBgColor = $stateParams.modColor;\n                                        $scope.moduleName = $stateParams.type;\n                                        $scope.date = $stateParams.date;\n                                        var userProfile =\n                                            userDetailsManager.getUserLastLoggedTimeStamp();\n                                        $scope.applicationDetails =\n                                            userApplicationsManager.getUserApplicationByText(\n                                                userProfile.UserId,\n                                                $scope.moduleName\n                                            );\n\n                                        $scope.checkClassExists = function (tabId) {\n                                            var tabElement = angular.element(\n                                                document.querySelector(\"#\" + tabId)\n                                            );\n                                            var classExisting = tabElement.hasClass(\"active\");\n                                            return classExisting;\n                                        };\n                                    },\n                                ],\n                            },\n                        },\n                    })\n                    .state(\"app.eTabs.active\", {\n                        url: \"/active:viewTitle:type\",\n                        views: {\n                            \"active-tab\": {\n                                templateUrl: \"templates/questionnaireList.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.eTabs.inProgress\", {\n                        url: \"/inProgress:viewTitle:type\",\n                        views: {\n                            \"inProgress-tab\": {\n                                templateUrl: \"templates/questionnaire/inprogress.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.eTabs.completed\", {\n                        url: \"/completed:viewTitle:type\",\n                        views: {\n                            \"completed-tab\": {\n                                templateUrl: \"templates/questionnaire/completed.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.fpTabs\", {\n                        url: \"/fpTabs:viewTitle:type:modColor:date\",\n                        views: {\n                            menuContent: {\n                                templateUrl: \"templates/frontPlanner/frontPlannerTabs.html\",\n                                controller: [\n                                    \"$scope\",\n                                    \"$stateParams\",\n                                    \"userApplicationsManager\",\n                                    \"userDetailsManager\",\n                                    function controller(\n                                        $scope,\n                                        $stateParams,\n                                        userApplicationsManager,\n                                        userDetailsManager\n                                    ) {\n                                        $scope.title = $stateParams.viewTitle;\n                                        $scope.tabBgColor = $stateParams.modColor;\n                                        $scope.moduleName = $stateParams.type;\n                                        $scope.date = $stateParams.date;\n                                        var userProfile =\n                                            userDetailsManager.getUserLastLoggedTimeStamp();\n                                        $scope.applicationDetails =\n                                            userApplicationsManager.getUserApplicationByText(\n                                                userProfile.UserId,\n                                                $scope.moduleName\n                                            );\n\n                                        $scope.checkClassExists = function (tabId) {\n                                            var tabElement = angular.element(\n                                                document.querySelector(\"#\" + tabId)\n                                            );\n                                            var classExisting = tabElement.hasClass(\"active\");\n                                            return classExisting;\n                                        };\n                                    },\n                                ],\n                            },\n                        },\n                    })\n                    .state(\"app.fpTabs.active\", {\n                        url: \"/active:viewTitle:type\",\n                        views: {\n                            \"active-tab\": {\n                                templateUrl: \"templates/questionnaireList.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.fpTabs.inProgress\", {\n                        url: \"/inProgress:viewTitle:type\",\n                        views: {\n                            \"inProgress-tab\": {\n                                templateUrl: \"templates/questionnaire/inprogress.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.fpTabs.completed\", {\n                        url: \"/completed:viewTitle:type\",\n                        views: {\n                            \"completed-tab\": {\n                                templateUrl: \"templates/questionnaire/completed.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.hTabs\", {\n                        url: \"/hTabs:viewTitle:type:modColor:date\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/humanResource_templates/humanResourceTabs.html\",\n                                controller: [\n                                    \"$scope\",\n                                    \"$stateParams\",\n                                    \"userApplicationsManager\",\n                                    \"userDetailsManager\",\n                                    function controller(\n                                        $scope,\n                                        $stateParams,\n                                        userApplicationsManager,\n                                        userDetailsManager\n                                    ) {\n                                        $scope.title = $stateParams.viewTitle;\n                                        $scope.tabBgColor = $stateParams.modColor;\n                                        $scope.moduleName = $stateParams.type;\n                                        $scope.date = $stateParams.date;\n                                        var userProfile =\n                                            userDetailsManager.getUserLastLoggedTimeStamp();\n                                        $scope.applicationDetails =\n                                            userApplicationsManager.getUserApplicationByText(\n                                                userProfile.UserId,\n                                                $scope.moduleName\n                                            );\n\n                                        $scope.checkClassExists = function (tabId) {\n                                            var tabElement = angular.element(\n                                                document.querySelector(\"#\" + tabId)\n                                            );\n                                            var classExisting = tabElement.hasClass(\"active\");\n                                            return classExisting;\n                                        };\n                                    },\n                                ],\n                            },\n                        },\n                    })\n                    .state(\"app.hTabs.active\", {\n                        url: \"/active:viewTitle:type\",\n                        views: {\n                            \"active-tab\": {\n                                templateUrl: \"templates/questionnaireList.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.hTabs.inProgress\", {\n                        url: \"/inProgress:viewTitle:type\",\n                        views: {\n                            \"inProgress-tab\": {\n                                templateUrl: \"templates/questionnaire/inprogress.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.hTabs.completed\", {\n                        url: \"/completed:viewTitle:type\",\n                        views: {\n                            \"completed-tab\": {\n                                templateUrl: \"templates/questionnaire/completed.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.mTabs\", {\n                        url: \"/mTabs:viewTitle:type:modColor:date\",\n                        views: {\n                            menuContent: {\n                                templateUrl:\n                                    \"templates/managementEvaluation_templates/managementEvaluationTabs.html\",\n                                controller: [\n                                    \"$scope\",\n                                    \"$stateParams\",\n                                    \"userApplicationsManager\",\n                                    \"userDetailsManager\",\n                                    function controller(\n                                        $scope,\n                                        $stateParams,\n                                        userApplicationsManager,\n                                        userDetailsManager\n                                    ) {\n                                        $scope.title = $stateParams.viewTitle;\n                                        $scope.tabBgColor = $stateParams.modColor;\n                                        $scope.moduleName = $stateParams.type;\n                                        $scope.date = $stateParams.date;\n                                        var userProfile =\n                                            userDetailsManager.getUserLastLoggedTimeStamp();\n                                        $scope.applicationDetails =\n                                            userApplicationsManager.getUserApplicationByText(\n                                                userProfile.UserId,\n                                                $scope.moduleName\n                                            );\n\n                                        $scope.checkClassExists = function (tabId) {\n                                            var tabElement = angular.element(\n                                                document.querySelector(\"#\" + tabId)\n                                            );\n                                            var classExisting = tabElement.hasClass(\"active\");\n                                            return classExisting;\n                                        };\n                                    },\n                                ],\n                            },\n                        },\n                    })\n                    .state(\"app.mTabs.active\", {\n                        url: \"/active:viewTitle:type\",\n                        views: {\n                            \"active-tab\": {\n                                templateUrl: \"templates/questionnaireList.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.mTabs.inProgress\", {\n                        url: \"/inProgress:viewTitle:type\",\n                        views: {\n                            \"inProgress-tab\": {\n                                templateUrl: \"templates/questionnaire/inprogress.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    })\n                    .state(\"app.mTabs.completed\", {\n                        url: \"/completed:viewTitle:type\",\n                        views: {\n                            \"completed-tab\": {\n                                templateUrl: \"templates/questionnaire/completed.html\",\n                                controller: \"questionnaireListController\",\n                            },\n                        },\n                    });\n            },\n        ])\n        .run([\n            \"$rootScope\",\n            \"$state\",\n            \"AuthenticationService\",\n            \"$ionicPlatform\",\n            \"ResetPoolUtil\",\n            \"LocalStorageHelper\",\n            \"$timeout\",\n            \"BackButtonParamService\",\n            function (\n                $rootScope,\n                $state,\n                AuthenticationService,\n                $ionicPlatform,\n                ResetPoolUtil,\n                LocalStorageHelper,\n                $timeout,\n                BackButtonParamService\n            ) {\n                $rootScope.$on(\n                    \"$stateChangeStart\",\n                    function (event, next, nextParams, fromState) {\n                        var initDbPromise = LocalStorageHelper.initDb();\n                        initDbPromise.promise.then(function (success) {\n                            var authService = AuthenticationService.authenticateUser();\n                            authService\n                                .then(function (data) {\n                                    if (data === false) {\n                                        if (next.name !== \"login\") {\n                                            if (fromState.name !== \"login\") {\n                                                event.preventDefault();\n                                                $state.go(\"login\");\n                                            }\n                                        }\n                                    }\n                                })\n                                .catch(function () {\n                                    if (next.name !== \"login\") {\n                                        if (fromState.name !== \"login\") {\n                                            event.preventDefault();\n                                            $state.go(\"login\");\n                                        }\n                                    }\n                                });\n                            return;\n                        });\n                    }\n                );\n\n                //Maintaining the sync between Hardware back button(Android) and nav bar's back button\n                $ionicPlatform.registerBackButtonAction(function (event) {\n                    //Pass parameter true to emulate hardware back button click.\n\n                    var parms = BackButtonParamService.getParams();\n                    if (parms && parms.shouldExit) {\n                        ResetPoolUtil.resetPool();\n                        ionic.Platform.exitApp();\n                    }\n\n                    $rootScope.myGoBack(true); // Closing the app on hardware back button press\n\n                    if (\n                        $state.current.name === \"app.home\" ||\n                        $state.current.name === \"login\" \n                    ) {\n                        ResetPoolUtil.resetPool();\n                        ionic.Platform.exitApp();\n                    } else if ($state.current.name === \"welcome\") {\n                        // TODO: THis implementation can be changed if the background color of the welcome images are changed to App background color.\n                        $rootScope.$emit(\"RenderButtonBgHeaderColor\");\n                        $timeout(function () {\n                            $rootScope.$emit(\"OnlyWelcomeBgColor\", {\n                                isWelcome: false,\n                            });\n                        }, 200);\n                        screen.orientation.unlock();\n                    }\n                }, 101);\n                //window.addEventListener('native.keyboardshow', keyboardShowHandler);\n                //window.addEventListener('native.keyboardhide', keyboardHideHandler);\n\n                function keyboardShowHandler(e) {\n                    //alert('Keyboard height is: ' + e.keyboardHeight);\n                    ionic.keyboard.disable(); //cordova.plugins.Keyboard.disableScroll(true);\n                }\n\n                function keyboardHideHandler(e) {\n                    //alert('Keyboard height is: ' + e.keyboardHeight);\n                    ionic.keyboard.enable(); //cordova.plugins.Keyboard.disableScroll(false);\n                }\n\n                $ionicPlatform.ready(function () {\n                    // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard\n                    // for form inputs)\n                    // if (window.cordova && window.cordova.plugins.Keyboard) {\n                    //   //cordova.plugins.Keyboard.disableScroll(false);\n                    //   cordova.plugins.Keyboard.hideKeyboardAccessoryBar(false);\n                    // }\n\n                    if (window.StatusBar) {\n                        // Set the statusbar to use the default style, tweak this to\n                        // remove the status bar on iOS or change it to use white instead of dark colors.\n                        StatusBar.styleDefault();\n                    }\n                });\n            },\n        ]);\n})();\n\n// JS interface method to interact with the native code.\nwindow.pushutility = function (str, args, callback) {\n    cordova.exec(\n        callback,\n        function (err) {\n            callback(\"Nothing to echo.\");\n        },\n        \"PushUtility\",\n        \"pushutility\",\n        [str, args]\n    );\n};\n\n// //NEEDS TO BE REMOVED WHNE DONE\n// document.addEventListener('click',function(){\n//    window.pushutility('subscribe',['News','ETC','Trees','Vehicle'], function(echoValue) {\n//      alert(echoValue); // should alert true.\n//    });\n\n//   // window.pushutility('token',[], function(userDeviceToken) {\n//   //   alert(userDeviceToken); // should alert true.\n//   // });\n// });\n// // JS interface method to interact with the native code.\n\nwindow.pushNavigate = function () {\n\n};\n\nwindow.navigateFromPush = function (routePayload) {\n    var appOptionsElement = document.getElementById(\"_hdnForPush\");\n    var appOptionsScope = angular.element(appOptionsElement).scope();\n    appOptionsScope.processPushNotification(routePayload);\n};\n","\"use strict\";\r\n\r\nvar app = angular.module('directives', []);\r\napp.factory(\"$exceptionHandler\", ['$injector', function ($injector) {\r\n    return function (exception, cause) {\r\n        var localStorageUtility = $injector.get('LocalStorageUtility')\r\n        localStorageUtility.addExceptionToLogTable(exception, cause);\r\n        var rScope = $injector.get('$rootScope');\r\n        rScope.$broadcast('exceptionRefresh', exception, cause);\r\n    };\r\n}]);\r\n\r\napp.directive(\"postscriptinlinehtml\", function () {\r\n    return {\r\n        priority: 10, // adjust this value ;)\r\n        link: function (scope, element, attrs) {\r\n            scope.$watch(attrs.ngBindHtml, function (newvalue) {\r\n                element\r\n                    .find(\"a\")\r\n                    .off()\r\n                    .on(\"click\", function (event) {\r\n                        event.preventDefault();\r\n                        var clicked = element.attr(\"clicked\");\r\n                        var target = event.target.attributes[\"target\"] ? event.target.attributes[\"target\"].value : \"_blank\";\r\n                        if (!clicked) {\r\n                            element.attr(\"clicked\", \"1\");\r\n                            if (scope.openInAppForInlineHtml) scope.openInAppForInlineHtml(event.target.attributes.href.value, target);\r\n                        } else {\r\n                            if (scope.openInAppForInlineHtml) scope.openInAppForInlineHtml(event.target.attributes.href.value, target);\r\n                            element.removeAttr(\"clicked\");\r\n                        }\r\n                    });\r\n            });\r\n        },\r\n    };\r\n});\r\n\r\napp.directive(\"postscript\", function () {\r\n    return {\r\n        priority: 10, // adjust this value ;)\r\n        link: function (scope, element, attrs) {\r\n            scope.$watch(attrs.href, function (newvalue) {\r\n                element\r\n                    .off()\r\n                    .on(\"click\", function (event) {\r\n                        var load = function load() {\r\n                            event.preventDefault();\r\n                            var clicked = element.attr(\"clicked\");\r\n                            var targetNode = getTargetNode(event.target);\r\n                            if (targetNode != null) {\r\n                                var target = targetNode.attributes[\"target\"] ? targetNode.attributes[\"target\"].value : \"_blank\";\r\n                                if (!clicked) {\r\n                                    element.attr(\"clicked\", \"1\");\r\n                                    if (scope.openInApp) scope.openInApp(targetNode.attributes.href.value, target);\r\n                                } else {\r\n                                    if (scope.openInApp) scope.openInApp(targetNode.attributes.href.value, target);\r\n                                    element.removeAttr(\"clicked\");\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        var getTargetNode = function getTargetNode(targetNode) {\r\n                            if (targetNode.nodeName !== \"A\") {\r\n                                targetNode = targetNode.parentElement;\r\n                            }\r\n                            return targetNode;\r\n                        }\r\n\r\n                        load();\r\n                    });\r\n            });\r\n        },\r\n    };\r\n});\r\n\r\napp.directive(\"handlelink\", [\"CommonMethodsFactory\", function (CommonMethodsFactory) {\r\n    return {\r\n        priority: 10, // adjust this value ;)\r\n        link: function (scope, element, attrs) {\r\n            scope.$watch(attrs.ngBindHtml, function (newvalue) {\r\n                element\r\n                    .find(\"a\")\r\n                    .off()\r\n                    .on(\"click\", function (event) {\r\n                        event.preventDefault();\r\n                        var target = \"_system\";\r\n\r\n                        var options =\r\n                            \"location=yes,clearcache=yes,clearsessioncache=yes,cleardata=yes\";\r\n                        var win = CommonMethodsFactory.openInAppBrowser(event.target.attributes.href.value, target, options);\r\n                    });\r\n            });\r\n        },\r\n    };\r\n}]);\r\n\r\napp.directive('sanitizescript', function () {\r\n    return {\r\n        restrict: 'A',\r\n        require: 'ngModel',\r\n        link: function (scope, element, attributes, ngModelController) {\r\n            ngModelController.$parsers.push(function (valueFromInput) {\r\n                // put the inverse logic, to transform formatted data into model data\r\n                // what you return here, will be stored in the $scope\r\n                var replacer = /(<([^>]+)>)/ig;\r\n                var sanitized = valueFromInput.replace(replacer, '');\r\n                element.val(sanitized);\r\n                return sanitized;\r\n            });\r\n        }\r\n    };\r\n});\r\n\r\napp.directive('sanitizenumber', function () {\r\n    return {\r\n        restrict: 'A',\r\n        require: 'ngModel',\r\n        link: function (scope, element, attributes, ngModelController) {\r\n            ngModelController.$parsers.push(function (valueFromInput) {\r\n                var userPrefLang = window.localStorage.getItem('userLanguage');\r\n                //Taking last entered value\r\n                var lastValue = valueFromInput[valueFromInput.length - 1];\r\n                if (lastValue !== undefined)\r\n                    //checking if the entered value is a number or not\r\n                    var numberCheck = Number.isInteger(Number.parseInt(lastValue));\r\n                //if the entered value is not a number then if loop will execute\r\n                if (numberCheck === false) {\r\n                    //replacing the characters with \",\"\r\n                    var replacer = /[A-Za-z_\\W]+/g;\r\n                    var sanitized = valueFromInput.replace(replacer, \",\");\r\n                    //checking for number of dots in a inputvalue\r\n                    var multipleComma = sanitized.match(/\\,/g).length;\r\n                    //if the inputvalue has only one dot then if loop will execute\r\n                    if (multipleComma < 2) {\r\n                        if (sanitized[0] === ',') {\r\n                            sanitized = '0,';\r\n                        }\r\n                        //if the userPreredfLanguage is english then we are replacing \",\" with \".\"\r\n                        if (userPrefLang === \"en-US\") {\r\n                            var economy = sanitized.replace(',', '.')\r\n                            var lastValue = economy[13];\r\n                            if (lastValue === '.') {\r\n                                economy = '';\r\n                            }\r\n                            element.val(economy);\r\n                            return economy;\r\n                        }\r\n                        var lastValue = sanitized[13];\r\n                        if (lastValue === ',') {\r\n                            sanitized = '';\r\n                        }\r\n                        element.val(sanitized);\r\n                        return sanitized;\r\n                    }\r\n                    //if there are more then one \",\" clearing the inputvalue\r\n                    sanitized = '';\r\n                    element.val(sanitized);\r\n                    return sanitized;\r\n                }\r\n                if (userPrefLang === \"en-US\") {\r\n                    var patt = /^\\d{0,14}\\.?\\d{1,2}$/;\r\n                } else {\r\n                    var patt = /^\\d{0,14}\\,?\\d{1,2}$/;\r\n                }\r\n                var deci = valueFromInput.match(patt);\r\n                if (deci === null) {\r\n                    element.val(deci);\r\n                    return deci;\r\n                } else {\r\n                    element.val(deci.input);\r\n                    return deci.input;\r\n                }\r\n            });\r\n        }\r\n    };\r\n});\r\n\r\napp.directive('questionnaireTemplate', function () {\r\n    return {\r\n        restrict: 'E',\r\n        templateUrl: 'templates/questionnaire_templates/questionnaireTemplate.html'\r\n    };\r\n});\r\napp.directive('groupTemplate', function () {\r\n    return {\r\n        restrict: 'E',\r\n        templateUrl: function templateUrl(templateElement, attrs) {\r\n            return attrs.templateurl;\r\n        }\r\n    };\r\n});\r\napp.directive(\"questionTemplate\", function () {\r\n    return {\r\n        restrict: \"E\",\r\n        templateUrl: function templateUrl(templateElement, attrs) {\r\n            return attrs.templateurl;\r\n        }\r\n    };\r\n});\r\napp.directive(\"shortText\", function () {\r\n    return {\r\n        restrict: \"A\",\r\n        templateUrl: \"templates/answer_templates/shortText.html\"\r\n    };\r\n});\r\napp.directive('longText', function () {\r\n    return {\r\n        restrict: 'E',\r\n        templateUrl: 'templates/answer_templates/longText.html'\r\n    };\r\n});\r\napp.directive('buttonGroup', function () {\r\n    return {\r\n        restrict: 'E',\r\n        templateUrl: 'templates/answer_templates/buttonGroup.html'\r\n    };\r\n});\r\napp.directive('multiOptionMultipleChoice', function () {\r\n    return {\r\n        restrict: 'E',\r\n        templateUrl: 'templates/answer_templates/checkBox.html'\r\n    };\r\n});\r\napp.directive('multiOptionSingleChoice', function () {\r\n    return {\r\n        restrict: 'A',\r\n        templateUrl: 'templates/answer_templates/radio.html'\r\n    };\r\n});\r\napp.directive('ngAutoExpand', function () {\r\n    return {\r\n        restrict: 'A',\r\n        link: function link(scope, element, attr) {\r\n            var update = function update() {\r\n                element.css(\"height\", \"auto\");\r\n                element.css(\"height\", element[0].scrollHeight + \"px\");\r\n            };\r\n\r\n            scope.$watch(attr.ngModel, function () {\r\n                update();\r\n            });\r\n            scope.$watch(function () {\r\n                return element.is(':visible');\r\n            }, function () {\r\n                update();\r\n            });\r\n        }\r\n    };\r\n});\r\n\r\napp.directive(\"timepicker\", [\r\n    \"$rootScope\",\r\n    function ($rootScope) {\r\n        var popUpData = {\r\n            restrict: \"E\",\r\n            tagName: \"div\",\r\n            templateUrl: \"templates/answer_templates/timePicker.html\",\r\n            transclude: true,\r\n            transElement: null,\r\n            popUpElement: null,\r\n            require: \"ngModel\",\r\n            link: function link(scope, element, attr, ctrl) {\r\n                var eleScope = element.scope();\r\n\r\n                scope.hour = null;\r\n                scope.minute = null;\r\n\r\n                var inputEle = element.find(\"input\");\r\n\r\n                var hourInputEle = inputEle[0];\r\n                var minuteInputEl = inputEle[1];\r\n\r\n                $(hourInputEle).focusout(function (e) {\r\n                    if (scope.hour < 10) {\r\n                        scope.$apply(function () {\r\n                            scope.hour = pad(scope.hour);\r\n                            scope.minute = pad(scope.minute);\r\n                            ctrl.$setViewValue(getFinalTime());\r\n                        });\r\n                    }\r\n                });\r\n\r\n                $(minuteInputEl).focusout(function (e) {\r\n                    if (scope.minute < 10) {\r\n                        scope.$apply(function () {\r\n                            scope.hour = pad(scope.hour);\r\n                            scope.minute = pad(scope.minute);\r\n                            ctrl.$setViewValue(getFinalTime());\r\n                        });\r\n                    }\r\n                });\r\n\r\n                var render = function (val) {\r\n                    if (ctrl.$modelValue) {\r\n                        var timeVal = ctrl.$modelValue;\r\n                        var time = timeVal.split(\":\");\r\n                        scope.hour = time[0];\r\n                        scope.minute = time[1];\r\n                    }\r\n                };\r\n\r\n                scope.$watch(attr[\"ngModel\"], render);\r\n                render();\r\n\r\n                var pad = function (val) {\r\n                    if (val == null || val == \"\") {\r\n                        return \"00\";\r\n                    }\r\n\r\n                    if (angular.isDefined(val) && val.toString().length < 2) {\r\n                        return \"0\" + val;\r\n                    } else {\r\n                        return val;\r\n                    }\r\n                };\r\n\r\n                scope.pressed = function (val) {\r\n                    if (val) {\r\n                        if (scope.hour && scope.hour.length == 2) {\r\n                            scope.hour = null;\r\n                        }\r\n                    } else {\r\n                        if (scope.minute && scope.minute.length == 2) {\r\n                            scope.minute = null;\r\n                        }\r\n                    }\r\n                };\r\n\r\n                scope.updateHours = function () {\r\n                    var hours = getHours();\r\n                    var minutes = getMinutes();\r\n                    if (angular.isDefined(hours) && angular.isDefined(minutes)) {\r\n                        scope.hour = hours;\r\n                        scope.minute = minutes;\r\n                        ctrl.$setViewValue(getFinalTime());\r\n                        if (scope.hour && scope.hour.length == 2) {\r\n                            minuteInputEl.focus();\r\n                        }\r\n                    }\r\n                };\r\n\r\n                scope.updateMinutes = function () {\r\n                    var hours = getHours();\r\n                    var minutes = getMinutes();\r\n                    if (angular.isDefined(hours) && angular.isDefined(minutes)) {\r\n                        scope.hour = hours;\r\n                        scope.minute = minutes;\r\n                        ctrl.$setViewValue(getFinalTime());\r\n                    }\r\n                };\r\n\r\n                var emptyVal = \"00\";\r\n                var getHours = function () {\r\n                    var hour = scope.hour;\r\n                    var isValid = hour >= 0 && hour < 24 && hour != null;\r\n                    if (isValid) {\r\n                        return hour;\r\n                    } else if (hour > 23) {\r\n                        return (hour = \"23\");\r\n                    } else {\r\n                        return emptyVal;\r\n                    }\r\n                };\r\n\r\n                var getMinutes = function () {\r\n                    var minute = scope.minute;\r\n                    var isValid = minute >= 0 && minute < 60 && minute != null;\r\n                    if (isValid) {\r\n                        return minute;\r\n                    } else if (minute > 59) {\r\n                        return (minute = \"59\");\r\n                    } else {\r\n                        return emptyVal;\r\n                    }\r\n                };\r\n\r\n                var getFinalTime = function () {\r\n                    var timeVal = scope.hour + \":\" + scope.minute;\r\n                    return timeVal;\r\n                };\r\n            },\r\n        };\r\n        return popUpData;\r\n    },\r\n]);\r\n\r\napp.directive('countpicker', [\"$rootScope\", function ($rootScope) {\r\n    var popUpData = {\r\n        restrict: 'E',\r\n        tagName: 'div',\r\n        templateUrl: 'templates/answer_templates/countPicker.html',\r\n        transclude: true,\r\n        transElement: null,\r\n        popUpElement: null,\r\n        require: 'ngModel',\r\n        link: function link(scope, element, attr, ctrl) {\r\n            var counter = 0, min = 0, max = 100000, step = 1, disablenegativeValue = false, defaultValue;\r\n\r\n            scope.countername = attr.namevalue;\r\n\r\n            if (attr.disablenegative) {\r\n                disablenegativeValue = attr.disablenegative === \"1\" ? true : false;\r\n            }\r\n\r\n            if (attr.step) {\r\n                step = parseInt(attr.step);\r\n            }\r\n\r\n            if (attr.count) {\r\n                counter = parseInt(attr.count);\r\n            }\r\n\r\n            var render = function (val) {\r\n                if (ctrl.$modelValue) {\r\n                    counter = scope.countValue = parseInt(ctrl.$modelValue);\r\n                }\r\n            };\r\n\r\n            scope.$watch(attr['ngModel'], render);\r\n            render();\r\n\r\n            if (attr.minvalue) {\r\n                min = parseInt(attr.minvalue);\r\n            }\r\n\r\n            if (attr.maxvalue) {\r\n                max = parseInt(attr.maxvalue);\r\n            }\r\n\r\n            scope.add = function () {\r\n                counter = counter + step;\r\n                if (counter > max) {\r\n                    counter = max;\r\n                }\r\n                scope.countValue = counter;\r\n                ctrl.$setViewValue(counter.toString());\r\n            }\r\n\r\n            scope.subtract = function () {\r\n                counter = counter - step;\r\n\r\n                if (disablenegativeValue === true) {\r\n                    if (counter < min) {\r\n                        counter = min;\r\n                    }\r\n                }\r\n\r\n                ctrl.$setViewValue(counter.toString());\r\n                scope.countValue = counter;\r\n            }\r\n        }\r\n    };\r\n    return popUpData;\r\n}]);\r\n\r\napp.directive(\"ranking\", [\r\n    \"$rootScope\",\r\n    \"$ionicScrollDelegate\",\r\n    function ($rootScope, $ionicScrollDelegate) {\r\n        var popUpData = {\r\n            restrict: \"E\",\r\n            tagName: \"div\",\r\n            templateUrl: \"templates/answer_templates/ranking.html\",\r\n            transclude: true,\r\n            transElement: null,\r\n            popUpElement: null,\r\n            require: \"ngModel\",\r\n            scope: {\r\n                onListReordered: \"=reorder\",\r\n            },\r\n            link: function link(scope, element, attr, ctrl, ngModel) {\r\n                var options = JSON.parse(attr.reorderoptions);\r\n                var answer = JSON.parse(attr.answer);\r\n\r\n                var answerId = answer[attr.datatextfield];\r\n                var answerIds = [];\r\n                if (answerId) {\r\n                    answerIds = answerId.split(\"|\");\r\n                }\r\n\r\n                var sortedList = options;\r\n                if (answerIds.length > 0) {\r\n                    var sortedList = [];\r\n                    for (var i = 0; i < answerIds.length; i++) {\r\n                        var selectedId = answerIds[i];\r\n                        var item = options.find((x) => x.Id === selectedId);\r\n                        sortedList.push(item);\r\n                    }\r\n                }\r\n                else {\r\n                    var defaultSelectionIds = sortedList.map((t) => t[attr.valueid]);\r\n                    var mergedDefaultSelection = defaultSelectionIds.join('|');\r\n                    console.log(mergedDefaultSelection);\r\n                    ctrl.$setViewValue(mergedDefaultSelection);\r\n                }\r\n\r\n                var cloneReorderOptions = Object.assign([], sortedList);\r\n                scope.reorderoptions = cloneReorderOptions;\r\n\r\n                function preventBehavior(e) {\r\n                    e.preventDefault();\r\n                };\r\n\r\n                scope.onReorderButtonTouch = function () {\r\n                    document.addEventListener(\"touchmove\", preventBehavior, { passive: false });\r\n                };\r\n\r\n                scope.onReorderButtonRelease = function () {\r\n                    document.removeEventListener(\"touchmove\", preventBehavior);\r\n                };\r\n\r\n                scope.moveItem = function (item, fromIndex, toIndex) {\r\n                    var otherOptions = scope.reorderoptions;\r\n                    otherOptions.splice(fromIndex, 1);\r\n                    otherOptions.splice(toIndex, 0, item);\r\n\r\n                    scope.reorderoptions = otherOptions;\r\n\r\n                    if (!angular.isUndefined(scope.onListReordered)) {\r\n                        var answer = JSON.parse(attr.answer);\r\n                        var orderedIds = scope.reorderoptions.map((t) => t[attr.valueid]);\r\n                        var selectedConcatedIds = scope.onListReordered(answer, orderedIds);\r\n\r\n                        ctrl.$setViewValue(selectedConcatedIds);\r\n                    }\r\n                };\r\n            },\r\n        };\r\n        return popUpData;\r\n    },\r\n]);\r\n\r\n/* A dropdown which based on a template shows the list in \r\nwhich the on search filters the list. */\r\n\r\n/* TODO: Consider moving $rootScope out of the directive, it is used to get the icon and resource text */\r\n\r\napp.directive('lazyDropdown', [\"$rootScope\", \"ionicToast\", \"$ionicPlatform\", \"$cordovaNetwork\", \"LocalStorageHelper\", \"dropdownValueManager\", \"CommonMethodsFactory\", \"LoaderService\", \"$timeout\", function ($rootScope, ionicToast, $ionicPlatform, $cordovaNetwork, LocalStorageHelper, dropdownValueManager, CommonMethodsFactory, LoaderService, $timeout) {\r\n    return {\r\n        restrict: 'AEC',\r\n        templateUrl: 'templates/listPopUp.html',\r\n        scope: {\r\n            onItemSelected: '=',\r\n            datasource: '=',\r\n            textField: '=',\r\n            valueField: '=',\r\n            selectedDisplayText: '=',\r\n            selectedDataEntity: '=',\r\n            entity: '=',\r\n            entityText: '=',\r\n            isSearchDisabled: '='\r\n        },\r\n        require: 'ngModel',\r\n        link: function link(scope, element, attr, modelCtrl) {\r\n            // screen.lockOrientation('portrait');\r\n            var eleScope = element.scope();\r\n            scope.dataTextField = eleScope[attr.textField];\r\n            scope.dataValueField = attr.valueField;\r\n            scope.dataSelectedTextField = attr.selectedDisplayText;\r\n\r\n            scope.isQRCodeReaderEnabled = eleScope[attr.qrCodeReaderEnabled];\r\n            scope.isSearchDisabled = eleScope[attr.isSearchDisabled];\r\n\r\n            scope.isAddVisible = false;\r\n            scope.AddText = $rootScope.getResourceText('LIT_MOBILE_ADD_ITEM');\r\n\r\n            scope.dataEntity = attr.entity;\r\n            scope.dataEntityText = attr.entityText;\r\n\r\n            var dropdownTypeVal = attr.dropdowntype;\r\n            var moduleNameVal = attr.type;\r\n            var columnTypeVal = attr.columntype;\r\n            var enableOnlineSearchVal = attr.enableonline; // Assigning Column sub type value passed from drop down html template\r\n\r\n            var columnSubTypeVal = attr.columnSubType;\r\n            $ionicPlatform.ready(function () {\r\n                scope.searchIcon = $rootScope.getIconValue('Search');\r\n                scope.closeIcon = $rootScope.getIconValue('Close');\r\n                scope.searchText = $rootScope.getResourceText('LIT_SEARCH');\r\n                scope.qrScannerIcon = $rootScope.getIconValue('Scanner');\r\n                scope.flipCameraIcon = $rootScope.getIconValue('Flip');\r\n                scope.flashCameraIcon = $rootScope.getIconValue('Flash');\r\n                scope.scannerCloseIcon = $rootScope.getIconValue('ScannerClose');\r\n            });\r\n\r\n            scope.searchModel = { Text: \"\" };\r\n            var itemListName = attr.datasource; // Defining empty lists to add the drop down data\r\n\r\n            var itemList = [];\r\n            var itemListData = [];\r\n            var dropDownType = null;\r\n            var columnType = null;\r\n            var columnSubType = null;\r\n            var isDeviceOnline = $cordovaNetwork.isOnline();\r\n            var type = $cordovaNetwork.getNetwork();\r\n            isDeviceOnline = isDeviceOnline === true || type === 'unknown';\r\n            scope.enableOnline = false;\r\n            scope.isOnlineSearch = false; // Below boolean variable is used to highlight web api returned values\r\n            scope.isSmallScreenDevice = false;// Below boolean variable is used to highlight web api returned values\r\n            scope.isOnlineDropDownData = false; // Storing the list data in a temporary list array till the filter is applied\r\n            scope.subType = eleScope[columnSubTypeVal];\r\n\r\n            if (screen.height < 700) {\r\n                scope.isSmallScreenDevice = true;\r\n            }\r\n\r\n            itemListData = eleScope[itemListName];\r\n            columnType = eleScope[columnTypeVal];\r\n            dropDownType = eleScope[dropdownTypeVal];\r\n            var moduleName = eleScope[moduleNameVal];\r\n            columnSubType = eleScope[columnSubTypeVal]; // Adding filtered list to the actual defined list above\r\n\r\n            itemList = dropdownValueManager.filterDropDownDataByModule(itemListData, moduleName, columnType, columnSubType); // Formating columntype value to fetch table name\r\n\r\n            var tabname = dropdownValueManager.getTableNameText(dropDownType, columnType, moduleName);\r\n            scope.enableOnline = eleScope[enableOnlineSearchVal]; // If device is online, then enable online button in view or else disable.\r\n\r\n            if (isDeviceOnline) {\r\n                scope.isOnlineSearch = eleScope[enableOnlineSearchVal];\r\n            }\r\n\r\n            scope.onlineVal = $rootScope.getResourceText('LIT_ONLINE');\r\n            scope.offlineVal = $rootScope.getResourceText('LIT_OFFLINE');\r\n\r\n            scope.updateIsOnlineSearch = function (isOnlineSearchValue) {\r\n                if (isDeviceOnline) {\r\n                    scope.isOnlineSearch = !isOnlineSearchValue;\r\n\r\n                    if (!scope.isOnlineSearch) {\r\n                        // Assigning local data from the mobile to datasource, when user toggles to offline search mode.\r\n                        scope.dataSource = itemList;\r\n                        scope.isOnlineDropDownData = false;\r\n                    }\r\n                } else {\r\n                    ionicToast.showDefault($rootScope.getResourceText('MSG_CHECK_INTERNET_CONNECTION'));\r\n                }\r\n            }; // Setting max character length (TODO can be added as a setting)\r\n\r\n\r\n            var maxCharLength = 2; // Method called when online search setting value is true\r\n\r\n            scope.callWebApi = function (searchText) {\r\n                // Checking if isOnlineSearch is true (as this can be turned off by the user in view)\r\n                LoaderService.hide();\r\n                if (scope.isOnlineSearch) {\r\n                    var enteredText = searchText[scope.dataTextField];\r\n\r\n                    if (enteredText.length >= maxCharLength) {\r\n                        // Check if device is online\r\n                        if (isDeviceOnline) {\r\n                            // Check if entered string is valid\r\n                            var isValidText = CommonMethodsFactory.validateSearchText(enteredText);\r\n                            enteredText = CommonMethodsFactory.encodeToBase64(enteredText);\r\n                            //if (isValidText) {\r\n                            var newItemList = []; // Making a web api call for online search\r\n                            // Also filter is applied if the online search performed has a  valid columnsubtype value\r\n\r\n                            var dropdownPromise = dropdownValueManager.getDropDownValueBasedOnSearchFilter('search', tabname, moduleName, enteredText, columnSubType);\r\n                            dropdownPromise.then(function (success) {\r\n                                // Filtering the downloaded data before displaying to user\r\n                                // Passing column sub type to filter dropdown based on coluumn sub type  if present\r\n                                newItemList = dropdownValueManager.filterDropDownBasedOnModule(moduleName, success, tabname, dropDownType, columnSubType); // Adding the check for department because adding DisplayText property directly to the Online retreived data.\r\n                                // Once user selects a value the value will be inserted.\r\n\r\n                                if (tabname === 'Department') {\r\n                                    newItemList = dropdownValueManager.addDisplayTextToOnlineSearchData(newItemList);\r\n                                } // If filtered data list is not empty assign filtered values\r\n                                // else assign local database fetched values\r\n\r\n\r\n                                if (newItemList.length !== 0) {\r\n                                    scope.dataSource = newItemList; // Boolean variable is used to highlight the new downloaded data.\r\n                                    checkShouldShowAddItemButton(searchText, true);\r\n                                    scope.isOnlineDropDownData = true;\r\n                                } else {\r\n                                    scope.dataSource = itemList;\r\n                                    checkShouldShowAddItemButton(searchText, true);\r\n                                    scope.isOnlineDropDownData = false;\r\n                                }\r\n                            });\r\n                            //} else {\r\n                            //    ionicToast.showDefault($rootScope.getResourceText('MSG_DATA_NOT_VALID'));\r\n                            //}\r\n                        } else {\r\n                            // in the case of device offline assing local data to drop down\r\n                            scope.dataSource = itemList;\r\n                            scope.isOnlineDropDownData = false;\r\n                        }\r\n                    }\r\n                }\r\n                checkShouldShowAddItemButton(searchText, !scope.isOnlineSearch);\r\n            }; // selectedDataEntity attribute returns the specified entity from the view.\r\n            // selEntity variable will have a value which the user selects in the drop down.\r\n            // Default value is initilized to null.\r\n\r\n\r\n            var selEntity = ''; // Checking if the attribute is defined in the view. If defined assigning the entity to selEntity variable. \r\n\r\n            if (attr.selectedDataEntity) {\r\n                var selectedEntity = attr.selectedDataEntity;\r\n                selEntity = eleScope[selectedEntity];\r\n            } // method is called when user selects a drop down data and isOnlineSearch value should be true\r\n\r\n            function checkShouldShowAddItemButton(searchObj, shouldVerify) {\r\n                var isVisible = false;\r\n                if (shouldVerify) {\r\n                    var enteredText = searchObj[scope.dataTextField];\r\n                    isVisible = !scope.dataSource.some(function (item) { return item.Text.includes(enteredText) }) && scope.subType === \"Company\";\r\n                }\r\n                scope.isAddVisible = isVisible;\r\n            }\r\n\r\n            scope.AddItem = function () {\r\n                scope.tapped(scope.searchModel);\r\n            }\r\n\r\n            function insertDropDownData(itemData) {\r\n                dropdownValueManager.insertDropDownData(tabname, itemData);\r\n            }\r\n\r\n            function getDefaultText(itemList, valueId) {\r\n                for (var i = 0; i < itemList.length; i++) {\r\n                    var item = itemList[i];\r\n                    var selectedId = item[scope.dataValueField];\r\n\r\n                    if (selectedId == valueId) {\r\n                        // Handling for the scenario where drop downs will have a pre-defined value\r\n                        if (!angular.isUndefined(scope.onItemSelected)) {\r\n                            scope.onItemSelected(item, selEntity);\r\n                        }\r\n                        return item[scope.dataTextField];\r\n                    }\r\n                }\r\n            }\r\n\r\n            var valueId = scope.$parent.$eval(attr.ngModel); // Displaying default value for a drop down based on the boolean value 'defaultValue'\r\n\r\n            var defaultValue = scope.$parent.$eval(attr.dropdownDefaultValue);\r\n\r\n            if (valueId != null && defaultValue) {\r\n                scope.selectedText = getDefaultText(itemList, valueId);\r\n            }\r\n\r\n            scope.clearSearch = function () {\r\n                scope.isAddVisible = false;\r\n                scope.searchModel = { Text: \"\" }; // Adding this for a scenario, where user has searched for a text, but the result is not what he/she wanted\r\n                // then wants to select a value from local data. so on clear button clicked assigning back to the view.\r\n\r\n                scope.dataSource = itemList;\r\n                scope.isOnlineDropDownData = false;\r\n            };\r\n\r\n            scope.showFullValue = function () {\r\n                ionicToast.showDefault(scope.selectedText);\r\n            };\r\n\r\n            scope.closeKeyBoard = function () {\r\n                cordova.plugins.Keyboard.close();\r\n            };\r\n\r\n            scope.getItemWidthForWindow = function () {\r\n                return '100%';\r\n            };\r\n\r\n            scope.disableTagButton = function (selectedText) {\r\n                if (selectedText != null) {\r\n                    return {\r\n                        'visibility': 'hidden'\r\n                    };\r\n                }\r\n\r\n                return {\r\n                    'visibility': 'visible'\r\n                };\r\n            };\r\n\r\n            scope.getDeviceHeight = function () {\r\n                return window.screen.height * window.devicePixelRatio;\r\n            };\r\n\r\n            scope.getItemHeightForWindow = function () {\r\n                var deviceHeight = window.screen.height * window.devicePixelRatio;\r\n                var isIOS = (ionic.Platform.isAndroid() == false);\r\n                if (isIOS) {\r\n                    if (deviceHeight <= 960) {\r\n                        return '150px';\r\n                    } else {\r\n                        return '300px';\r\n                    }\r\n                } else {\r\n                    if (deviceHeight <= 500) {\r\n                        return '50px';\r\n                    } else if (deviceHeight <= 750) {\r\n                        return '65px';\r\n                    } else if (deviceHeight <= 1000) {\r\n                        return '260px';\r\n                    } else {\r\n                        return '300px';\r\n                    }\r\n                }\r\n            };\r\n\r\n            scope.getPlatformSpecificTemplate = function () {\r\n                // Currently handling only for IOS and Android\r\n                var isIOS = (ionic.Platform.isAndroid() == false);\r\n                if (isIOS) {\r\n                    return 'templates/dropDown_template/iosTemplate.html';\r\n                }\r\n                else {\r\n                    return 'templates/dropDown_template/androidTemplate.html';\r\n                }\r\n\r\n            };\r\n\r\n            scope.getItemHeight = function (item) {\r\n                var valueField = item[scope.dataTextField];\r\n\r\n                if (valueField == undefined) {\r\n                    valueField = '';\r\n                }\r\n\r\n                var length = valueField.length;\r\n                var height = length * 1.5;\r\n\r\n                if (height < 40) {\r\n                    height = 40;\r\n                }\r\n\r\n                return height + 'px';\r\n            };\r\n\r\n            scope.dataSource = itemList;\r\n\r\n            scope.showCompleteItemText = function (item) {\r\n                ionicToast.showDefault(item.Text);\r\n            };\r\n\r\n            scope.tapped = function (item) {\r\n                try {\r\n                    console.log(item);\r\n                    var currValue = modelCtrl.$modelValue;\r\n                    var valueField = item[scope.dataValueField];\r\n                    var textField = item[scope.dataSelectedTextField];\r\n                    modelCtrl.$setViewValue(valueField);\r\n                    modelCtrl.$render();\r\n\r\n                    if (scope.dataEntityText) {\r\n                        scope.entity[scope.dataEntityText] = textField;\r\n                    }\r\n\r\n                    if (!angular.isUndefined(scope.onItemSelected)) {\r\n                        // Callback function called defined in the respective controllers.\r\n                        scope.onItemSelected(item, selEntity);\r\n                    }\r\n\r\n                    if (scope.isOnlineSearch) {\r\n                        // Save selected drop down data to local database\r\n                        insertDropDownData(item);\r\n                    }\r\n\r\n                    var completed = eleScope.$emit('Completed', {\r\n                        data: textField\r\n                    });\r\n\r\n                    $timeout(function () {\r\n                        scope.$apply();\r\n                    })\r\n                    if (ionic.Platform.isAndroid() == true)\r\n                        screen.orientation.unlock();\r\n                } catch (e) {\r\n                    console.log(e);\r\n                }\r\n            };\r\n\r\n            scope.openScanner = function () {\r\n                //when scanner icon is clickd multiple times then if loop fails and loads previously \r\n                //loaded values from else loop this prevents from calling document.queryselector every time when scan icon is \r\n                //clicked\r\n                cordova.plugins.Keyboard.close();\r\n                if (scope.scanItems === null || scope.scanItems === undefined) {\r\n                    var popupView = document.querySelector(\".popup-container\");\r\n                    var mainView = document.querySelector(\".scannerView\");\r\n                    var scannerButton = document.querySelector(\".scannerButtons\");\r\n                    var cancle = document.querySelector(\".cancleScan\");\r\n                    var flash = document.querySelector(\".flashCam\");\r\n                    var flipCamera = document.querySelector(\".flipCam\");\r\n                    var readInputVal = document.querySelector(\".searchTextVal\");\r\n                    var androidView = document.querySelector(\".platform-android\");\r\n\r\n                    scope.scanItems = {\r\n                        popupContainer: popupView,\r\n                        scannerView: mainView,\r\n                        scannerButton: scannerButton,\r\n                        cancleButton: cancle,\r\n                        flashCamera: flash,\r\n                        flipCamera: flipCamera,\r\n                        read: readInputVal,\r\n                        androidView: androidView\r\n                    };\r\n                } else {\r\n                    var popupView = scope.scanItems.popupContainer;\r\n                    var mainView = scope.scanItems.scannerView;\r\n                    var scannerButton = scope.scanItems.scannerButton;\r\n                    var cancle = scope.scanItems.cancleButton;\r\n                    var flash = scope.scanItems.flashCamera;\r\n                    var flipCamera = scope.scanItems.flipCamera;\r\n                    var readInputVal = scope.scanItems.read;\r\n                    var androidView = scope.scanItems.androidView;\r\n                }\r\n\r\n                //blur is added because the Keyboard gets shown when scanning\r\n                //readInputVal.blur();\r\n\r\n                //the back button handled for android using an backbutton event\r\n                document.addEventListener('backbutton', function () {\r\n                    if (androidView)\r\n                        androidView.style.setProperty(\"background-color\", \"var(--statusbar-bg-color, #2c3445)\", \"important\");\r\n                    mainView.style.visibility = \"visible\";\r\n                    scannerButton.style.setProperty(\"visibility\", \"hidden\", \"important\");\r\n                });\r\n\r\n                window.QRScanner.prepare(onDone);\r\n\r\n                function onDone(err, status) {\r\n                    if (err) {\r\n                        console.error(err);\r\n                    }\r\n                    if (status.authorized) {\r\n                        //cancle camera is handled here\r\n                        cancle.addEventListener(\"click\", function () {\r\n                            if (status.lightEnabled === true) {\r\n                                window.QRScanner.disableLight(function () {\r\n                                    status.lightEnabled = false;\r\n                                });\r\n                            }\r\n                            window.QRScanner.cancelScan();\r\n                        });\r\n\r\n                        //flash light is handled here\r\n                        flash.addEventListener(\"click\", function () {\r\n                            if (status.lightEnabled === false) {\r\n                                window.QRScanner.enableLight(function () {\r\n                                    status.lightEnabled = true;\r\n                                });\r\n                            } else {\r\n                                window.QRScanner.disableLight(function () {\r\n                                    status.lightEnabled = false;\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                        //camera fip is handled here\r\n                        flipCamera.addEventListener('click', function () {\r\n                            if (status.currentCamera === 0) {\r\n                                window.QRScanner.useFrontCamera(function () {\r\n                                    status.currentCamera = 1;\r\n                                });\r\n                            } else {\r\n                                window.QRScanner.useBackCamera(function () {\r\n                                    status.currentCamera = 0;\r\n                                });\r\n                            }\r\n                        })\r\n\r\n                        //when the scanner is get called the popupview and the body both will be made hidden and the buttons will be made visible\r\n                        if (androidView)\r\n                            androidView.style.setProperty(\"background-color\", \"transparent\", \"important\");\r\n                        popupView.style.visibility = \"hidden\";\r\n                        mainView.style.visibility = \"hidden\";\r\n                        scannerButton.style.setProperty(\"visibility\", \"visible\", \"important\");\r\n                        window.QRScanner.show(function () {\r\n                            window.QRScanner.scan(displayContents);\r\n                        });\r\n                    }\r\n                }\r\n\r\n                function displayContents(err, text) {\r\n                    if (err) {\r\n                        // when the cancle event is gets triggered error loop will be called\r\n                        if (err.name === \"SCAN_CANCELED\") {\r\n                            //the popupView and body will be set back t0 visible and the buttons to hidden\r\n                            if (androidView)\r\n                                androidView.style.setProperty(\"background-color\", \"var(--statusbar-bg-color, #2c3445)\", \"important\");\r\n                            popupView.style.visibility = \"visible\";\r\n                            mainView.style.visibility = \"visible\";\r\n                            scannerButton.style.setProperty(\"visibility\", \"hidden\", \"important\");\r\n                            // destroy is called because it will close the camera/video preview\r\n                            window.QRScanner.destroy();\r\n                        } else {\r\n                            console.error(err._message);\r\n                        }\r\n                    } else {\r\n                        //if in case the light is on after scanning the below method will off the flash lisht\r\n                        window.QRScanner.disableLight();\r\n                        //and the popupView and body will be set back t0 visible and the buttons to hidden\r\n                        if (androidView)\r\n                            androidView.style.setProperty(\"background-color\", \"var(--statusbar-bg-color, #2c3445)\", \"important\");\r\n                        popupView.style.visibility = \"visible\";\r\n                        mainView.style.visibility = \"visible\";\r\n                        scannerButton.style.setProperty(\"visibility\", \"hidden\", \"important\");\r\n                        window.QRScanner.destroy();\r\n                        scope.searchModel = { Text: \"\" };\r\n                        //scanned data is passed to call the webapi\r\n                        readInputVal.focus();\r\n                        scope.searchModel[scope.dataTextField] = text;\r\n                        scope.callWebApi(scope.searchModel);\r\n                    }\r\n                }\r\n            };\r\n        }\r\n    };\r\n}]);\r\n/* Pop up to display content defined in the pop-up directive .\r\nPlease refer actionplanDropDownDefault.html page for its implementation.*/\r\n\r\napp.directive('popUp', [\"$ionicPopup\", \"$rootScope\", function ($ionicPopup, $rootScope) {\r\n    var popUpData = {\r\n        restrict: 'E',\r\n        tagName: 'button',\r\n        transclude: true,\r\n        transElement: null,\r\n        popUpElement: null,\r\n        require: 'ngModel',\r\n        link: {\r\n            post: function post(scope, el, att, ctrl, transclude) {\r\n                var selectedText = att.displayText;\r\n                var isAssignIdText = att.assignIdText;\r\n                scope.$on('Completed', function (obj, val) {\r\n                    selectedText = val.data;\r\n\r\n                    if (isAssignIdText != null) {\r\n                        if (ctrl.$viewValue != selectedText) {\r\n                            ctrl.$setViewValue(selectedText);\r\n                        }\r\n                    }\r\n\r\n                    el.html(selectedText);\r\n                    popUpData.popUpElement.close();\r\n                });\r\n                el.html(selectedText);\r\n            },\r\n            pre: function pre(scope, el, attrs, ctrl, transclude) {\r\n                popUpData.transElement = transclude();\r\n                el.bind('tap', function () {\r\n                    var html = popUpData.transElement;\r\n                    popUpData.popUpElement = $ionicPopup.show({\r\n                        template: html,\r\n                        title: attrs.title,\r\n                        cssClass: 'listPopUpClass',\r\n                        scope: scope,\r\n                        buttons: [{\r\n                            text: $rootScope.getResourceText('LIT_CANCEL_TEXT')\r\n                        }]\r\n                    });\r\n                    popUpData.popUpElement.then(function (res) {\r\n                        if (ionic.Platform.isAndroid() == true)\r\n                            screen.orientation.unlock();\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    };\r\n    return popUpData;\r\n}]);\r\napp.directive('menuToggle', function () {\r\n    return {\r\n        restrict: 'AC',\r\n        link: function link($scope, $element, $attr) {\r\n            $scope.$on('$ionicView.beforeEnter', function (ev, viewData) {\r\n                if (viewData.enableBack === true) {\r\n                    $element.addClass('hide');\r\n                }\r\n            });\r\n        }\r\n    };\r\n}); // Enable slide feature for range/slider control when side menu is active on the view\r\n\r\napp.directive('range', rangeDirective);\r\n\r\nfunction rangeDirective() {\r\n    return {\r\n        restrict: 'C',\r\n        link: function link(scope, element, attr) {\r\n            element.bind('touchstart mousedown', function (event) {\r\n                event.stopPropagation();\r\n                event.stopImmediatePropagation();\r\n            });\r\n        }\r\n    };\r\n}\r\n\r\napp.directive('mailTemplate', [\"EmailUtil\", function (EmailUtil) {\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        controller: ['$scope', '$injector', 'userDetailsManager', 'userApplicationsManager', '$state', '$timeout', 'FileUtil', 'PopupUtil', '$rootScope', function ($scope, $injector, userDetailsManager, userApplicationsManager, $state, $timeout, FileUtil, PopupUtil, $rootScope) {\r\n            $scope.sendEmail = function (personEntity, module) {\r\n                var base64Promise;\r\n                var apViewId = '';\r\n                $scope.userDetail = userDetailsManager.getUserLastLoggedTimeStamp();\r\n\r\n                switch (module) {\r\n                    case 'ActionPlan':\r\n                        var actionPlanMethodFactory = $injector.get('ActionPlanMethodFactory');\r\n                        var personApwManager = $injector.get('personApwManager');\r\n                        var apEntity = actionPlanMethodFactory.refactorAPEntity(personEntity); //Returns Action plan entity, and directly assign this to the wizard scope variable\r\n\r\n                        $scope.personActionPlanWizard = personEntity;\r\n                        $scope.wizard = apEntity;\r\n                        $scope.actionPlanMail = \"templates/mail_templates/actionPlanMail.html\";\r\n                        var moduleEntity = userApplicationsManager.getUserApplicationByText($scope.userDetail.UserId, 'ActionPlan');\r\n                        $scope.translatedModuleText = moduleEntity.TranslatedText;\r\n                        apViewId = '#actionPlanMail_' + personEntity.Id;\r\n                        base64Promise = FileUtil.processFile(personEntity, true);\r\n                        break;\r\n\r\n                    case 'Askade':\r\n                        var askadeMethodFactory = $injector.get('AskadeMethodFactory');\r\n                        var personAskadeFileTypeWizardManager = $injector.get('personAskadeFileTypeWizardManager');\r\n                        var askadeEntity = askadeMethodFactory.refactorAKEntity(personEntity); //Returns Askade entity, and directly assign this to the wizard scope variable\r\n\r\n                        $scope.personAskadeWizard = personEntity;\r\n                        $scope.akWizard = askadeEntity;\r\n                        $scope.askadeMail = \"templates/mail_templates/askadeMail.html\";\r\n                        var moduleEntity = userApplicationsManager.getUserApplicationByText($scope.userDetail.UserId, 'Askade');\r\n                        $scope.translatedModuleText = moduleEntity.TranslatedText;\r\n                        apViewId = '#askadeMail_' + personEntity.Id;\r\n                        base64Promise = FileUtil.processFile(personEntity, true);\r\n                        break;\r\n\r\n                    case 'Questionnaire':\r\n                        var questionnaireMethodFactory = $injector.get('QuestionnaireMethodFactory'); //Returns Questionnaire entity, and directly assign this to the questionnaire scope variable\r\n\r\n                        var questionnaireEntity = questionnaireMethodFactory.refactorQueEntity(personEntity);\r\n                        $scope.pq = personEntity;\r\n                        $scope.questionnaire = questionnaireEntity; // Initiating initial dependency method\r\n\r\n                        questionnaireMethodFactory.setInitialDependency($scope.questionnaire.Groups, personEntity.Answers);\r\n                        $scope.questionnaireMail = \"templates/mail_templates/questionnaireMail.html\"; // Fetching current module's traanslated text.\r\n\r\n                        var moduleEntity = userApplicationsManager.getUserApplicationByText($scope.userDetail.UserId, $scope.questionnaire.ModuleName());\r\n                        $scope.translatedModuleText = moduleEntity.TranslatedText;\r\n                        apViewId = '#questionnaireMail_' + personEntity.Id;\r\n                        var personQuestionnaireManager = $injector.get('personQuestionnaireManager');\r\n                        var base64QuePromise = FileUtil.processFile(personEntity, true);\r\n                        base64QuePromise.then(function (pq) {\r\n                            var htmlBodyData = '';\r\n                            var timePromise = $timeout(function () {\r\n                                var mailEl = angular.element(document.querySelector(apViewId));\r\n                                htmlBodyData = mailEl.html();\r\n                                var sendQueAttachments = [];\r\n                                var pqAnswers = pq.Answers;\r\n\r\n                                for (var i = 0; i < pqAnswers.length; i++) {\r\n                                    var fileName = pqAnswers[i].FileName;\r\n\r\n                                    if (fileName != null) {\r\n                                        var convertedString = pqAnswers[i].FileSourceBase64; // Splitting the generated base64 string\r\n\r\n                                        var base64parts = convertedString.split(','); // Changing the structure of the first part of the string (for the mail client)\r\n\r\n                                        base64parts[0] = \"base64:\" + fileName + \"//\";\r\n                                        var base64 = base64parts.join(\"\");\r\n                                        sendQueAttachments.push(\"\" + base64);\r\n                                    }\r\n                                }\r\n\r\n                                EmailUtil.sendEmail($scope.userDetail.Email, null, null, sendQueAttachments, \"HSEQ Master\", htmlBodyData, true);\r\n                                mailEl.remove();\r\n                                $scope.questionnaireMail = null;\r\n                                $timeout.cancel(timePromise);\r\n                            }, 1500);\r\n                        }, function (inCompletePq) {\r\n                            // Check is performed only to validate if it is a file not found error.\r\n                            if (inCompletePq.message === \"NOT_FOUND_ERR\") {\r\n                                // Showing a confirm popup. On 'Ok' move to inprogress else retain in the current screen\r\n                                var confirmPromise = PopupUtil.confirm($rootScope.getResourceText('LIT_MESSAGE'), $rootScope.getResourceText('MSG_ATTACHMENTS_MISSING'));\r\n                                confirmPromise.then(function (success) {\r\n                                    if (success) {\r\n                                        //Saving the questionnaire as to move to Inprogress section\r\n                                        personQuestionnaireManager.savePersonQuestionniare(inCompletePq.personEntity, false);\r\n                                        $rootScope.$emit(\"refresh\");\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                        break;\r\n\r\n                    default:\r\n                        break;\r\n                }\r\n\r\n                if (base64Promise) {\r\n                    base64Promise.then(function (pAw) {\r\n                        var htmlBodyData = '';\r\n                        setTimeout(function () {\r\n                            var mailEl = angular.element(document.querySelector(apViewId));\r\n                            htmlBodyData = mailEl.html();\r\n                            var sendAttachments = [];\r\n                            var attachments = pAw.Attachments;\r\n\r\n                            for (var i = 0; i < attachments.length; i++) {\r\n                                var fileName = attachments[i].FileName;\r\n\r\n                                if (fileName != null) {\r\n                                    var convertedString = attachments[i].FileSourceBase64; // Splitting the generated base64 string\r\n\r\n                                    var base64parts = convertedString.split(','); // Changing the structure of the first part of the string (for the mail client)\r\n\r\n                                    base64parts[0] = \"base64:\" + fileName + \"//\";\r\n                                    var base64 = base64parts.join(\"\");\r\n                                    sendAttachments.push(\"\" + base64);\r\n                                }\r\n                            }\r\n\r\n                            EmailUtil.sendEmail($scope.userDetail.Email, null, null, sendAttachments, \"HSEQ Master\", htmlBodyData, true); // Removing the rendered view after email activity is called\r\n\r\n                            mailEl.remove(); // Re-initilizing the variable to null;\r\n\r\n                            $scope.askadeMail = null;\r\n                            $scope.actionPlanMail = null;\r\n                        }, 1500);\r\n                    }, function (inCompletePersonA) {\r\n                        // Check is performed only to validate if it is a file not found error.\r\n                        if (inCompletePersonA.message === \"NOT_FOUND_ERR\") {\r\n                            // Showing a confirm popup. On 'Ok' move to inprogress else retain in the current screen\r\n                            var confirmPromise = PopupUtil.confirm($rootScope.getResourceText('LIT_MESSAGE'), $rootScope.getResourceText('MSG_ATTACHMENTS_MISSING'));\r\n                            confirmPromise.then(function (success) {\r\n                                if (success) {\r\n                                    if (module === 'Askade') {\r\n                                        //Saving the Askade wizard as to move to Inprogress section\r\n                                        personAskadeFileTypeWizardManager.saveAkWizard(inCompletePersonA.personEntity, false);\r\n                                        $rootScope.$emit(\"refresh\");\r\n                                    } else if (module === 'ActionPlan') {\r\n                                        //Saving the Action plan wizard as to move to Inprogress section\r\n                                        personApwManager.savePersonApw(inCompletePersonApw.personEntity, false);\r\n                                        $rootScope.$emit(\"refresh\");\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            };\r\n        }]\r\n    };\r\n}]);\r\napp.directive('pdfTemplate', [\"PdfUtil\", function (PdfUtil) {\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        link: function link(scope, element, attrs) {\r\n            scope.isPdfEmail = attrs.isPdfEmail;\r\n        },\r\n        controller: ['$scope', '$injector', 'customersManager', '$state', '$timeout', 'FileUtil', 'PopupUtil', '$rootScope', 'LoaderService', '$q', function ($scope, $injector, customersManager, $state, $timeout, FileUtil, PopupUtil, $rootScope, LoaderService, $q) {\r\n            $scope.genPdf = function (personEntity, module) {\r\n                LoaderService.show();\r\n                var base64Promise;\r\n                var customerName = customersManager.getCustomers().CustomerName;\r\n\r\n                switch (module) {\r\n                    case 'ActionPlan':\r\n                        var actionPlanMethodFactory = $injector.get('ActionPlanMethodFactory');\r\n                        var personApwManager = $injector.get('personApwManager'); // Initialysing an array to add the promises used for attachments in multi task and normal action plan\r\n\r\n                        var promisesAp = [];\r\n                        var apEntity = actionPlanMethodFactory.refactorAPEntity(personEntity); //Returns Action Plan entity, and directly assign this to the wizard scope variable\r\n\r\n                        $scope.personActionPlanWizard = personEntity;\r\n                        $scope.wizard = apEntity;\r\n                        $scope.multiTaskSol = personEntity.MultiTaskSolutions;\r\n                        $scope.actionPlanPdf = \"templates/pdf_templates/actionPlan/actionPlanPdf.html\";\r\n                        base64Promise = FileUtil.processFile(personEntity, true);\r\n                        promisesAp.push(base64Promise);\r\n                        var mtAttachmentsProm = FileUtil.processFileForMultiTask(personEntity.MultiTaskSolutions, true);\r\n                        promisesAp.push(mtAttachmentsProm);\r\n                        $q.all(promisesAp).then(function (data) {\r\n                            // Here first array holds attachments of plan of action as it was added first.\r\n                            var pApw = data[0]; // Second position has multi task attachments\r\n\r\n                            pApw.MultiTaskSolutions = data[1];\r\n                            setTimeout(function () {\r\n                                var promise = PdfUtil.genPDFDocumentForPlanOfAction(pApw, $scope.wizard, customerName, $scope.isPdfEmail);\r\n                                promise.then(function () {\r\n                                    var apPdfId = angular.element(document.querySelector('#actionPlanPdf_' + pApw.Id));\r\n                                    apPdfId.remove();\r\n                                    $scope.actionPlanPdf = null;\r\n                                    LoaderService.hide();\r\n                                }, function () {\r\n                                    LoaderService.hide();\r\n                                    console.log('PDF generation Fail');\r\n                                });\r\n                            }, 500);\r\n                        }, function (inCompletePersonApw) {\r\n                            LoaderService.hide(); // Check is performed only to validate if it is a file not found error.\r\n\r\n                            if (inCompletePersonApw.message === \"NOT_FOUND_ERR\") {\r\n                                // Showing a confirm popup. On 'Ok' move to inprogress else retain in the current screen\r\n                                var confirmPromise = PopupUtil.confirm($rootScope.getResourceText('LIT_MESSAGE'), $rootScope.getResourceText('MSG_ATTACHMENTS_MISSING'));\r\n                                confirmPromise.then(function (success) {\r\n                                    if (success) {\r\n                                        //Saving the questionnaire as to move to Inprogress section\r\n                                        personApwManager.savePersonApw(inCompletePersonApw.personEntity, false);\r\n                                        $rootScope.$emit(\"refresh\");\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                        break;\r\n\r\n                    case 'Askade':\r\n                        var askadeMethodFactory = $injector.get('AskadeMethodFactory');\r\n                        var personAskadeFileTypeWizardManager = $injector.get('personAskadeFileTypeWizardManager');\r\n                        var askadeEntity = askadeMethodFactory.refactorAKEntity(personEntity); //Returns Askade entity, and directly assign this to the wizard scope variable\r\n\r\n                        $scope.personAskadeWizard = personEntity;\r\n                        $scope.akWizard = askadeEntity;\r\n                        $scope.askadePdf = \"templates/pdf_templates/askade/askadePdf.html\";\r\n                        base64Promise = FileUtil.processFile(personEntity, true);\r\n                        base64Promise.then(function (pAkw) {\r\n                            setTimeout(function () {\r\n                                var promise = PdfUtil.genPdfForAskade(pAkw, $scope.akWizard, customerName, $scope.isPdfEmail);\r\n                                promise.then(function () {\r\n                                    var apPdfId = angular.element(document.querySelector('#askadePdf_' + pAkw.Id));\r\n                                    apPdfId.remove();\r\n                                    $scope.askadePdf = null;\r\n                                    LoaderService.hide();\r\n                                }, function () {\r\n                                    console.log('PDF generation Fail');\r\n                                    LoaderService.hide();\r\n                                });\r\n                            }, 500);\r\n                        }, function (inCompletePersonAkw) {\r\n                            LoaderService.hide(); // Check is performed only to validate if it is a file not found error.\r\n\r\n                            if (inCompletePersonAkw.message === \"NOT_FOUND_ERR\") {\r\n                                // Showing a confirm popup. On 'Ok' move to inprogress else retain in the current screen\r\n                                var confirmPromise = PopupUtil.confirm($rootScope.getResourceText('LIT_MESSAGE'), $rootScope.getResourceText('MSG_ATTACHMENTS_MISSING'));\r\n                                confirmPromise.then(function (success) {\r\n                                    if (success) {\r\n                                        personAskadeFileTypeWizardManager.saveAkWizard(inCompletePersonA.personEntity, false);\r\n                                        $rootScope.$emit(\"refresh\");\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                        break;\r\n\r\n                    case 'Questionnaire':\r\n                        var questionnaireMethodFactory = $injector.get('QuestionnaireMethodFactory'); //Returns Questionnaire entity, and directly assign this to the questionnaire scope variable\r\n\r\n                        var questionnaireEntity = questionnaireMethodFactory.refactorQueEntity(personEntity);\r\n                        $scope.pq = personEntity;\r\n                        $scope.questionnaire = questionnaireEntity; // Initiating initial dependency method\r\n\r\n                        questionnaireMethodFactory.setInitialDependency($scope.questionnaire.Groups, personEntity.Answers);\r\n                        $scope.questionnairePdf = \"templates/pdf_templates/questionnaire/questionnairePdf.html\";\r\n                        var personQuestionnaireManager = $injector.get('personQuestionnaireManager');\r\n                        var base64QuePromise = FileUtil.processFile(personEntity, true);\r\n                        base64QuePromise.then(function (pq) {\r\n                            var timePromise = $timeout(function () {\r\n                                var promise = PdfUtil.getPDFDocumentForQuestionnaire(pq, $scope.questionnaire, customerName, $scope.isPdfEmail);\r\n                                promise.then(function () {\r\n                                    var apPdfId = angular.element(document.querySelector('#questionnairePdf_' + pq.Id));\r\n                                    apPdfId.remove();\r\n                                    $scope.questionnairePdf = null;\r\n                                    LoaderService.hide();\r\n                                }, function () {\r\n                                    LoaderService.hide();\r\n                                    console.log('PDF generation Fail');\r\n                                });\r\n                                $timeout.cancel(timePromise);\r\n                            }, 1000);\r\n                        }, function (inCompletePq) {\r\n                            LoaderService.hide(); // Check is performed only to validate if it is a file not found error.\r\n\r\n                            if (inCompletePq.message === \"NOT_FOUND_ERR\") {\r\n                                // Showing a confirm popup. On 'Ok' move to inprogress else retain in the current screen\r\n                                var confirmPromise = PopupUtil.confirm($rootScope.getResourceText('LIT_MESSAGE'), $rootScope.getResourceText('MSG_ATTACHMENTS_MISSING'));\r\n                                confirmPromise.then(function (success) {\r\n                                    if (success) {\r\n                                        //Saving the questionnaire as to move to Inprogress section\r\n                                        personQuestionnaireManager.savePersonQuestionniare(inCompletePq.personEntity, false);\r\n                                        $rootScope.$emit(\"refresh\");\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                        break;\r\n\r\n                    default:\r\n                        break;\r\n                }\r\n            };\r\n        }]\r\n    };\r\n}]);\r\napp.directive('jSignature', [\"$rootScope\", \"$timeout\", function ($rootScope, $timeout) {\r\n    return {\r\n        restrict: 'E',\r\n        template: '<div id=\"signature\">' + '<div id=\"jSignature\" style=\"height: 250px;\"></div>' + '<div class=\"signBtnCenter\">' + '<button class=\"col col-20 button button-small button-clear button-dark signPaddingRgt\" on-tap=\"reset()\">{{clear}}</button>' + '<button id=\"done\" class=\"col col-20 button button-small button-clear button-dark signPaddingRgt\" on-tap=\"getSignedData()\">{{done}}</button>' + '</div' + '</div>',\r\n        scope: {\r\n            defaultsig: '=',\r\n            width: '@',\r\n            height: '@',\r\n            color: '@',\r\n            bgColor: '@',\r\n            lineWidth: '@',\r\n            cssclass: '@',\r\n            save: '=',\r\n            instance: '=',\r\n            isDone: '=',\r\n            setFn: '&'\r\n        },\r\n        link: function link($scope, $element, attr, modelCtrl) {\r\n            $scope.initialized = false; // Initalize default setting values to JSignature control\r\n\r\n            var options = {\r\n                width: $scope.width,\r\n                height: $scope.height,\r\n                color: $scope.color,\r\n                'background-color': $scope.bgColor,\r\n                lineWidth: 1,\r\n                'decor-color': 'transparent',\r\n                cssclass: $scope.cssclass\r\n            };\r\n\r\n            $scope.initialize = function () {\r\n                if (!$scope.initialized) {\r\n                    // Call resize canvas method to get the proper height and width which is suitable to real device.\r\n                    $timeout(function () {\r\n                        var details = resizeCanvas(); // Subrtacting 43 to adjust the width and center align\r\n\r\n                        options.width = details.width - 43;\r\n                        options.height = details.height; // Initialize JSignature control\r\n\r\n                        $element.find('#jSignature').jSignature(options);\r\n                        $element.find('.jSignature')[0].getContext(\"2d\").scale(details.ratio, details.ratio); // change non-opaque pixels to white and for the stroke getting thicker issue\r\n\r\n                        var ctx = $element.find('.jSignature')[0].getContext(\"2d\");\r\n                        var imgData = ctx.getImageData(0, 0, options.width, options.height);\r\n                        var data = imgData.data;\r\n\r\n                        for (var i = 0; i < data.length; i += 4) {\r\n                            if (data[i + 3] < 255) {\r\n                                data[i] = 255;\r\n                                data[i + 1] = 255;\r\n                                data[i + 2] = 255;\r\n                                data[i + 3] = 255;\r\n                            }\r\n                        }\r\n\r\n                        ctx.putImageData(imgData, 0, 0); // Once completed change the boolean value to true\r\n\r\n                        $scope.initialized = true;\r\n                    }, 500);\r\n                }\r\n            };\r\n\r\n            function resizeCanvas() {\r\n                var details = {}; // The first parameter should be based on window.orientaion(Assigning it to 0 to handle Landscape mode signature)\r\n\r\n                var ratio = Math.max(0 || 1, 1);\r\n\r\n                if (ratio === 1) {\r\n                    details.width = options.width * ratio;\r\n                    details.height = options.height * ratio;\r\n                    details.ratio = ratio;\r\n                }\r\n\r\n                return details;\r\n            } // Fetch Label values for the control\r\n\r\n\r\n            $scope.clear = $rootScope.getResourceText('LIT_CLEAR');\r\n            $scope.done = $rootScope.getResourceText('LIT_DONE'); // Get the instance of the object which can be passed to the controller for easy save or reset values in Data models\r\n\r\n            var instance = attr.instance;\r\n            var elemScope = $element.scope();\r\n            var instanceVal = elemScope[instance];\r\n            var personInstance = attr.isDone;\r\n            var personInstanceVal = elemScope[personInstance];\r\n            var isDoneSignVal = personInstanceVal.IsDoneSign;\r\n            var isButtonShown = personInstanceVal.ShowButton;\r\n\r\n            if (isButtonShown == false) {\r\n                var doneButton = $element.find('#done');\r\n                doneButton.addClass('hide');\r\n            }\r\n\r\n            if (isDoneSignVal) {\r\n                $timeout(function () {\r\n                    var canvasElement = $element.find('.jSignature');\r\n                    canvasElement.addClass('disableElement');\r\n                }, 0);\r\n            }\r\n\r\n            $scope.reset = function () {\r\n                $element.jSignature('reset'); // Saving a null value so as to handle the issue where stroke was getting thicker on edit or while navigating back to the group\r\n\r\n                $scope.save(null, instanceVal);\r\n                $scope.editSign();\r\n            };\r\n\r\n            $scope.editSign = function () {\r\n                // To re-enable the blocked UI element this method can be called\r\n                var canvasElement = $element.find('.jSignature');\r\n                var hasClass = canvasElement.hasClass('disableElement');\r\n\r\n                if (hasClass) {\r\n                    canvasElement.removeClass('disableElement');\r\n                }\r\n            };\r\n\r\n            $scope.getSignedData = function () {\r\n                // Check if canvas is empty or not\r\n                if ($element.jSignature('getData', 'native').length !== 0) {\r\n                    // Get the signed data from the canvas\r\n                    var pngImg = $element.jSignature('getData');\r\n                    var canvasElement = $element.find('.jSignature'); // Check if the element has a class 'disableElement', if so then dont save the data as UI is blocked\r\n\r\n                    var hasClass = canvasElement.hasClass('disableElement');\r\n\r\n                    if (!hasClass) {\r\n                        // Before saving the data add a 'disableElement' class, to block UI of the canvas from further editing\r\n                        // and not to disturb the signature while scrolling\r\n                        canvasElement.addClass('disableElement'); // Save the value to data model, by calling the function in respective controller\r\n\r\n                        $scope.save(pngImg, instanceVal);\r\n                    }\r\n                }\r\n            };\r\n\r\n            $scope.setFn({\r\n                theDirFn: $scope.getSignedData,\r\n                queInst: instanceVal\r\n            });\r\n\r\n            $scope.setData = function (sig) {\r\n                var datapair = null;\r\n                if (sig) {\r\n                    datapair = sig;\r\n                } // Set the previously saved signed while editing the questionnaire/case\r\n\r\n                $element.jSignature('setData', datapair);\r\n            };\r\n\r\n            $scope.initialize();\r\n            $scope.$watch('defaultsig', function (sig) {\r\n                if (sig) {\r\n                    $timeout(function () {\r\n                        // Check if canvas is empty or not (Also to handle stroke getting thicker issue)\r\n                        // Commented below line to handle an issue while working on signature save on Done/Submit button\r\n                        //if ($element.jSignature('getData', 'native').length === 0) {\r\n                        $scope.setData(sig); //}\r\n\r\n                        return;\r\n                    }, 700);\r\n                }\r\n            });\r\n        }\r\n    };\r\n}]);\r\napp.directive(\"bodySelector\", [\r\n    \"$rootScope\",\r\n    \"ionicToast\",\r\n    \"PopupUtil\",\r\n    \"$ionicPlatform\",\r\n    \"$cordovaNetwork\",\r\n    \"LocalStorageHelper\",\r\n    \"dropdownValueManager\",\r\n    \"CommonMethodsFactory\",\r\n    \"DeviceUtil\",\r\n    function (\r\n        $rootScope,\r\n        ionicToast,\r\n        PopupUtil,\r\n        $ionicPlatform,\r\n        $cordovaNetwork,\r\n        LocalStorageHelper,\r\n        dropdownValueManager,\r\n        CommonMethodsFactory,\r\n        DeviceUtil\r\n    ) {\r\n        return {\r\n            restrict: \"AE\",\r\n            templateUrl: \"templates/bodyGuide.html\",\r\n            link: function link(scope, element, attr, modelCtrl) {\r\n                scope.visualBodyPart = function () {\r\n                    var virtualEle = document.querySelector(\"body-selector\");\r\n                    virtualEle.style.display = \"none\";\r\n                    var manualEle = document.querySelector(\"visual-selector\");\r\n                    manualEle.style.display = \"block\";\r\n                    //Handle body parts image height for different screens\r\n                    var popupBodyEle = document.querySelector(\".popup-body\");\r\n                    var bodyImageEle = document.querySelector(\".bodyParts\");\r\n                    if (screen.width <= 370) {\r\n                        bodyImageEle.style.height = popupBodyEle.clientHeight - 10 + \"px\";\r\n                    }\r\n                    else if (screen.width > 370) {\r\n                        bodyImageEle.style.height = popupBodyEle.clientHeight - 30 + \"px\";\r\n                    }\r\n                    var visualSelectedText =\r\n                        DeviceUtil.getKeyValueWithSharedPreferences(\"visualPartSaved\");\r\n                    visualSelectedText.then(function (data) {\r\n                        if (data === null) {\r\n                            $rootScope.$emit(\"backSubButton\", {\r\n                                data: \"defaultButton\",\r\n                            });\r\n                        } else {\r\n                            $rootScope.$emit(\"backSubButton\", {\r\n                                data: \"visualButtons\",\r\n                            });\r\n                            if (\r\n                                data.Code == \"A12\" ||\r\n                                data.Code == \"A11\" ||\r\n                                data.Code == \"H11\" ||\r\n                                data.Code == \"H12\" ||\r\n                                data.Code == \"F12\" ||\r\n                                data.Code == \"F13\" ||\r\n                                data.Code == \"R8\" ||\r\n                                data.Code == \"L11\" ||\r\n                                data.Code == \"L12\" ||\r\n                                data.Code == \"C0\" ||\r\n                                data.Code == \"R0\" ||\r\n                                data.Code == \"O0\" ||\r\n                                data.Code == \"O1\" ||\r\n                                data.Code == \"C1\" ||\r\n                                data.Code == \"C3\" ||\r\n                                data.Code == \"C4\" ||\r\n                                data.Code == \"H1\" ||\r\n                                data.Code == \"N2\"\r\n                            ) {\r\n                                angular.element(data.SelectedId).addClass(\"subSelected\");\r\n                            } else {\r\n                                angular.element(data.SelectedId).addClass(\"higlightCircle\");\r\n                            }\r\n                        }\r\n                    });\r\n                };\r\n\r\n                $rootScope.$on(\"BackVisualTapped\", function (event) {\r\n                    $rootScope.defaultParts();\r\n                    $rootScope.$emit(\"backSubButton\", {\r\n                        data: \"defaultButton\",\r\n                    });\r\n                });\r\n            },\r\n        };\r\n    },\r\n]);\r\n\r\napp.directive(\"visualSelector\", [\r\n    \"$rootScope\",\r\n    \"ionicToast\",\r\n    \"PopupUtil\",\r\n    \"DeviceUtil\",\r\n    \"AskadeMethodFactory\",\r\n    \"$ionicPlatform\",\r\n    \"$cordovaNetwork\",\r\n    \"LocalStorageHelper\",\r\n    \"dropdownValueManager\",\r\n    \"CommonMethodsFactory\",\r\n    function (\r\n        $rootScope,\r\n        ionicToast,\r\n        PopupUtil,\r\n        DeviceUtil,\r\n        AskadeMethodFactory,\r\n        $ionicPlatform,\r\n        $cordovaNetwork,\r\n        LocalStorageHelper,\r\n        dropdownValueManager,\r\n        CommonMethodsFactory\r\n    ) {\r\n        return {\r\n            restrict: \"AE\",\r\n            templateUrl: \"templates/bodySelectorPopUp.html\",\r\n            link: function link(scope, element, attr, modelCtrl) {\r\n                //when the visual select loads if the value is selected before its shown if not setDefaultProm fails\r\n                var setDefaultProm =\r\n                    DeviceUtil.getKeyValueWithSharedPreferences(\"visualPart\");\r\n                setDefaultProm.then(function (data) {\r\n                    if (data != null && easyList.length != 0) {\r\n                        scope.easyDropDown = easyDropDownFunction(data);\r\n                    }\r\n                });\r\n\r\n                var easyList = [];\r\n                scope.partsType;\r\n\r\n                $rootScope.$on(\"bodyPartsScope\", function (obj, val) {\r\n                    easyList.push(val.data);\r\n                    if (easyList[0].dropDownTypeVal === \"34\") {\r\n                        scope.partsType = true;\r\n                    } else {\r\n                        scope.partsType = false;\r\n                    }\r\n                    var dropDownSec = null;\r\n                    scope.easyDropDown = easyDropDownFunction(dropDownSec);\r\n                });\r\n\r\n                $rootScope.defaultParts = function () {\r\n                    scope.Image = scope.Images[0];\r\n                    var dropDownSec = null;\r\n                    scope.easyDropDown = easyDropDownFunction(dropDownSec);\r\n                };\r\n\r\n                $rootScope.getClass = function (parts, item) {\r\n                    var isIpad = ionic.Platform.isIPad();\r\n                    var isTablet = ionic.Platform.isAndroid() && screen.width > 600;\r\n                    var className = null;\r\n                    if (parts) {\r\n                        if (isTablet || isIpad) {\r\n                            className = item.Code + \"tab\";\r\n                        } else {\r\n                            className = item.Code;\r\n                        }\r\n                    } else {\r\n                        if (isIpad || isTablet) {\r\n                            className = item.Code + \"subTab\";\r\n                        } else {\r\n                            className = item.Code + \"sub\";\r\n                        }\r\n                    }\r\n\r\n                    if (\r\n                        item.Code == \"A12\" ||\r\n                        item.Code == \"A11\" ||\r\n                        item.Code == \"H11\" ||\r\n                        item.Code == \"H12\" ||\r\n                        item.Code == \"F12\" ||\r\n                        item.Code == \"F13\" ||\r\n                        item.Code == \"R8\" ||\r\n                        item.Code == \"L11\" ||\r\n                        item.Code == \"L12\" ||\r\n                        item.Code == \"C0\" ||\r\n                        item.Code == \"R0\" ||\r\n                        item.Code == \"O0\" ||\r\n                        item.Code == \"O1\" ||\r\n                        item.Code == \"C1\" ||\r\n                        item.Code == \"C3\" ||\r\n                        item.Code == \"C4\" ||\r\n                        item.Code == \"H1\" ||\r\n                        item.Code == \"N2\"\r\n                    ) {\r\n                        return className;\r\n                    } else {\r\n                        return \"circleSpot \" + className;\r\n                    }\r\n                };\r\n\r\n                scope.Images = [\r\n                    { Id: 1, Part: \"body\", Photo: \"images/BodyParts/FullBody.png\" },\r\n                    { Id: 2, Part: \"head\", Photo: \"images/BodyParts/head.png\" },\r\n                    { Id: 3, Part: \"front\", Photo: \"images/BodyParts/FrontBack.png\" },\r\n                    { Id: 4, Part: \"hand\", Photo: \"images/BodyParts/hand.png\" },\r\n                    { Id: 5, Part: \"leg\", Photo: \"images/BodyParts/leg.png\" },\r\n                ];\r\n\r\n                scope.Image = scope.Images[0];\r\n\r\n                scope.showSection = function (section, event) {\r\n                    if (\r\n                        section.Code != \"A12\" &&\r\n                        section.Code != \"A11\" &&\r\n                        section.Code != \"H11\" &&\r\n                        section.Code != \"H12\" &&\r\n                        section.Code != \"F12\" &&\r\n                        section.Code != \"F13\" &&\r\n                        section.Code != \"R8\" &&\r\n                        section.Code != \"L11\" &&\r\n                        section.Code != \"L12\" &&\r\n                        section.Code != \"C0\" &&\r\n                        section.Code != \"R0\" &&\r\n                        section.Code != \"O0\" &&\r\n                        section.Code != \"O1\" &&\r\n                        section.Code != \"C1\" &&\r\n                        section.Code != \"C3\" &&\r\n                        section.Code != \"C4\" &&\r\n                        section.Code != \"H1\" &&\r\n                        section.Code != \"N2\"\r\n                    ) {\r\n                        ionicToast.showDefault(section.Text);\r\n                    }\r\n                    if (section.IsSelectable === true) {\r\n                        heighlightSelected(section, event);\r\n                    } else {\r\n                        scope.easyDropDown = easyDropDownFunction(section);\r\n                    }\r\n                };\r\n\r\n                scope.getText = function (item) {\r\n                    if (\r\n                        item.Code == \"A12\" ||\r\n                        item.Code == \"A11\" ||\r\n                        item.Code == \"H11\" ||\r\n                        item.Code == \"H12\" ||\r\n                        item.Code == \"F12\" ||\r\n                        item.Code == \"F13\" ||\r\n                        item.Code == \"R8\" ||\r\n                        item.Code == \"L11\" ||\r\n                        item.Code == \"L12\" ||\r\n                        item.Code == \"C0\" ||\r\n                        item.Code == \"R0\" ||\r\n                        item.Code == \"O0\" ||\r\n                        item.Code == \"O1\" ||\r\n                        item.Code == \"C1\" ||\r\n                        item.Code == \"C3\" ||\r\n                        item.Code == \"C4\" ||\r\n                        item.Code == \"H1\" ||\r\n                        item.Code == \"N2\"\r\n                    ) {\r\n                        return item.Text;\r\n                    }\r\n                };\r\n\r\n                function heighlightSelected(sec, e) {\r\n                    var bpHeighlightObj = document.querySelectorAll(\".higlightCircle\");\r\n                    var selectedObj = document.querySelectorAll(\".subSelected\");\r\n                    clearClassList(bpHeighlightObj, \"higlightCircle\");\r\n                    clearClassList(selectedObj, \"subSelected\");\r\n                    var elementClass = e.srcElement.className;\r\n                    var partId = elementClass.split(\" \").splice(-1);\r\n                    var selectedTextValue = \".\" + partId;\r\n                    if (\r\n                        partId[0].includes(\"A12\") ||\r\n                        partId[0].includes(\"A11\") ||\r\n                        partId[0].includes(\"H11\") ||\r\n                        partId[0].includes(\"H12\") ||\r\n                        partId[0].includes(\"F12\") ||\r\n                        partId[0].includes(\"F13\") ||\r\n                        partId[0].includes(\"R8\") ||\r\n                        partId[0].includes(\"L11\") ||\r\n                        partId[0].includes(\"L12\") ||\r\n                        partId[0].includes(\"C0\") ||\r\n                        partId[0].includes(\"R0\") ||\r\n                        partId[0].includes(\"O0\") ||\r\n                        partId[0].includes(\"O1\") ||\r\n                        partId[0].includes(\"C1\") ||\r\n                        partId[0].includes(\"C3\") ||\r\n                        partId[0].includes(\"C4\") ||\r\n                        partId[0].includes(\"H1\") ||\r\n                        partId[0].includes(\"N2\")\r\n                    ) {\r\n                        angular.element(selectedTextValue).addClass(\"subSelected\");\r\n                    } else {\r\n                        angular.element(selectedTextValue).addClass(\"higlightCircle\");\r\n                    }\r\n\r\n                    sec.SelectedId = selectedTextValue;\r\n\r\n                    var setProm = DeviceUtil.setKeyValueWithSharedPreferences(\r\n                        \"visualPart\",\r\n                        sec\r\n                    );\r\n                    setProm.then(function () { });\r\n                }\r\n\r\n                function clearClassList(elements, className) {\r\n                    if (elements.length > 0) {\r\n                        for (var i = 0; i < elements.length; i++) {\r\n                            if (className == \"higlightCircle\") {\r\n                                elements[i].classList.remove(\"higlightCircle\");\r\n                            } else {\r\n                                elements[i].classList.remove(\"subSelected\");\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n                function easyDropDownFunction(section) {\r\n                    var bpList = [];\r\n                    var bpDropDownList = easyList[0].columnsListSource;\r\n                    if (section === null) {\r\n                        for (var i = 0; i < bpDropDownList.length; i++) {\r\n                            if (bpDropDownList[i].ParentCode === \"\") {\r\n                                bpList.push(bpDropDownList[i]);\r\n                            }\r\n                        }\r\n                        return bpList;\r\n                    } else {\r\n                        if (section.ParentCode === \"\" && section.IsSelectable === false) {\r\n                            var easyCode = section.Code;\r\n                            for (var i = 0; i < bpDropDownList.length; i++) {\r\n                                if (easyCode === bpDropDownList[i].ParentCode) {\r\n                                    bpList.push(bpDropDownList[i]);\r\n                                }\r\n                            }\r\n                            showImageSection(section.Code);\r\n                            $rootScope.$emit(\"backSubButton\", {\r\n                                data: \"visualButtons\",\r\n                            });\r\n                            return bpList;\r\n                        } else if (section.IsSelectable === true) {\r\n                            var easyParentCode = section.ParentCode;\r\n                            for (var i = 0; i < bpDropDownList.length; i++) {\r\n                                if (easyParentCode === bpDropDownList[i].ParentCode) {\r\n                                    bpList.push(bpDropDownList[i]);\r\n                                }\r\n                            }\r\n                            showImageSection(section.ParentCode);\r\n                            return bpList;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function showImageSection(Code) {\r\n                    switch (Code) {\r\n                        case \"H0\":\r\n                            scope.Image = scope.Images[1];\r\n                            break;\r\n                        case \"N0\":\r\n                            scope.Image = scope.Images[2];\r\n                            break;\r\n                        case \"R0\":\r\n                            scope.Image = scope.Images[2];\r\n                            break;\r\n                        case \"F0\":\r\n                            scope.Image = scope.Images[2];\r\n                            break;\r\n                        case \"A0\":\r\n                            scope.Image = scope.Images[3];\r\n                            break;\r\n                        case \"L0\":\r\n                            scope.Image = scope.Images[4];\r\n                            break;\r\n                        case \"C0\":\r\n                            scope.Image = scope.Images[0];\r\n                            break;\r\n                    }\r\n                }\r\n            },\r\n        };\r\n    },\r\n]);\r\n\r\napp.directive('bodyPopup', [\"$ionicPopup\", \"$rootScope\", \"DeviceUtil\", function ($ionicPopup, $rootScope, DeviceUtil) {\r\n    var popUpData = {\r\n        restrict: 'E',\r\n        tagName: 'button',\r\n        transclude: true,\r\n        transElement: null,\r\n        popUpElement: null,\r\n        require: 'ngModel',\r\n        link: {\r\n            post: function post(scope, el, att, ctrl, transclude) {\r\n                var selectedText = att.displayText;\r\n                var isAssignIdText = att.assignIdText;\r\n                var src = scope.code;\r\n                scope.$on('Completed', function (obj, val) {\r\n                    selectedText = val.data;\r\n\r\n                    if (isAssignIdText != null) {\r\n                        if (ctrl.$viewValue != selectedText) {\r\n                            ctrl.$setViewValue(selectedText);\r\n                        }\r\n                    }\r\n\r\n                    el.html(selectedText);\r\n                    popUpData.popUpElement.close();\r\n                });\r\n                //if selected text is empty the body selector works normally if there is a selected text then the selected text is showed in the visual select\r\n                if (selectedText === \"\") {\r\n                    DeviceUtil.setKeyValueWithSharedPreferences(\"visualPart\", null);\r\n                } else {\r\n                    src.SelectedId = \".\" + src.Code;\r\n                    DeviceUtil.setKeyValueWithSharedPreferences(\"visualPart\", src);\r\n                }\r\n                el.html(selectedText);\r\n            },\r\n            pre: function pre(scope, el, attrs, ctrl, transclude) {\r\n                popUpData.transElement = transclude();\r\n                el.bind('tap', function () {\r\n                    $rootScope.$on(\"backSubButton\", function (obj, val) {\r\n                        var backButtonObj = document.getElementsByClassName(\"backSub\");\r\n                        var visualButObj = document.getElementsByClassName(\"cancelBut\");\r\n                        var visualOkButObj = document.getElementsByClassName(\"okButton\");\r\n                        var manualBackObj = document.getElementsByClassName(\"manualBack\");\r\n                        var visualBackObj = document.getElementsByClassName(\"visualBack\");\r\n                        if (val.data === true) {\r\n                            for (var i = 0; i < backButtonObj.length; i++) {\r\n                                backButtonObj[i].classList.remove(\"backSubButton\");\r\n                                backButtonObj[i].classList.add(\"backSubBut\");\r\n                            }\r\n                            for (var j = 0; j < visualBackObj.length; j++) {\r\n                                visualBackObj[j].classList.remove(\"backSubBut\");\r\n                                visualBackObj[j].style.display = \"none\";\r\n                            }\r\n                        }\r\n                        else if (val.data === \"visualButtons\") {\r\n                            for (i = 0; i < visualButObj.length; i++) {\r\n                                visualButObj[i].style.display = \"none\";\r\n                            }\r\n                            for (j = 0; j < backButtonObj.length; j++) {\r\n                                backButtonObj[j].classList.remove(\"backSubButton\");\r\n                                backButtonObj[j].classList.add(\"backSubBut\");\r\n                            }\r\n                            for (var k = 0; k < visualOkButObj.length; k++) {\r\n                                visualOkButObj[k].classList.remove(\"backSubButton\");\r\n                                visualOkButObj[k].style.display = \"block\";\r\n                            }\r\n                            for (var l = 0; l < manualBackObj.length; l++) {\r\n                                manualBackObj[l].style.display = \"none\";\r\n                                manualBackObj[l].classList.remove(\"backSubBut\");\r\n                            }\r\n                        }\r\n                        else if (val.data === \"defaultButton\") {\r\n                            for (i = 0; i < manualBackObj.length; i++) {\r\n                                manualBackObj[i].style.display = \"none\";\r\n                            }\r\n                            for (j = 0; j < backButtonObj.length; j++) {\r\n                                backButtonObj[j].classList.remove(\"backSubBut\");\r\n                                backButtonObj[j].classList.add(\"backSubButton\");\r\n                            }\r\n                            for (k = 0; k < visualButObj.length; k++) {\r\n                                visualButObj[k].style.display = \"block\";\r\n                            }\r\n                            for (l = 0; l < visualOkButObj.length; l++) {\r\n                                visualOkButObj[l].style.display = \"none\";\r\n                            }\r\n                        }\r\n                        else {\r\n                            for (i = 0; i < backButtonObj.length; i++) {\r\n                                backButtonObj[i].classList.remove(\"backSubBut\");\r\n                                backButtonObj[i].classList.add(\"backSubButton\");\r\n                            }\r\n                        }\r\n                    });\r\n                    var html = popUpData.transElement;\r\n                    popUpData.popUpElement = $ionicPopup.show({\r\n                        template: html,\r\n                        title: attrs.title,\r\n                        cssClass: 'listPopUpClass',\r\n                        scope: scope,\r\n                        buttons: [{\r\n                            text: $rootScope.getResourceText('LIT_BACK'),\r\n                            type: \"backSub backSubButton visualBack\",\r\n                            onTap: function onTap(e) {\r\n                                $rootScope.$emit('BackVisualTapped');\r\n                                e.preventDefault();\r\n                            }\r\n                        }, {\r\n                            text: $rootScope.getResourceText('LIT_BACK'),\r\n                            type: \"backSub backSubButton manualBack\",\r\n                            onTap: function onTap(e) {\r\n                                $rootScope.$emit('BackTapped');\r\n                                e.preventDefault();\r\n                            }\r\n                        }, {\r\n                            type: \"cancelBut\",\r\n                            text: $rootScope.getResourceText('LIT_CANCEL_TEXT'),\r\n                        }, {\r\n                            type: \"backSubButton okButton\",\r\n                            text: $rootScope.getResourceText('LIT_OK'),\r\n                            onTap: function onTap(e) {\r\n                                var getVisualProm = DeviceUtil.getKeyValueWithSharedPreferences('visualPart');\r\n                                getVisualProm.then(function (data) {\r\n                                    if (data !== null) {\r\n                                        var setProm = DeviceUtil.setKeyValueWithSharedPreferences(\r\n                                            \"visualPartSaved\",\r\n                                            data\r\n                                        );\r\n                                        $rootScope.saveVisualParts(data);\r\n                                    }\r\n                                });\r\n                            }\r\n                        }]\r\n                    });\r\n                    popUpData.popUpElement.then(function (res) {\r\n                        if (ionic.Platform.isAndroid() == true)\r\n                            screen.orientation.unlock();\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    };\r\n    return popUpData;\r\n}]);\r\napp.directive('lazyBodyDropdown', [\"$rootScope\", \"ionicToast\", \"$ionicPlatform\", \"$cordovaNetwork\", \"LocalStorageHelper\", \"dropdownValueManager\", \"CommonMethodsFactory\", \"$ionicScrollDelegate\", \"LoaderService\", \"DeviceUtil\", function ($rootScope, ionicToast, $ionicPlatform, $cordovaNetwork, LocalStorageHelper, dropdownValueManager, CommonMethodsFactory, $ionicScrollDelegate, LoaderService, DeviceUtil) {\r\n    return {\r\n        restrict: 'AE',\r\n        templateUrl: 'templates/listPopUp.html',\r\n        scope: {\r\n            onItemSelected: '=itemselected',\r\n            datasource: '=',\r\n            textField: '=',\r\n            valueField: '=',\r\n            selectedDisplayText: '=',\r\n            selectedDataEntity: '=',\r\n            entity: '=',\r\n            entityText: '='\r\n        },\r\n        require: 'ngModel',\r\n        link: function link(scope, element, attr, modelCtrl) {\r\n            if (ionic.Platform.isAndroid() == true)\r\n                screen.orientation.lock(\"portrait\");\r\n            var eleScope = element.scope();\r\n            scope.dataTextField = eleScope[attr.textField];\r\n            scope.dataValueField = attr.valueField;\r\n            scope.dataSelectedTextField = attr.selectedDisplayText;\r\n            scope.isSmallScreenDevice = false;\r\n\r\n            scope.isQRCodeReaderEnabled = eleScope[attr.qrCodeReaderEnabled];\r\n            scope.isSearchable = true;\r\n\r\n            scope.isAddVisible = false;\r\n            scope.AddText = $rootScope.getResourceText('LIT_MOBILE_ADD_ITEM');\r\n\r\n            scope.dataEntity = attr.entity;\r\n            scope.dataEntityText = attr.entityText;\r\n\r\n            var dropdownTypeVal = attr.dropdowntype;\r\n            var moduleNameVal = attr.type;\r\n            var columnTypeVal = attr.columntype;\r\n            var enableOnlineSearchVal = attr.enableonline; // Assigning Column sub type value passed from drop down html template\r\n\r\n            if (screen.height < 700) {\r\n                scope.isSmallScreenDevice = true;\r\n            }\r\n\r\n            var columnSubTypeVal = attr.columnSubType;\r\n            $ionicPlatform.ready(function () {\r\n                scope.searchIcon = $rootScope.getIconValue('Search');\r\n                scope.closeIcon = $rootScope.getIconValue('Close');\r\n                scope.searchText = $rootScope.getResourceText('LIT_SEARCH');\r\n                scope.qrScannerIcon = $rootScope.getIconValue('Scanner');\r\n                scope.flipCameraIcon = $rootScope.getIconValue('Flip');\r\n                scope.flashCameraIcon = $rootScope.getIconValue('Flash');\r\n                scope.scannerCloseIcon = $rootScope.getIconValue('ScannerClose');\r\n            });\r\n\r\n            // Below changes are handled for only Body parts Dropdown in Hierarchy View - FT10543\r\n            var easyColType = eleScope.columnType;\r\n            var easyListSource = eleScope.columnsListSource;\r\n            scope.easyDataList;\r\n            var dataStore;\r\n\r\n            scope.showParentValueHeader = false; // Parent Value in Header is set to false in default\r\n            scope.selectedItemValue;\r\n            scope.emptyDataList;\r\n            var emptyData;\r\n\r\n            $rootScope.$emit('bodyPartsScope', { data: eleScope });\r\n\r\n            if (easyColType === 'EasyClassification') {\r\n                easyListSource = eleScope.columnsListSource;\r\n                var bodyTypeVal = eleScope.dropDownTypeVal;\r\n                $rootScope.$emit('bodyTypeListVal', { data: bodyTypeVal });\r\n                treeViewEasy(easyListSource);\r\n            }\r\n\r\n            function treeViewEasy(easyData) {\r\n                dataStore = [];\r\n                for (var i = 0; i < easyListSource.length; i++) {\r\n                    if (easyListSource[i].ParentCode === \"\") {\r\n                        dataStore.push(easyListSource[i]);\r\n                    }\r\n                }\r\n                scope.easyDataList = dataStore;\r\n            }\r\n\r\n            scope.showSub = function (item) {\r\n                //making the visual select null to reset it back to normal\r\n                DeviceUtil.setKeyValueWithSharedPreferences(\"visualPart\", null);\r\n                var selectedText = item[scope.dataTextField];\r\n                emptyData = [];\r\n                for (var i = 0; i < easyListSource.length; i++) {\r\n                    if (selectedText === easyListSource[i].Text && easyListSource[i].IsSelectable === false && item[scope.dataValueField] === easyListSource[i].Id) {\r\n                        var easyCode = easyListSource[i].Code;\r\n                        for (var j = 0; j < easyListSource.length; j++) {\r\n                            if (easyCode === easyListSource[j].ParentCode) {\r\n                                $rootScope.$emit(\"backSubButton\", {\r\n                                    data: true\r\n                                });\r\n                                scope.selectedItemValue = selectedText;  // show parent value as header in popup\r\n                                scope.showParentValueHeader = true; // enable header in popup\r\n                                emptyData.push(easyListSource[j]);\r\n                                $ionicScrollDelegate.$getByHandle('childScroll').scrollTop();\r\n                                scope.easyDataList = emptyData;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (emptyData.length === 0) {\r\n                    for (var k = 0; k < easyListSource.length; k++) {\r\n                        if (selectedText === easyListSource[k].Text && easyListSource[k].IsSelectable === true) {\r\n                            var selectedItemData = easyListSource[k];\r\n                            scope.tapped(selectedItemData);\r\n                        }\r\n                    }\r\n                }\r\n                scope.buttonText = $rootScope.getResourceText('LIT_BACK');\r\n            };\r\n\r\n            $rootScope.$on('BackTapped', function (event, data) {\r\n                scope.showParentValueHeader = false;\r\n                $rootScope.$emit(\"backSubButton\", {\r\n                    data: false\r\n                });\r\n                var easyData = scope.selectedItemValue;\r\n                treeViewEasy(easyData);\r\n            });\r\n\r\n            scope.searchModel = { Text: \"\" };\r\n            var itemListName = attr.datasource; // Defining empty lists to add the drop down data\r\n\r\n            var itemList = [];\r\n            var itemListData = [];\r\n            var dropDownType = null;\r\n            var columnType = null;\r\n            var columnSubType = null;\r\n            var isDeviceOnline = $cordovaNetwork.isOnline();\r\n            var type = $cordovaNetwork.getNetwork();\r\n            isDeviceOnline = isDeviceOnline === true || type === 'unknown';\r\n            scope.enableOnline = false;\r\n            scope.isOnlineSearch = false; // Below boolean variable is used to highlight web api returned values\r\n\r\n            scope.isOnlineDropDownData = false; // Storing the list data in a temporary list array till the filter is applied\r\n\r\n            itemListData = eleScope[itemListName];\r\n            columnType = eleScope[columnTypeVal];\r\n            dropDownType = eleScope[dropdownTypeVal];\r\n            var moduleName = eleScope[moduleNameVal];\r\n            columnSubType = eleScope[columnSubTypeVal]; // Adding filtered list to the actual defined list above\r\n\r\n            itemList = dropdownValueManager.filterDropDownDataByModule(itemListData, moduleName, columnType, columnSubType); // Formating columntype value to fetch table name\r\n\r\n            var tabname = dropdownValueManager.getTableNameText(dropDownType, columnType, moduleName);\r\n            scope.enableOnline = eleScope[enableOnlineSearchVal]; // If device is online, then enable online button in view or else disable.\r\n\r\n            if (isDeviceOnline) {\r\n                scope.isOnlineSearch = eleScope[enableOnlineSearchVal];\r\n            }\r\n\r\n            scope.onlineVal = $rootScope.getResourceText('LIT_ONLINE');\r\n            scope.offlineVal = $rootScope.getResourceText('LIT_OFFLINE');\r\n\r\n            scope.updateIsOnlineSearch = function (isOnlineSearchValue) {\r\n                if (isDeviceOnline) {\r\n                    scope.isOnlineSearch = !isOnlineSearchValue;\r\n\r\n                    if (!scope.isOnlineSearch) {\r\n                        // Assigning local data from the mobile to datasource, when user toggles to offline search mode.\r\n                        scope.dataSource = itemList;\r\n                        scope.isOnlineDropDownData = false;\r\n                    }\r\n                } else {\r\n                    ionicToast.showDefault($rootScope.getResourceText('MSG_CHECK_INTERNET_CONNECTION'));\r\n                }\r\n            }; // Setting max character length (TODO can be added as a setting)\r\n\r\n\r\n            var maxCharLength = 3; // Method called when online search setting value is true\r\n\r\n            scope.callWebApi = function (searchText) {\r\n                // Checking if isOnlineSearch is true (as this can be turned off by the user in view)\r\n                LoaderService.hide();\r\n                if (scope.isOnlineSearch) {\r\n                    var enteredText = searchText[scope.dataTextField];\r\n\r\n                    if (enteredText.length > maxCharLength) {\r\n                        // Check if device is online\r\n                        if (isDeviceOnline) {\r\n                            // Check if entered string is valid\r\n                            var isValidText = CommonMethodsFactory.validateSearchText(enteredText);\r\n                            enteredText = CommonMethodsFactory.encodeToBase64(enteredText);\r\n                            /* if (isValidText) {*/\r\n                            var newItemList = []; // Making a web api call for online search\r\n                            // Also filter is applied if the online search performed has a  valid columnsubtype value\r\n\r\n                            var dropdownPromise = dropdownValueManager.getDropDownValueBasedOnSearchFilter('search', tabname, moduleName, enteredText, columnSubType);\r\n                            dropdownPromise.then(function (success) {\r\n                                // Filtering the downloaded data before displaying to user\r\n                                // Passing column sub type to filter dropdown based on coluumn sub type  if present\r\n                                newItemList = dropdownValueManager.filterDropDownBasedOnModule(moduleName, success, tabname, dropDownType, columnSubType); // Adding the check for department because adding DisplayText property directly to the Online retreived data.\r\n                                // Once user selects a value the value will be inserted.\r\n\r\n                                if (tabname === 'Department') {\r\n                                    newItemList = dropdownValueManager.addDisplayTextToOnlineSearchData(newItemList);\r\n                                } // If filtered data list is not empty assign filtered values\r\n                                // else assign local database fetched values\r\n\r\n\r\n                                if (newItemList.length !== 0) {\r\n                                    scope.dataSource = newItemList; // Boolean variable is used to highlight the new downloaded data.\r\n\r\n                                    scope.isOnlineDropDownData = true;\r\n                                } else {\r\n                                    scope.dataSource = itemList;\r\n                                    scope.isOnlineDropDownData = false;\r\n                                }\r\n                            });\r\n                            //} else {\r\n                            //    ionicToast.showDefault($rootScope.getResourceText('MSG_DATA_NOT_VALID'));\r\n                            //}\r\n                        } else {\r\n                            // in the case of device offline assing local data to drop down\r\n                            scope.dataSource = itemList;\r\n                            scope.isOnlineDropDownData = false;\r\n                        }\r\n                    }\r\n                }\r\n            }; // selectedDataEntity attribute returns the specified entity from the view.\r\n            // selEntity variable will have a value which the user selects in the drop down.\r\n            // Default value is initilized to null.\r\n\r\n\r\n            var selEntity = ''; // Checking if the attribute is defined in the view. If defined assigning the entity to selEntity variable. \r\n\r\n            if (attr.selectedDataEntity) {\r\n                var selectedEntity = attr.selectedDataEntity;\r\n                selEntity = eleScope[selectedEntity];\r\n            } // method is called when user selects a drop down data and isOnlineSearch value should be true\r\n\r\n\r\n            function insertDropDownData(itemData) {\r\n                dropdownValueManager.insertDropDownData(tabname, itemData);\r\n            }\r\n\r\n            function getDefaultText(itemList, valueId) {\r\n                for (var i = 0; i < itemList.length; i++) {\r\n                    var item = itemList[i];\r\n                    var selectedId = item[scope.dataValueField];\r\n\r\n                    if (selectedId == valueId) {\r\n                        // Handling for the scenario where drop downs will have a pre-defined value\r\n                        if (!angular.isUndefined(scope.onItemSelected)) {\r\n                            scope.onItemSelected(item, selEntity);\r\n                        }\r\n                        return item[scope.dataTextField];\r\n                    }\r\n                }\r\n            }\r\n\r\n            var valueId = scope.$parent.$eval(attr.ngModel); // Displaying default value for a drop down based on the boolean value 'defaultValue'\r\n\r\n            var defaultValue = scope.$parent.$eval(attr.dropdownDefaultValue);\r\n\r\n            if (valueId != null && defaultValue) {\r\n                scope.selectedText = getDefaultText(itemList, valueId);\r\n            }\r\n\r\n            scope.clearSearch = function () {\r\n                scope.searchModel = { Text: \"\" }; // Adding this for a scenario, where user has searched for a text, but the result is not what he/she wanted\r\n                // then wants to select a value from local data. so on clear button clicked assigning back to the view.\r\n\r\n                scope.dataSource = itemList;\r\n                scope.isOnlineDropDownData = false;\r\n            };\r\n\r\n            scope.showFullValue = function () {\r\n                ionicToast.showDefault(scope.selectedText);\r\n            };\r\n\r\n            scope.closeKeyBoard = function () {\r\n                cordova.plugins.Keyboard.close();\r\n            };\r\n\r\n            scope.getItemWidthForWindow = function () {\r\n                return '100%';\r\n            };\r\n\r\n            scope.disableTagButton = function (selectedText) {\r\n                if (selectedText != null) {\r\n                    return {\r\n                        'visibility': 'hidden'\r\n                    };\r\n                }\r\n\r\n                return {\r\n                    'visibility': 'visible'\r\n                };\r\n            };\r\n\r\n            scope.getDeviceHeight = function () {\r\n                return window.screen.height * window.devicePixelRatio;\r\n            };\r\n\r\n            scope.getItemHeightForWindow = function () {\r\n                var deviceHeight = window.screen.height * window.devicePixelRatio;\r\n                var isIOS = (ionic.Platform.isAndroid() == false);\r\n                if (isIOS) {\r\n                    if (deviceHeight <= 960) {\r\n                        return '150px';\r\n                    } else {\r\n                        return '300px';\r\n                    }\r\n                } else {\r\n                    if (deviceHeight <= 500) {\r\n                        return '50px';\r\n                    } else if (deviceHeight <= 750) {\r\n                        return '65px';\r\n                    } else if (deviceHeight <= 1000) {\r\n                        return '260px';\r\n                    } else {\r\n                        return '300px';\r\n                    }\r\n                }\r\n            };\r\n\r\n            scope.getPlatformSpecificTemplate = function () {\r\n                // Currently handling only for IOS and Android\r\n                var isIOS = (ionic.Platform.isAndroid() == false);\r\n                if (isIOS) {\r\n                    if (eleScope.columnType === 'EasyClassification') {\r\n                        return 'templates/bodyPart_dropDown_template/iosTemplate.html';\r\n                    }\r\n                } else {\r\n                    if (eleScope.columnType === 'EasyClassification') {\r\n                        return 'templates/bodyPart_dropDown_template/androidTemplate.html';\r\n                    }\r\n                }\r\n            };\r\n\r\n            scope.getItemHeight = function (item) {\r\n                var valueField = item[scope.dataTextField];\r\n\r\n                if (valueField == undefined) {\r\n                    valueField = '';\r\n                }\r\n\r\n                var length = valueField.length;\r\n                var height = length * 1.5;\r\n\r\n                if (height < 40) {\r\n                    height = 40;\r\n                }\r\n\r\n                return height + 'px';\r\n            };\r\n\r\n            scope.dataSource = itemList;\r\n\r\n            scope.showCompleteItemText = function (item) {\r\n                ionicToast.showDefault(item.Text);\r\n            };\r\n\r\n            $rootScope.saveVisualParts = function (data) {\r\n                scope.tapped(data);\r\n            };\r\n\r\n            scope.tapped = function (item) {\r\n                try {\r\n                    var currValue = modelCtrl.$modelValue;\r\n                    var valueField = item[scope.dataValueField];\r\n                    var textField = item[scope.dataSelectedTextField];\r\n                    modelCtrl.$setViewValue(valueField);\r\n                    modelCtrl.$render();\r\n\r\n                    if (scope.dataEntityText) {\r\n                        scope.entity[scope.dataEntityText] = textField;\r\n                    }\r\n\r\n                    if (!angular.isUndefined(scope.onItemSelected)) {\r\n                        // Callback function called defined in the respective controllers.\r\n                        scope.onItemSelected(item, selEntity);\r\n                    }\r\n\r\n                    if (scope.isOnlineSearch) {\r\n                        // Save selected drop down data to local database\r\n                        insertDropDownData(item);\r\n                    }\r\n\r\n                    var completed = eleScope.$emit('Completed', {\r\n                        data: textField\r\n                    });\r\n                    if (ionic.Platform.isAndroid() == true)\r\n                        screen.orientation.unlock();\r\n                } catch (e) {\r\n                    console.log(e);\r\n                }\r\n            };\r\n            scope.openScanner = function () {\r\n                //when scanner icon is clickd multiple times then if loop fails and loads previously \r\n                //loaded values from else loop this prevents from calling document.queryselector every time when scan icon is \r\n                //clicked\r\n                cordova.plugins.Keyboard.close();\r\n                if (scope.scanItems === null || scope.scanItems === undefined) {\r\n                    var popupView = document.querySelector(\".popup-container\");\r\n                    var mainView = document.querySelector(\".scannerView\");\r\n                    var scannerButton = document.querySelector(\".scannerButtons\");\r\n                    var cancle = document.querySelector(\".cancleScan\");\r\n                    var flash = document.querySelector(\".flashCam\");\r\n                    var flipCamera = document.querySelector(\".flipCam\");\r\n                    var readInputVal = document.querySelector(\".searchTextVal\");\r\n                    var dropDownPosition = document.querySelector(\".lazyDropDownPositionFix\");\r\n                    var androidView = document.querySelector(\".platform-android\");\r\n\r\n                    scope.scanItems = {\r\n                        popupContainer: popupView,\r\n                        scannerView: mainView,\r\n                        scannerButton: scannerButton,\r\n                        cancleButton: cancle,\r\n                        flashCamera: flash,\r\n                        flipCamera: flipCamera,\r\n                        read: readInputVal,\r\n                        bodyPosition: dropDownPosition,\r\n                        androidView: androidView\r\n                    };\r\n                } else {\r\n                    var popupView = scope.scanItems.popupContainer;\r\n                    var mainView = scope.scanItems.scannerView;\r\n                    var scannerButton = scope.scanItems.scannerButton;\r\n                    var cancle = scope.scanItems.cancleButton;\r\n                    var flash = scope.scanItems.flashCamera;\r\n                    var flipCamera = scope.scanItems.flipCamera;\r\n                    var readInputVal = scope.scanItems.read;\r\n                    var dropDownPosition = scope.scanItems.bodyPosition;\r\n                    var androidView = scope.scanItems.androidView;\r\n                }\r\n\r\n                //blur is added because the Keyboard gets shown when scanning\r\n                //readInputVal.blur();\r\n\r\n                //the back button handled for android using an backbutton event\r\n                document.addEventListener('backbutton', function () {\r\n                    if (androidView)\r\n                        androidView.style.setProperty(\"background-color\", \"var(--statusbar-bg-color, #2c3445)\", \"important\");\r\n                    mainView.style.visibility = \"visible\";\r\n                    dropDownPosition.style.setProperty(\"position\", \"relative\");\r\n                    scannerButton.style.setProperty(\"visibility\", \"hidden\", \"important\");\r\n                });\r\n\r\n                window.QRScanner.prepare(onDone);\r\n\r\n                function onDone(err, status) {\r\n                    if (err) {\r\n                        console.error(err);\r\n                    }\r\n                    if (status.authorized) {\r\n                        //cancle camera is handled here\r\n                        cancle.addEventListener(\"click\", function () {\r\n                            if (status.lightEnabled === true) {\r\n                                window.QRScanner.disableLight(function () {\r\n                                    status.lightEnabled = false;\r\n                                });\r\n                            }\r\n                            window.QRScanner.cancelScan();\r\n                        });\r\n\r\n                        //flash light is handled here\r\n                        flash.addEventListener(\"click\", function () {\r\n                            if (status.lightEnabled === false) {\r\n                                window.QRScanner.enableLight(function () {\r\n                                    status.lightEnabled = true;\r\n                                });\r\n                            } else {\r\n                                window.QRScanner.disableLight(function () {\r\n                                    status.lightEnabled = false;\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                        //camera fip is handled here\r\n                        flipCamera.addEventListener('click', function () {\r\n                            if (status.currentCamera === 0) {\r\n                                window.QRScanner.useFrontCamera(function () {\r\n                                    status.currentCamera = 1;\r\n                                });\r\n                            } else {\r\n                                window.QRScanner.useBackCamera(function () {\r\n                                    status.currentCamera = 0;\r\n                                });\r\n                            }\r\n                        })\r\n\r\n                        //when the scanner is get called the popupview and the body both will be made hidden and the buttons will be made visible\r\n                        if (androidView)\r\n                            androidView.style.setProperty(\"background-color\", \"transparent\", \"important\");\r\n                        popupView.style.visibility = \"hidden\";\r\n                        mainView.style.visibility = \"hidden\";\r\n                        dropDownPosition.style.setProperty(\"position\", \"\");\r\n                        scannerButton.style.setProperty(\"visibility\", \"visible\", \"important\");\r\n                        window.QRScanner.show(function () {\r\n                            window.QRScanner.scan(displayContents);\r\n                        });\r\n                    }\r\n                }\r\n\r\n                function displayContents(err, text) {\r\n                    if (err) {\r\n                        // when the cancle event is gets triggered error loop will be called\r\n                        if (err.name === \"SCAN_CANCELED\") {\r\n                            //the popupView and body will be set back t0 visible and the buttons to hidden\r\n                            if (androidView)\r\n                                androidView.style.setProperty(\"background-color\", \"var(--statusbar-bg-color, #2c3445)\", \"important\");\r\n                            popupView.style.visibility = \"visible\";\r\n                            mainView.style.visibility = \"visible\";\r\n                            dropDownPosition.style.setProperty(\"position\", \"relative\");\r\n                            scannerButton.style.setProperty(\"visibility\", \"hidden\", \"important\");\r\n                            // destroy is called because it will close the camera/video preview\r\n                            window.QRScanner.destroy();\r\n                        } else {\r\n                            console.error(err._message);\r\n                        }\r\n                    } else {\r\n                        //if in case the light is on after scanning the below method will off the flash lisht\r\n                        window.QRScanner.disableLight();\r\n                        //and the popupView and body will be set back t0 visible and the buttons to hidden\r\n                        if (androidView)\r\n                            androidView.style.setProperty(\"background-color\", \"var(--statusbar-bg-color, #2c3445)\", \"important\");\r\n                        popupView.style.visibility = \"visible\";\r\n                        mainView.style.visibility = \"visible\";\r\n                        dropDownPosition.style.setProperty(\"position\", \"relative\");\r\n                        scannerButton.style.setProperty(\"visibility\", \"hidden\", \"important\");\r\n                        window.QRScanner.destroy();\r\n                        scope.searchModel = { Text: \"\" };\r\n                        //scanned data is passed to call the webapi\r\n                        readInputVal.focus();\r\n                        scope.searchModel[scope.dataTextField] = text;\r\n                        scope.callWebApi(scope.searchModel);\r\n                    }\r\n                }\r\n            };\r\n        }\r\n    };\r\n}]);\r\n\r\napp.directive('sortable', ['$ionicGesture', '$ionicScrollDelegate', function ($ionicGesture, $ionicScrollDelegate) {\r\n    return {\r\n        restrict: 'A',\r\n        scope: {\r\n            draggable: '@',\r\n            sorted: '&'\r\n        },\r\n        link: function (scope, element, attrs) {\r\n\r\n            var settings = {\r\n                draggable: scope.draggable ? scope.draggable : '.card',\r\n                duration: 200\r\n            };\r\n\r\n            var dragging = null, placeholder = null, offsetY = 0, marginTop = 0;\r\n            var cardSet, initialIndex, currentIndex, animating = false;\r\n\r\n            var placeholderHeight;\r\n            var scrollInterval;\r\n\r\n            var createPlaceholder = function createPlaceholder(height) {\r\n                // Use marginTop to compensate for extra margin when animating the placeholder\r\n                return $('<div></div>')\r\n                    .css({\r\n                        height: height + 'px',\r\n                        marginTop: (currentIndex > 0 ? -marginTop : -1) + 'px'\r\n                    })\r\n                    .addClass('placeholder');\r\n            };\r\n\r\n            var touchHold = function touchHold(e) {\r\n                // Get the element we're about to start dragging\r\n                dragging = angular.element(e.target).closest(settings.draggable);\r\n                if (!dragging.length) dragging = null;\r\n\r\n                if (dragging) {\r\n                    // Get the initial index\r\n                    initialIndex = currentIndex = dragging.index(settings.draggable);\r\n\r\n                    var position = dragging.position();\r\n\r\n                    // Get relative position of touch\r\n                    var clientY = e.gesture.touches[0].clientY;\r\n                    offsetY = clientY - position.top - element.offset().top;\r\n\r\n                    // Switch to Absolute position at same location\r\n                    dragging.css({\r\n                        position: 'absolute',\r\n                        zIndex: 1000,\r\n                        left: position.left + 'px',\r\n                        top: position.top + 'px',\r\n                        width: dragging.outerWidth() + 'px'\r\n                    })\r\n                        .addClass('dragging');\r\n\r\n                    // Get the set of cards that were re-ordering with\r\n                    cardSet = element.find(settings.draggable + ':not(.dragging)');\r\n\r\n                    // We need to know the margin size so we can compensate for having two\r\n                    // margins where we previously had one (due to the placeholder being there)\r\n                    marginTop = parseInt(dragging.css('marginTop')) + 1;\r\n\r\n                    // Replace with placeholder (add the margin for when placeholder is full size)\r\n                    placeholderHeight = dragging.outerHeight() + marginTop;\r\n                    placeholder = createPlaceholder(placeholderHeight);\r\n                    placeholder.insertAfter(dragging);\r\n\r\n                    // Interval to handle auto-scrolling window when at top or bottom\r\n                    // initAutoScroll();\r\n                    // scrollInterval = setInterval(autoScroll, 20);\r\n                }\r\n            };\r\n            var holdGesture = $ionicGesture.on('hold', touchHold, element);\r\n\r\n            var touchMove = function touchMove(e) {\r\n                if (dragging) {\r\n                    e.stopPropagation();\r\n                    touchY = e.touches ? e.touches[0].clientY : e.clientY;\r\n                    var newTop = touchY - offsetY - element.offset().top;\r\n\r\n                    // Reposition the dragged element\r\n                    dragging.css('top', newTop + 'px');\r\n\r\n                    // Check for position in the list\r\n                    var newIndex = 0;\r\n                    cardSet.each(function (i) {\r\n                        if (newTop > $(this).position().top) {\r\n                            newIndex = i + 1;\r\n                        }\r\n                    });\r\n\r\n                    if (!animating && newIndex !== currentIndex) {\r\n                        currentIndex = newIndex;\r\n\r\n                        var oldPlaceholder = placeholder;\r\n                        // Animate in a new placeholder\r\n                        placeholder = createPlaceholder(1);\r\n\r\n                        // Put it in the right place\r\n                        if (newIndex < cardSet.length) {\r\n                            placeholder.insertBefore(cardSet.eq(newIndex));\r\n                        } else {\r\n                            placeholder.insertAfter(cardSet.eq(cardSet.length - 1));\r\n                        }\r\n\r\n                        // Animate the new placeholder to full height\r\n                        animating = true;\r\n                        setTimeout(function () {\r\n                            placeholder.css('height', placeholderHeight + 'px');\r\n                            // Animate out the old placeholder\r\n                            oldPlaceholder.css('height', 1);\r\n\r\n                            setTimeout(function () {\r\n                                oldPlaceholder.remove();\r\n                                animating = false;\r\n                            }, settings.duration);\r\n                        }, 50);\r\n                    }\r\n                }\r\n            };\r\n\r\n            var touchMoveGesture = $ionicGesture.on('touchmove', touchMove, element);\r\n            var mouseMoveGesture = $ionicGesture.on('mousemove', touchMove, element);\r\n\r\n            var touchRelease = function touchRelease(e) {\r\n                if (dragging) {\r\n                    // Set element back to normal\r\n                    dragging.css({\r\n                        position: '',\r\n                        zIndex: '',\r\n                        left: '',\r\n                        top: '',\r\n                        width: ''\r\n                    }).removeClass('dragging');\r\n\r\n                    // Remove placeholder\r\n                    placeholder.remove();\r\n                    placeholder = null;\r\n\r\n                    if (initialIndex !== currentIndex && scope.sorted) {\r\n                        // Call the callback with the instruction to re-order\r\n                        scope.$fromIndex = initialIndex;\r\n                        scope.$toIndex = currentIndex;\r\n                        scope.$apply(scope.sorted);\r\n                    }\r\n                    dragging = null;\r\n\r\n                    clearInterval(scrollInterval);\r\n                }\r\n            };\r\n            var releaseGesture = $ionicGesture.on('release', touchRelease, element);\r\n\r\n            scope.$on('$destroy', function () {\r\n                $ionicGesture.off(holdGesture, 'hold', touchHold);\r\n                $ionicGesture.off(touchMoveGesture, 'touchmove', touchMove);\r\n                $ionicGesture.off(mouseMoveGesture, 'mousemove', touchMove);\r\n                $ionicGesture.off(releaseGesture, 'onReorder', touchRelease);\r\n            });\r\n\r\n            var touchY, scrollHeight, containerTop, maxScroll;\r\n            var scrollBorder = 80, scrollSpeed = 0.2;\r\n            // Setup the autoscroll based on the current scroll window size\r\n            var initAutoScroll = function initAutoScroll() {\r\n                touchY = -1;\r\n                var scrollArea = element.closest('.scroll');\r\n                var container = scrollArea.parent();\r\n                scrollHeight = container.height();\r\n                containerTop = container.position().top;\r\n                maxScroll = scrollArea.height() - scrollHeight;\r\n            };\r\n\r\n            // Autoscroll function to scroll window up and down when\r\n            // the touch point is close to the top or bottom\r\n            var autoScroll = function autoScroll() {\r\n                var scrollChange = 0;\r\n                if (touchY >= 0 && touchY < containerTop + scrollBorder) {\r\n                    // Should scroll up\r\n                    scrollChange = touchY - (containerTop + scrollBorder);\r\n                } else if (touchY >= 0 && touchY > scrollHeight - scrollBorder) {\r\n                    // Should scroll down\r\n                    scrollChange = touchY - (scrollHeight - scrollBorder);\r\n                }\r\n\r\n                if (scrollChange !== 0) {\r\n                    // get the updated scroll position\r\n                    var newScroll = $ionicScrollDelegate.getScrollPosition().top + scrollSpeed * scrollChange;\r\n                    // Apply scroll limits\r\n                    if (newScroll < 0)\r\n                        newScroll = 0;\r\n                    else if (newScroll > maxScroll)\r\n                        newScroll = maxScroll;\r\n\r\n                    // Set the scroll position\r\n                    $ionicScrollDelegate.scrollTo(0, newScroll, false);\r\n                }\r\n            };\r\n\r\n        }\r\n    };\r\n}]);\r\n\r\napp.directive(\"vqlistPopup\", [\r\n    \"$ionicPopup\",\r\n    \"$rootScope\",\r\n    function ($ionicPopup, $rootScope) {\r\n        var vqListPopUpData = {\r\n            restrict: \"E\",\r\n            tagName: \"button\",\r\n            transclude: true,\r\n            transElement: null,\r\n            popUpElement: null,\r\n            require: \"ngModel\",\r\n            link: {\r\n                post: function post(scope, el, att, ctrl, transclude) {\r\n                    var selectedText = att.displayText;\r\n                    scope.$on(\"Completed\", function (obj, val) {\r\n                        selectedText = val.data;\r\n\r\n                        el.html(selectedText);\r\n                        vqListPopUpData.popUpElement.close();\r\n                    });\r\n                    el.html(selectedText);\r\n                },\r\n                pre: function pre(scope, el, attrs, ctrl, transclude) {\r\n                    vqListPopUpData.transElement = transclude();\r\n                    el.bind(\"tap\", function () {\r\n                        var html = vqListPopUpData.transElement;\r\n                        vqListPopUpData.popUpElement = $ionicPopup.show({\r\n                            template: html,\r\n                            title: attrs.title,\r\n                            cssClass: \"listPopUpClass\",\r\n                            scope: scope,\r\n                            buttons: [\r\n                                {\r\n                                    text: $rootScope.getResourceText(\"LIT_CANCEL_TEXT\"),\r\n                                },\r\n                            ],\r\n                        });\r\n                        vqListPopUpData.popUpElement.then(function (res) {\r\n                            if (ionic.Platform.isAndroid() == true)\r\n                                screen.orientation.unlock();\r\n                        });\r\n                    });\r\n                },\r\n            },\r\n        };\r\n        return vqListPopUpData;\r\n    },\r\n]);\r\n\r\napp.directive(\"listPopup\", [\r\n    \"$ionicPopup\",\r\n    \"$rootScope\",\r\n    function ($ionicPopup, $rootScope) {\r\n        var listPopUpData = {\r\n            restrict: \"E\",\r\n            tagName: \"button\",\r\n            transclude: true,\r\n            transElement: null,\r\n            popUpElement: null,\r\n            require: \"ngModel\",\r\n            link: {\r\n                post: function post(scope, el, att, ctrl, transclude) {\r\n                    var selectedText = att.displayText;\r\n                    scope.$on(\"Completed\", function (obj, val) {\r\n                        selectedText = val.data;\r\n\r\n                        el.html(selectedText);\r\n                        listPopUpData.popUpElement.close();\r\n                    });\r\n                    el.html(selectedText);\r\n                },\r\n                pre: function pre(scope, el, attrs, ctrl, transclude) {\r\n                    listPopUpData.transElement = transclude();\r\n                    el.bind(\"tap\", function () {\r\n                        var html = listPopUpData.transElement;\r\n                        listPopUpData.popUpElement = $ionicPopup.show({\r\n                            template: html,\r\n                            title: attrs.title,\r\n                            cssClass: \"listPopUpClass\",\r\n                            scope: scope,\r\n                            buttons: [\r\n                                {\r\n                                    text: $rootScope.getResourceText(\"LIT_CANCEL_TEXT\"),\r\n                                },\r\n                            ],\r\n                        });\r\n                        listPopUpData.popUpElement.then(function (res) {\r\n                            if (ionic.Platform.isAndroid() == true)\r\n                                screen.orientation.unlock();\r\n                        });\r\n                    });\r\n                },\r\n            },\r\n        };\r\n        return listPopUpData;\r\n    },\r\n]);\r\n\r\napp.directive(\"listDropdown\", [\r\n    \"QuestionnaireMethodFactory\",\r\n    function (QuestionnaireMethodFactory) {\r\n        return {\r\n            restrict: \"AE\",\r\n            templateUrl:\r\n                \"templates/questionnaire/listDropDownTemplates/quesListPopup.html\",\r\n            scope: {\r\n                datasource: \"=\",\r\n                textField: \"=\",\r\n                valueField: \"=\",\r\n                getStatus: \"=\",\r\n                getPQText: \"=\",\r\n                personQue: \"=\",\r\n            },\r\n            require: \"ngModel\",\r\n            link: function link(scope, element, attr, modelCtrl, $scope) {\r\n                var eleScope = element.scope();\r\n                var itemListName = attr.datasource;\r\n                var question = attr.question;\r\n                var itemListData = [];\r\n                var q = [];\r\n                var paqView = [];\r\n                itemListData = eleScope[itemListName];\r\n                q = eleScope[question];\r\n                paqView = eleScope.getPersonQue(q.Id);\r\n                scope.dataSource = itemListData;\r\n                scope.closeKeyBoard = function () {\r\n                    cordova.plugins.Keyboard.close();\r\n                };\r\n\r\n                scope.getSpecificTemplate = function () {\r\n                    switch (q.TypeCode) {\r\n                        case 2:\r\n                            return \"templates/questionnaire/listDropDownTemplates/specificTemplate/radio.html\";\r\n                        case 3:\r\n                            return \"templates/questionnaire/listDropDownTemplates/specificTemplate/checkBox.html\";\r\n                        default:\r\n                            return null;\r\n                    }\r\n                };\r\n\r\n                scope.getDefaultStatus = function (answerOptionId) {\r\n                    var pqaEntity = eleScope.pq.Answers;\r\n                    return QuestionnaireMethodFactory.getDefaultStatus(\r\n                        q.Id,\r\n                        answerOptionId,\r\n                        pqaEntity\r\n                    );\r\n                };\r\n\r\n                scope.getPersonQue = function () {\r\n                    return paqView;\r\n                };\r\n\r\n                scope.setCheckBoxVal = function (answerOptionId, checkstatus) {\r\n                    eleScope.setCheckVal(answerOptionId, checkstatus, q);\r\n                    ansTapped();\r\n                };\r\n\r\n                scope.setRadioBoxVal = function (answerOptionId, event) {\r\n                    eleScope.setRadioVal(q, answerOptionId, event);\r\n                    ansTapped();\r\n                };\r\n\r\n                scope.CommentRequiredCheckBox = function (answerOption, status) {\r\n                    eleScope.chkCRCheckBox(answerOption, paqView, status);\r\n                }\r\n\r\n                scope.CommentRequiredRadio = function (answerOption) {\r\n                    eleScope.chkCRRadio(answerOption, paqView);\r\n                }\r\n\r\n                scope.getItemHeightForWindow = function () {\r\n                    var deviceHeight = window.screen.height * window.devicePixelRatio;\r\n                    var isIOS = ionic.Platform.isAndroid() == false;\r\n                    if (isIOS) {\r\n                        if (deviceHeight <= 960) {\r\n                            return \"150px\";\r\n                        } else {\r\n                            return \"300px\";\r\n                        }\r\n                    } else {\r\n                        if (deviceHeight <= 500) {\r\n                            return \"50px\";\r\n                        } else if (deviceHeight <= 750) {\r\n                            return \"65px\";\r\n                        } else if (deviceHeight <= 1000) {\r\n                            return \"260px\";\r\n                        } else {\r\n                            return \"300px\";\r\n                        }\r\n                    }\r\n                };\r\n\r\n                function ansTapped() {\r\n                    try {\r\n                        var textField = eleScope.getPQText(q);\r\n                        if (textField === undefined) {\r\n                            textField = \"\";\r\n                        }\r\n                        var completed = eleScope.$emit(\"Completed\", {\r\n                            data: textField,\r\n                        });\r\n                        if (ionic.Platform.isAndroid() == true)\r\n                            screen.orientation.unlock();\r\n                    } catch (e) {\r\n                        console.log(e);\r\n                    }\r\n                }\r\n            },\r\n        };\r\n    },\r\n]);\r\n\r\napp.directive(\"vqlistDropdown\", [\r\n    \"QuestionnaireMethodFactory\",\r\n    function (QuestionnaireMethodFactory) {\r\n        return {\r\n            restrict: \"AE\",\r\n            templateUrl:\r\n                \"templates/questionnaire/listDropDownTemplates/quesListPopup.html\",\r\n            scope: {\r\n                datasource: \"=\",\r\n                textField: \"=\",\r\n                valueField: \"=\",\r\n                getStatus: \"=\",\r\n                getVQText: \"=\",\r\n                personQue: \"=\",\r\n            },\r\n            require: \"ngModel\",\r\n            link: function link(scope, element, attr, modelCtrl, $scope) {\r\n                var eleScope = element.scope();\r\n                var itemListName = attr.datasource;\r\n                var question = attr.question;\r\n                var valuationQue = attr.valuationQue;\r\n                var itemListData = [];\r\n                var q = [];\r\n                var vq = [];\r\n                itemListData = eleScope[itemListName];\r\n                q = eleScope[question];\r\n                vq = eleScope.valuationQue;\r\n                scope.dataSource = itemListData;\r\n\r\n                scope.closeKeyBoard = function () {\r\n                    cordova.plugins.Keyboard.close();\r\n                };\r\n\r\n                scope.getPersonQue = function () {\r\n                    return eleScope.getPersonQue(q.Id, vq.Id);\r\n                };\r\n\r\n                scope.getSpecificTemplate = function () {\r\n                    switch (vq.TypeCode) {\r\n                        case 2:\r\n                            return \"templates/questionnaire/listDropDownTemplates/specificTemplate/radio.html\";\r\n                        case 3:\r\n                            return \"templates/questionnaire/listDropDownTemplates/specificTemplate/checkBox.html\";\r\n                        default:\r\n                            return null;\r\n                    }\r\n                };\r\n\r\n                scope.getDefaultStatus = function (answerOptionId) {\r\n                    var pvqaEntity = eleScope.pq.ValuationAnswers;\r\n                    return QuestionnaireMethodFactory.getVQDefaultStatus(\r\n                        q.Id,\r\n                        vq.Id,\r\n                        answerOptionId,\r\n                        pvqaEntity\r\n                    );\r\n                };\r\n\r\n                scope.setCheckBoxVal = function (answerOptionId, checkstatus) {\r\n                    eleScope.setCheckVal(q.Id, vq.Id, answerOptionId, checkstatus);\r\n                    ansTapped();\r\n                };\r\n\r\n                scope.setRadioBoxVal = function (answerOptionId, event) {\r\n                    eleScope.setRadioVal(q.Id, vq.Id, answerOptionId, event);\r\n                    ansTapped();\r\n                };\r\n\r\n                scope.getItemHeightForWindow = function () {\r\n                    var deviceHeight = window.screen.height * window.devicePixelRatio;\r\n                    var isIOS = ionic.Platform.isAndroid() == false;\r\n                    if (isIOS) {\r\n                        if (deviceHeight <= 960) {\r\n                            return \"150px\";\r\n                        } else {\r\n                            return \"300px\";\r\n                        }\r\n                    } else {\r\n                        if (deviceHeight <= 500) {\r\n                            return \"50px\";\r\n                        } else if (deviceHeight <= 750) {\r\n                            return \"65px\";\r\n                        } else if (deviceHeight <= 1000) {\r\n                            return \"260px\";\r\n                        } else {\r\n                            return \"300px\";\r\n                        }\r\n                    }\r\n                };\r\n\r\n                function ansTapped() {\r\n                    try {\r\n                        var textField = eleScope.getVQText(q, vq);\r\n                        if (textField === undefined) {\r\n                            textField = \"\";\r\n                        }\r\n                        var completed = eleScope.$emit(\"Completed\", {\r\n                            data: textField,\r\n                        });\r\n                        if (ionic.Platform.isAndroid() == true)\r\n                            screen.orientation.unlock();\r\n                    } catch (e) {\r\n                        console.log(e);\r\n                    }\r\n                }\r\n            },\r\n        };\r\n    },\r\n]);\r\n\r\napp.directive(\"mapTemplate\", function () {\r\n    return {\r\n        restrict: \"EA\",\r\n        replace: true,\r\n        link: function link(scope, element, attrs) {\r\n            scope.isPdfEmail = attrs.isPdfEmail;\r\n        },\r\n        controller: [\"$scope\", \"$injector\", \"customersManager\", \"userDetailsManager\", \"$state\", \"$timeout\", \"FileUtil\", \"PopupUtil\", \"$rootScope\", \"LoaderService\", \"CommonMethodsFactory\", \"personQuestionnaireManager\", \"$q\",\r\n            function ($scope, $injector, customersManager, userDetailsManager, $state, $timeout, FileUtil, PopupUtil, $rootScope, LoaderService, CommonMethodsFactory, personQuestionnaireManager, $q) {\r\n                $scope.isDisabled = true;\r\n                $scope.customClass = \"ErrorClass\";\r\n                var userDetails = userDetailsManager.getUserLastLoggedTimeStamp();\r\n                var geoTimeOut = userDetails.Customer.GeoLocationTimeout;\r\n                var geoEnableHighAccuracy =\r\n                    userDetails.Customer.EnableHighAccuracyForGeoLocation;\r\n                var options = {\r\n                    timeout: geoTimeOut,\r\n                    enableHighAccuracy: geoEnableHighAccuracy,\r\n                };\r\n                if ($scope.data.GeoX && $scope.data.GeoY) {\r\n                    $scope.customClass = \"SuccessClass\";\r\n                    if ($scope.data.Address) {\r\n                        $scope.isDisabled = false;\r\n                    }\r\n                } else {\r\n                    LoaderService.show();\r\n                    navigator.geolocation.getCurrentPosition(\r\n                        function (s) {\r\n                            LoaderService.hide();\r\n                            $scope.customClass = \"SuccessClass\";\r\n                            $scope.data.GeoY = s.coords.latitude;\r\n                            $scope.data.GeoX = s.coords.longitude;\r\n                        },\r\n                        function (e) {\r\n                            LoaderService.hide();\r\n                            $scope.customClass = \"ErrorClass\";\r\n                        },\r\n                        options\r\n                    );\r\n                }\r\n                $scope.openMap = function () {\r\n                    var GeoX = $scope.data.GeoY;\r\n                    var GeoY = $scope.data.GeoX;\r\n                    var isEnableLocation = userDetails.Customer.EnableGeoLocation;\r\n                    var geoLocationPromise = $q.defer();\r\n                    LoaderService.show();\r\n\r\n                    if (isEnableLocation) {\r\n                        if (GeoX && GeoY) {\r\n                            ShowMap(GeoX, GeoY);\r\n                        } else {\r\n                            var sucessGeo = onLocationSucess.bind(this, [geoLocationPromise]);\r\n                            var failureGeo = onLocationFailure.bind(this, [\r\n                                geoLocationPromise,\r\n                            ]);\r\n                            navigator.geolocation.getCurrentPosition(\r\n                                sucessGeo,\r\n                                failureGeo,\r\n                                options\r\n                            );\r\n                        }\r\n                    } else {\r\n                        geoLocationPromise.resolve({\r\n                            x: null,\r\n                            y: null,\r\n                        });\r\n                    }\r\n\r\n                    geoLocationPromise.promise.then(function (resolvedLocation) {\r\n                        var x = resolvedLocation.x;\r\n                        var y = resolvedLocation.y;\r\n                        if (x && y) {\r\n                            ShowMap(x, y);\r\n                        }\r\n                    });\r\n                };\r\n\r\n                function onLocationSucess(geoPromise, position) {\r\n                    var xVal = position.coords.latitude;\r\n                    var yVal = position.coords.longitude;\r\n                    geoPromise[0].resolve({\r\n                        x: xVal,\r\n                        y: yVal,\r\n                    });\r\n                }\r\n\r\n                function onLocationFailure(geoPromise, location) {\r\n                    LoaderService.hide();\r\n                    var title = $rootScope.getResourceText(\r\n                        \"LIT_MOBILE_ENABLE_LOCATION_ACCESS\"\r\n                    );\r\n                    var resourceText = $rootScope.getResourceText(\"MSG_MOBILE_MAP_ERROR\");\r\n                    PopupUtil.alert(title, resourceText);\r\n                    geoPromise[0].resolve({\r\n                        x: null,\r\n                        y: null,\r\n                    });\r\n                }\r\n\r\n                function ShowMap(GeoX, GeoY) {\r\n                    LoaderService.hide();\r\n                    var val;\r\n                    var nameInterval;\r\n                    var output = null;\r\n                    var options =\r\n                        \"location=yes,clearcache=yes,clearsessioncache=yes,cleardata=yes\";\r\n                    var url = CommonMethodsFactory.getCustomerSpecificUrlForMap(GeoX, GeoY);\r\n                    var win = CommonMethodsFactory.openInAppBrowser(url, \"_blank\", options);\r\n                    var locationPickPromise = $q.defer();\r\n\r\n                    if (win != null) {\r\n                        win.addEventListener(\"loadstop\", function () {\r\n                            nameInterval = setInterval(function () {\r\n                                win.executeScript(\r\n                                    {\r\n                                        code: \"if(window.localStorage){window.localStorage.getItem('GeoLocationValues');}\",\r\n                                    },\r\n                                    function (values) {\r\n                                        val = values[0];\r\n                                        if (val && val.length > 0) {\r\n                                            win.executeScript({\r\n                                                code: \"if(window.localStorage){window.localStorage.removeItem('GeoLocationValues');}\",\r\n                                            });\r\n                                            window.localStorage.setItem(\"GeoLocationValues\", val);\r\n                                        }\r\n                                    }\r\n                                );\r\n                            }, 100);\r\n                        });\r\n\r\n                        win.addEventListener(\"exit\", function () {\r\n                            clearInterval(nameInterval);\r\n                            var GeoLocationValues = window.localStorage.getItem(\"GeoLocationValues\");\r\n                            window.localStorage.removeItem(\"GeoLocationValues\");\r\n                            if (GeoLocationValues) {\r\n                                output = JSON.parse(GeoLocationValues);\r\n                                locationPickPromise.resolve({\r\n                                    GeoX: output.loc.lat,\r\n                                    GeoY: output.loc.long,\r\n                                    Address: output.address\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n\r\n\r\n                    $rootScope.$on(\"getGeoLocationValues\", function (event, data) {\r\n                        output = JSON.parse(data);\r\n                        locationPickPromise.resolve({\r\n                            GeoX: output.loc.lat,\r\n                            GeoY: output.loc.long,\r\n                            Address: output.address\r\n                        });\r\n                    });\r\n\r\n                    locationPickPromise.promise.then(function (resolvedLocation) {\r\n                        $scope.customClass = \"SuccessClass\";\r\n                        var GeoX = resolvedLocation.GeoX;\r\n                        var GeoY = resolvedLocation.GeoY;\r\n                        $scope.data.GeoX = GeoY;\r\n                        $scope.data.GeoY = GeoX;\r\n                        $scope.isDisabled = false;\r\n                        if (resolvedLocation.Address) {\r\n                            $scope.isDisabled = false;\r\n                            $scope.data.Address = Address(resolvedLocation.Address);\r\n                        }\r\n                    });\r\n                }\r\n\r\n                function Address(a) {\r\n                    var body = null;\r\n                    for (var i = 0; i < a.length; i++) {\r\n                        if (body != null && i != a.length - 1) {\r\n                            body += `${a[i].long_name}, `;\r\n                        } else if (i == a.length - 1) {\r\n                            body += `${a[i].long_name}`;\r\n                        } else {\r\n                            body = `${a[i].long_name}, `;\r\n                        }\r\n                    }\r\n                    var divElement = `<span>${body}</span>`;\r\n                    return divElement;\r\n                }\r\n            },\r\n        ],\r\n    };\r\n});\r\n\r\napp.directive(\"damagePopup\", [\"$ionicPopup\", \"$rootScope\", \"$timeout\",\r\n    function ($ionicPopup, $rootScope, $timeout) {\r\n        var popUpData = {\r\n            restrict: \"E\",\r\n            tagName: \"button\",\r\n            transclude: true,\r\n            transElement: null,\r\n            popUpElement: null,\r\n            require: \"ngModel\",\r\n            link: {\r\n                post: function post(scope, el, att, ctrl, transclude) {\r\n                    var selectedText = att.displayText;\r\n                    if (!selectedText && scope.personAkStepColumnAnswer && scope.personAkStepColumnAnswer.AnswerText) {\r\n                        scope.$emit(\"SetSelectedText\", {\r\n                            ids: scope.personAkStepColumnAnswer.AnswerText.split(',')\r\n                        })\r\n                    }\r\n                    scope.$on(\"Completed\", function (obj, val) {\r\n                        selectedText = val.data;\r\n\r\n                        el.html(selectedText);\r\n                        popUpData.popUpElement.close();\r\n                    });\r\n                    el.html(selectedText);\r\n                },\r\n                pre: function pre(scope, el, attrs, ctrl, transclude) {\r\n                    var selectedListIds = [];\r\n                    var unSelectedIds = [];\r\n                    var data = scope.columnsListSource;\r\n                    scope.$on(\"SelectedListId\", function (obj, val) {\r\n                        if (selectedListIds.length > 0) {\r\n                            for (var i = 0; i < selectedListIds.length; i++) {\r\n                                if (!val.status) {\r\n                                    unSelectedIds.push(val.Id);\r\n                                    if (selectedListIds[i] == val.Id)\r\n                                        var slicedId = selectedListIds.splice(selectedListIds.indexOf(val.Id), 1);\r\n                                    break;\r\n                                } else if (val.status) {\r\n                                    selectedListIds.push(val.Id);\r\n                                    break;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            if (val.status) {\r\n                                selectedListIds.push(val.Id);\r\n                            } else {\r\n                                unSelectedIds.push(val.Id);\r\n                            }\r\n                        }\r\n                    });\r\n                    scope.$on(\"SetSelectedText\", function (obj, val) {\r\n                        var selectedText = null;\r\n                        for (var i = 0; i < data.length; i++) {\r\n                            for (var j = 0; j < val.ids.length; j++) {\r\n                                if (data[i].Id == val.ids[j]) {\r\n                                    if (selectedText == null)\r\n                                        selectedText = data[i].Text;\r\n                                    else\r\n                                        selectedText = selectedText + ',' + data[i].Text;\r\n                                }\r\n                            }\r\n                        }\r\n                        if (scope.personAkStepColumnAnswer)\r\n                            scope.personAkStepColumnAnswer.AnswerText = val.ids.toString();\r\n                        var completed = scope.$emit('Completed', {\r\n                            data: selectedText\r\n                        });\r\n                    });\r\n                    popUpData.transElement = transclude();\r\n                    el.bind(\"tap\", function () {\r\n                        var html = popUpData.transElement;\r\n                        popUpData.popUpElement = $ionicPopup.show({\r\n                            template: html,\r\n                            title: attrs.title,\r\n                            cssClass: \"listPopUpClass\",\r\n                            scope: scope,\r\n                            buttons: [\r\n                                {\r\n                                    text: $rootScope.getResourceText(\"LIT_CANCEL_TEXT\"),\r\n                                },\r\n                                {\r\n                                    type: \"DamageVisualSelectButton okButton\",\r\n                                    text: $rootScope.getResourceText(\"LIT_OK\"),\r\n                                    onTap: function (e) {\r\n                                        var seletedIds = $(\"#sedan\").mapster('get');\r\n                                        selectedListIds = seletedIds.split(',');\r\n                                        scope.$emit(\"SetSelectedText\", {\r\n                                            ids: selectedListIds\r\n                                        })\r\n                                        $(\"#sedan\").mapster('unbind');\r\n                                        $rootScope.checkDependency();\r\n                                        selectedListIds = [];\r\n                                    }\r\n                                },\r\n                                {\r\n                                    type: \"DamageListSelectButton okButton\",\r\n                                    text: $rootScope.getResourceText(\"LIT_OK\"),\r\n                                    onTap: function (e) {\r\n                                        var previousSelectedids = [];\r\n                                        //need to pass the previous selected values along with new selected ids\r\n                                        if (scope.personAkStepColumnAnswer && scope.personAkStepColumnAnswer.AnswerText)\r\n                                            previousSelectedids = scope.personAkStepColumnAnswer.AnswerText.split(',');\r\n\r\n                                        if (previousSelectedids.length > 0) {\r\n\r\n                                            if (unSelectedIds.length > 0) {\r\n                                                for (var i = 0; i < unSelectedIds.length; i++) {\r\n                                                    if (previousSelectedids.includes(unSelectedIds[i]))\r\n                                                        var slicedPreviousid = previousSelectedids.splice(previousSelectedids.indexOf(unSelectedIds[i]), 1);\r\n                                                }\r\n                                            }\r\n\r\n                                            if (selectedListIds.length > 0) {\r\n                                                for (var i = 0; i < previousSelectedids.length; i++) {\r\n                                                    if (!selectedListIds.includes(previousSelectedids[i])) {\r\n                                                        selectedListIds.push(previousSelectedids[i]);\r\n                                                    }\r\n                                                }\r\n                                            } else {\r\n                                                selectedListIds = previousSelectedids;\r\n                                            }\r\n                                        }\r\n\r\n                                        scope.$emit(\"SetSelectedText\", {\r\n                                            ids: selectedListIds\r\n                                        });\r\n                                        $rootScope.checkDependency();\r\n                                        selectedListIds = [];\r\n                                        unSelectedIds = [];\r\n                                    }\r\n                                },\r\n                            ],\r\n                        });\r\n                        popUpData.popUpElement.then(function (res) {\r\n                            if (ionic.Platform.isAndroid() == true)\r\n                                screen.orientation.unlock();\r\n                        });\r\n                    });\r\n                },\r\n            },\r\n        };\r\n        return popUpData;\r\n    },\r\n]);\r\n\r\napp.directive(\"damageSelector\", [\"$rootScope\", \"DeviceUtil\", function ($rootScope,) {\r\n    return {\r\n        restrict: \"AE\",\r\n        templateUrl: \"templates/VehicleDamage/damagePicker.html\",\r\n        link: function link(scope, element, attr, modelCtrl) {\r\n            if (ionic.Platform.isAndroid() == true)\r\n                screen.orientation.lock(\"portrait\");\r\n            scope.pickDamagePartVisually = function () {\r\n                scope.$emit(\"VisualDamage\", {});\r\n                var virtualEle = document.querySelector(\"damage-selector\");\r\n                if (virtualEle)\r\n                    virtualEle.style.display = \"none\";\r\n                var manualEle = document.querySelector(\"vehicle-damage\");\r\n                if (manualEle)\r\n                    manualEle.style.display = \"block\";\r\n\r\n                var elementOkButton = document.getElementsByClassName(\"DamageVisualSelectButton\");\r\n                if (elementOkButton.length > 0) {\r\n                    elementOkButton[0].classList.remove(\"DamageVisualSelectButton\");\r\n                }\r\n            };\r\n            scope.pickDamagePartManually = function () {\r\n                var virtualEle = document.querySelector(\"damage-selector\");\r\n                virtualEle.style.display = \"none\";\r\n                var manualEle = document.querySelector(\"vehicle-damage-list\");\r\n                manualEle.style.display = \"block\";\r\n                manualEle.style.position = \"relative\";\r\n                var elementOkButton = document.getElementsByClassName(\"DamageListSelectButton\");\r\n                if (elementOkButton.length > 0) {\r\n                    elementOkButton[0].classList.remove(\"DamageListSelectButton\");\r\n                }\r\n            };\r\n        },\r\n    };\r\n},\r\n]);\r\n\r\napp.directive(\"vehicleDamage\", [\"$rootScope\", \"ionicToast\", \"$timeout\",\r\n    function ($rootScope, ionicToast, $timeout) {\r\n        return {\r\n            restrict: \"AE\",\r\n            templateUrl: \"templates/VehicleDamage/damage.html\",\r\n            link: function link(scope, element, attr, modelCtrl) {\r\n                var preselectedarea = [];\r\n                var data = scope.columnsListSource;\r\n                if (scope.personAkStepColumnAnswer) {\r\n                    var selectedIds = scope.personAkStepColumnAnswer.AnswerText;\r\n                    if (selectedIds) {\r\n                        selectedIds = selectedIds.split(',');\r\n                        for (var i = 0; i < selectedIds.length; i++) {\r\n                            preselectedarea.push({\r\n                                key: selectedIds[i],\r\n                                selected: true,\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n\r\n                scope.$on(\"VisualDamage\", function () {\r\n                    $timeout(function () {\r\n                        ImageMap();\r\n                    }, 200);\r\n                });\r\n                function ImageMap() {\r\n                    var $sedanCar = $(\"#sedan\");\r\n\r\n                    $(document).ready(function () {\r\n                        var opts;\r\n                        var mapsterConfigured = function () {\r\n                            opts = $sedanCar.mapster(\"get_options\", null, true);\r\n                        };\r\n                        var handleCLick = function (e) {\r\n                            if (data.length > 0) {\r\n                                tosterText(e.key);\r\n                            }\r\n                        }\r\n\r\n                        function tosterText(key) {\r\n                            for (var i = 0; i < data.length; i++) {\r\n                                if (data[i].Id == key) {\r\n                                    return ionicToast.showDefault(data[i].Text);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        var default_options = {\r\n                            enableAutoResizeSupport: true,\r\n                            autoResize: true,\r\n                            autoResizeDelay: 0,\r\n                            autoResizeDuration: 0,\r\n                            resize: true,\r\n                            fillOpacity: 0.5,\r\n                            render_highlight: {\r\n                                fillColor: \"0075ff\",\r\n                                stroke: true,\r\n                            },\r\n                            render_select: {\r\n                                fillColor: \"ff000c\",\r\n                                stroke: false,\r\n                            },\r\n                            mouseoutDelay: 0,\r\n                            fadeInterval: 50,\r\n                            isSelectable: true,\r\n                            singleSelect: false,\r\n                            mapKey: \"data-id\",\r\n                            mapValue: \"data-text\",\r\n                            listKey: \"name\",\r\n                            listSelectedAttribute: \"checked\",\r\n                            onConfigured: mapsterConfigured,\r\n                            areas: preselectedarea,\r\n                            onClick: function (data) {\r\n                                $timeout(function () {\r\n                                    handleCLick(data);\r\n                                })\r\n                            }\r\n                        };\r\n\r\n                        $sedanCar.mapster(default_options);\r\n                    });\r\n                }\r\n            },\r\n        };\r\n    },\r\n]);\r\n\r\napp.directive('vehicleDamageList', [\"$rootScope\", \"ionicToast\", \"$ionicPlatform\", \"$cordovaNetwork\", \"LocalStorageHelper\", \"dropdownValueManager\", \"CommonMethodsFactory\", \"$ionicScrollDelegate\", \"LoaderService\", \"DeviceUtil\", function ($rootScope, ionicToast, $ionicPlatform, $cordovaNetwork, LocalStorageHelper, dropdownValueManager, CommonMethodsFactory, $ionicScrollDelegate, LoaderService, DeviceUtil) {\r\n    return {\r\n        restrict: 'AE',\r\n        templateUrl: 'templates/listPopUp.html',\r\n        scope: {\r\n            onItemSelected: '=itemselected',\r\n            datasource: '=',\r\n            textField: '=',\r\n            valueField: '=',\r\n            selectedDisplayText: '=',\r\n            selectedDataEntity: '=',\r\n            entity: '=',\r\n            entityText: '='\r\n        },\r\n        require: 'ngModel',\r\n        link: function link(scope, element, attr, modelCtrl) {\r\n            if (ionic.Platform.isAndroid() == true)\r\n                screen.orientation.lock(\"portrait\");\r\n            var eleScope = element.scope();\r\n            scope.dataTextField = eleScope[attr.textField];\r\n            scope.dataValueField = attr.valueField;\r\n            scope.dataSelectedTextField = attr.selectedDisplayText;\r\n            scope.isSmallScreenDevice = false;\r\n\r\n            scope.isQRCodeReaderEnabled = true;\r\n            scope.isSearchable = true;\r\n\r\n            scope.isAddVisible = false;\r\n            scope.AddText = $rootScope.getResourceText('LIT_MOBILE_ADD_ITEM');\r\n\r\n            var entityName = attr.entity;\r\n            scope.dataEntityText = attr.entityText;\r\n\r\n            var itemListName = attr.datasource;\r\n            var data = eleScope[itemListName];\r\n            var entity = eleScope[entityName];\r\n\r\n            scope.itemListData = data;\r\n\r\n            if (screen.height < 700) {\r\n                scope.isSmallScreenDevice = true;\r\n            }\r\n            $ionicPlatform.ready(function () {\r\n                scope.searchIcon = $rootScope.getIconValue('Search');\r\n                scope.closeIcon = $rootScope.getIconValue('Close');\r\n                scope.searchText = $rootScope.getResourceText('LIT_SEARCH');\r\n                scope.qrScannerIcon = $rootScope.getIconValue('Scanner');\r\n                scope.flipCameraIcon = $rootScope.getIconValue('Flip');\r\n                scope.flashCameraIcon = $rootScope.getIconValue('Flash');\r\n                scope.scannerCloseIcon = $rootScope.getIconValue('ScannerClose');\r\n            });\r\n\r\n\r\n            scope.showParentValueHeader = false;\r\n            scope.searchModel = { Text: \"\" };\r\n\r\n            var isDeviceOnline = $cordovaNetwork.isOnline();\r\n            var type = $cordovaNetwork.getNetwork();\r\n            isDeviceOnline = isDeviceOnline === true || type === \"unknown\";\r\n            scope.enableOnline = false;\r\n            scope.isOnlineSearch = false; // Below boolean variable is used to highlight web api returned values\r\n\r\n            scope.enableOnline = false; // If device is online, then enable online button in view or else disable.\r\n\r\n            if (isDeviceOnline) {\r\n                scope.isOnlineSearch = false;\r\n            }\r\n\r\n            scope.onlineVal = $rootScope.getResourceText('LIT_ONLINE');\r\n            scope.offlineVal = $rootScope.getResourceText('LIT_OFFLINE');\r\n\r\n            scope.updateIsOnlineSearch = function (isOnlineSearchValue) {\r\n                if (isDeviceOnline) {\r\n                    scope.isOnlineSearch = !isOnlineSearchValue;\r\n\r\n                    if (!scope.isOnlineSearch) {\r\n                        // Assigning local data from the mobile to datasource, when user toggles to offline search mode.\r\n                        scope.dataSource = itemList;\r\n                        scope.isOnlineDropDownData = false;\r\n                    }\r\n                } else {\r\n                    ionicToast.showDefault($rootScope.getResourceText('MSG_CHECK_INTERNET_CONNECTION'));\r\n                }\r\n            };\r\n\r\n\r\n            var maxCharLength = 3; // Method called when online search setting value is true\r\n\r\n            scope.callWebApi = function (searchText) {\r\n                LoaderService.hide();\r\n            };\r\n\r\n            scope.setCheckBoxVal = function (id, status) {\r\n                if (id) {\r\n                    scope.$emit(\"SelectedListId\", {\r\n                        Id: id,\r\n                        status: status\r\n                    })\r\n                }\r\n            }\r\n\r\n            scope.getDefaultStatus = function (id) {\r\n                if (entity && entity.AnswerText) {\r\n                    var selectedIds = entity.AnswerText.split(',');\r\n                    for (var i = 0; i < selectedIds.length; i++) {\r\n                        if (selectedIds[i] == id) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n\r\n            scope.clearSearch = function () {\r\n                scope.searchModel = { Text: \"\" };\r\n            };\r\n\r\n            scope.showFullValue = function () {\r\n                ionicToast.showDefault(scope.selectedText);\r\n            };\r\n\r\n            scope.closeKeyBoard = function () {\r\n                cordova.plugins.Keyboard.close();\r\n            };\r\n\r\n            scope.getItemWidthForWindow = function () {\r\n                return '100%';\r\n            };\r\n\r\n            scope.getDeviceHeight = function () {\r\n                return window.screen.height * window.devicePixelRatio;\r\n            };\r\n\r\n            scope.getItemHeightForWindow = function () {\r\n                var deviceHeight = window.screen.height * window.devicePixelRatio;\r\n                var isIOS = (ionic.Platform.isAndroid() == false);\r\n                if (isIOS) {\r\n                    if (deviceHeight <= 960) {\r\n                        return '150px';\r\n                    } else {\r\n                        return '300px';\r\n                    }\r\n                } else {\r\n                    if (deviceHeight <= 500) {\r\n                        return '50px';\r\n                    } else if (deviceHeight <= 750) {\r\n                        return '65px';\r\n                    } else if (deviceHeight <= 1000) {\r\n                        return '260px';\r\n                    } else {\r\n                        return '300px';\r\n                    }\r\n                }\r\n            };\r\n\r\n            scope.getPlatformSpecificTemplate = function () {\r\n                //If it doesnt work properly in iOS need to add this below code with iOS specific template\r\n                // Currently handling only for IOS and Android\r\n                //var isIOS = (ionic.Platform.isAndroid() == false);\r\n                //if (isIOS) {\r\n                //    return 'templates/VehicleDamage/AndroidVehicleDamageList.html';\r\n                //} else {\r\n                //    return 'templates/VehicleDamage/AndroidVehicleDamageList.html';\r\n                //}\r\n                return 'templates/VehicleDamage/AndroidVehicleDamageList.html';\r\n            };\r\n\r\n            scope.getItemHeight = function (item) {\r\n                var valueField = item[scope.dataTextField];\r\n\r\n                if (valueField == undefined) {\r\n                    valueField = '';\r\n                }\r\n\r\n                var length = valueField.length;\r\n                var height = length * 1.5;\r\n\r\n                if (height < 40) {\r\n                    height = 40;\r\n                }\r\n\r\n                return height + 'px';\r\n            };\r\n\r\n            scope.showCompleteItemText = function (item) {\r\n                ionicToast.showDefault(item.Text);\r\n            };\r\n\r\n            scope.openScanner = function () {\r\n                //when scanner icon is clickd multiple times then if loop fails and loads previously \r\n                //loaded values from else loop this prevents from calling document.queryselector every time when scan icon is \r\n                //clicked\r\n                cordova.plugins.Keyboard.close();\r\n                if (scope.scanItems === null || scope.scanItems === undefined) {\r\n                    var popupView = document.querySelector(\".popup-container\");\r\n                    var mainView = document.querySelector(\".scannerView\");\r\n                    var scannerButton = document.querySelector(\".scannerButtons\");\r\n                    var cancle = document.querySelector(\".cancleScan\");\r\n                    var flash = document.querySelector(\".flashCam\");\r\n                    var flipCamera = document.querySelector(\".flipCam\");\r\n                    var readInputVal = document.querySelector(\".searchTextVal\");\r\n                    var dropDownPosition = document.querySelector(\".lazyDropDownPositionFix\");\r\n                    var androidView = document.querySelector(\".platform-android\");\r\n\r\n                    scope.scanItems = {\r\n                        popupContainer: popupView,\r\n                        scannerView: mainView,\r\n                        scannerButton: scannerButton,\r\n                        cancleButton: cancle,\r\n                        flashCamera: flash,\r\n                        flipCamera: flipCamera,\r\n                        read: readInputVal,\r\n                        bodyPosition: dropDownPosition,\r\n                        androidView: androidView\r\n                    };\r\n                } else {\r\n                    var popupView = scope.scanItems.popupContainer;\r\n                    var mainView = scope.scanItems.scannerView;\r\n                    var scannerButton = scope.scanItems.scannerButton;\r\n                    var cancle = scope.scanItems.cancleButton;\r\n                    var flash = scope.scanItems.flashCamera;\r\n                    var flipCamera = scope.scanItems.flipCamera;\r\n                    var readInputVal = scope.scanItems.read;\r\n                    var dropDownPosition = scope.scanItems.bodyPosition;\r\n                }\r\n\r\n                //blur is added because the Keyboard gets shown when scanning\r\n                //readInputVal.blur();\r\n\r\n                //the back button handled for android using an backbutton event\r\n                document.addEventListener('backbutton', function () {\r\n                    if (androidView)\r\n                        androidView.style.setProperty(\"background-color\", \"var(--statusbar-bg-color, #2c3445)\", \"important\");\r\n                    mainView.style.visibility = \"visible\";\r\n                    dropDownPosition.style.setProperty(\"position\", \"relative\");\r\n                    scannerButton.style.setProperty(\"visibility\", \"hidden\", \"important\");\r\n                });\r\n\r\n                window.QRScanner.prepare(onDone);\r\n\r\n                function onDone(err, status) {\r\n                    if (err) {\r\n                        console.error(err);\r\n                    }\r\n                    if (status.authorized) {\r\n                        //cancle camera is handled here\r\n                        cancle.addEventListener(\"click\", function () {\r\n                            if (status.lightEnabled === true) {\r\n                                window.QRScanner.disableLight(function () {\r\n                                    status.lightEnabled = false;\r\n                                });\r\n                            }\r\n                            window.QRScanner.cancelScan();\r\n                        });\r\n\r\n                        //flash light is handled here\r\n                        flash.addEventListener(\"click\", function () {\r\n                            if (status.lightEnabled === false) {\r\n                                window.QRScanner.enableLight(function () {\r\n                                    status.lightEnabled = true;\r\n                                });\r\n                            } else {\r\n                                window.QRScanner.disableLight(function () {\r\n                                    status.lightEnabled = false;\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                        //camera fip is handled here\r\n                        flipCamera.addEventListener('click', function () {\r\n                            if (status.currentCamera === 0) {\r\n                                window.QRScanner.useFrontCamera(function () {\r\n                                    status.currentCamera = 1;\r\n                                });\r\n                            } else {\r\n                                window.QRScanner.useBackCamera(function () {\r\n                                    status.currentCamera = 0;\r\n                                });\r\n                            }\r\n                        })\r\n\r\n                        //when the scanner is get called the popupview and the body both will be made hidden and the buttons will be made visible\r\n                        if (androidView)\r\n                            androidView.style.setProperty(\"background-color\", \"transparent\", \"important\");\r\n                        popupView.style.visibility = \"hidden\";\r\n                        mainView.style.visibility = \"hidden\";\r\n                        dropDownPosition.style.setProperty(\"position\", \"\");\r\n                        scannerButton.style.setProperty(\"visibility\", \"visible\", \"important\");\r\n                        window.QRScanner.show(function () {\r\n                            window.QRScanner.scan(displayContents);\r\n                        });\r\n                    }\r\n                }\r\n\r\n                function displayContents(err, text) {\r\n                    if (err) {\r\n                        // when the cancle event is gets triggered error loop will be called\r\n                        if (err.name === \"SCAN_CANCELED\") {\r\n                            //the popupView and body will be set back t0 visible and the buttons to hidden\r\n                            if (androidView)\r\n                                androidView.style.setProperty(\"background-color\", \"var(--statusbar-bg-color, #2c3445)\", \"important\");\r\n                            popupView.style.visibility = \"visible\";\r\n                            mainView.style.visibility = \"visible\";\r\n                            dropDownPosition.style.setProperty(\"position\", \"relative\");\r\n                            scannerButton.style.setProperty(\"visibility\", \"hidden\", \"important\");\r\n                            // destroy is called because it will close the camera/video preview\r\n                            window.QRScanner.destroy();\r\n                        } else {\r\n                            console.error(err._message);\r\n                        }\r\n                    } else {\r\n                        //if in case the light is on after scanning the below method will off the flash lisht\r\n                        window.QRScanner.disableLight();\r\n                        //and the popupView and body will be set back t0 visible and the buttons to hidden\r\n                        if (androidView)\r\n                            androidView.style.setProperty(\"background-color\", \"var(--statusbar-bg-color, #2c3445)\", \"important\");\r\n                        popupView.style.visibility = \"visible\";\r\n                        mainView.style.visibility = \"visible\";\r\n                        dropDownPosition.style.setProperty(\"position\", \"relative\");\r\n                        scannerButton.style.setProperty(\"visibility\", \"hidden\", \"important\");\r\n                        window.QRScanner.destroy();\r\n                        scope.searchModel = { Text: \"\" };\r\n                        //scanned data is passed to call the webapi\r\n                        readInputVal.focus();\r\n                        scope.searchModel[scope.dataTextField] = text;\r\n                        scope.callWebApi(scope.searchModel);\r\n                    }\r\n                }\r\n            };\r\n\r\n            $rootScope.checkDependency = function () {\r\n                scope.handleDependency();\r\n            }\r\n\r\n            scope.handleDependency = function () {\r\n                if (!angular.isUndefined(scope.onItemSelected)) {\r\n                    scope.onItemSelected();\r\n                }\r\n            }\r\n        }\r\n    };\r\n}]);\r\n\r\napp.directive('assetScanner', [\"QuestionnaireUtility\", \"PopupUtil\", \"LoaderService\", \"userDetailsManager\", \"userApplicationsManager\", \"$rootScope\", \"FileUtil\", \"DocumentLibraryUtil\", \"CommonMethodsFactory\",\r\n    function (QuestionnaireUtility, PopupUtil, LoaderService, userDetailsManager, userApplicationsManager, $rootScope, FileUtil, DocumentLibraryUtil, CommonMethodsFactory) {\r\n        return {\r\n            restrict: 'A',\r\n            template: '<button class=\"scanCamCss button notificationIcon button-clear\" ng-click=\"openScanner()\"><img src=\"images/qrcode-wh.png\" /></button>',\r\n            link: function (scope, element, attrs) {\r\n                scope.code = null;\r\n                scope.isSmallScreenDevice = false;\r\n                scope.assetScanItems = null;\r\n                scope.popup = null;\r\n                scope.title = null;\r\n                scope.headerColor = \"rgb(104, 33, 122)\";\r\n                scope.showList = true;\r\n                scope.isDocOpened = false;\r\n                scope.isDocReadyForSign = false;\r\n                scope.currentOpenedDoc = null;\r\n                scope.signatureVal = {\r\n                    IsDoneSign: false,\r\n                    ShowButton: false\r\n                };\r\n                scope.postData = {\r\n                    assetId: null,\r\n                    qrCodeFieldValue: null,\r\n                    documentVersionId: null,\r\n                    userId: null,\r\n                    signatureImage: null,\r\n                    signedDate: null,\r\n                    comment: null\r\n                };\r\n                scope.directiveScope = null;\r\n                scope.DocSignedList = [];\r\n                scope.DocToBeSignedList = [];\r\n                scope.DocNoSignList = [];\r\n                scope.toogleList = {\r\n                    showSigned: false,\r\n                    showToSign: true,\r\n                    showNoSIgn: false\r\n                }\r\n\r\n                scope.userDetails = userDetailsManager.getUserLastLoggedTimeStamp();\r\n                scope.userApplicationsDetails = userApplicationsManager.getUserApplications(scope.userDetails.UserId);\r\n\r\n                for (var i = 0; i < scope.userApplicationsDetails.length; i++) {\r\n                    if (scope.userApplicationsDetails[i].Text == 'DocumentLibrary') scope.headerColor = scope.userApplicationsDetails[i].ColourCode;\r\n                }\r\n\r\n                if (screen.height < 700) {\r\n                    scope.isSmallScreenDevice = true;\r\n                }\r\n\r\n                scope.open = function () {\r\n                    scope.showList = false;\r\n                    scope.isDocOpened = true;\r\n                }\r\n\r\n                scope.getItemHeightForWindow = function () {\r\n                    var deviceHeight = window.screen.height * window.devicePixelRatio;\r\n                    var isIOS = (ionic.Platform.isAndroid() == false);\r\n                    if (isIOS) {\r\n                        if (deviceHeight <= 960) {\r\n                            return '150px';\r\n                        } else {\r\n                            return '300px';\r\n                        }\r\n                    } else {\r\n                        if (deviceHeight <= 500) {\r\n                            return '50px';\r\n                        } else if (deviceHeight <= 750) {\r\n                            return '65px';\r\n                        } else if (deviceHeight <= 1000) {\r\n                            return '260px';\r\n                        } else {\r\n                            return '300px';\r\n                        }\r\n                    }\r\n                };\r\n\r\n\r\n                scope.openScanner = function () {\r\n                    /*document.body.style.backgroundColor = \"transparent\";\r\n                    var assetScannerButton = document.querySelector(\".assetScannerButtons\");\r\n                    var assetCancle = document.querySelector(\".assetCancleScan\");\r\n                    var assetFlash = document.querySelector(\".assetFlashCam\");\r\n                    window.QRScanner.prepare(function () {\r\n                        document.body.style.visibility = \"hidden\";\r\n                        assetScannerButton.style.setProperty(\"visibility\", \"visible\", \"important\");\r\n                        assetCancle.style.setProperty(\"visibility\", \"visible\", \"important\");\r\n                        assetFlash.style.setProperty(\"visibility\", \"visible\", \"important\");\r\n                        window.QRScanner.show();\r\n                    });*/\r\n\r\n                    //document.body.style.backgroundColor = \"transparent\";\r\n                    document.body.style.setProperty(\"background-color\", \"transparent\", \"important\");\r\n                    var assetScannerButton = document.querySelector(\".assetScannerButtons\");\r\n                    var assetCancle = document.querySelector(\".assetCancleScan\");\r\n                    var assetFlash = document.querySelector(\".assetFlashCam\");\r\n                    var scannerView = document.querySelector(\".scannerView\");\r\n\r\n                    window.QRScanner.prepare(function (err, status) {\r\n\r\n\r\n                        document.body.style.visibility = \"hidden\";\r\n                        assetScannerButton.style.setProperty(\"visibility\", \"visible\", \"important\");\r\n                        scannerView.style.setProperty(\"visibility\", \"hidden\", \"important\");\r\n                        assetCancle.style.setProperty(\"visibility\", \"visible\", \"important\");\r\n                        assetFlash.style.setProperty(\"visibility\", \"visible\", \"important\");\r\n\r\n\r\n                        if (status.authorized) {\r\n                            assetCancle.addEventListener(\"click\", function () {\r\n                                if (status.lightEnabled === true) {\r\n                                    window.QRScanner.disableLight(function () {\r\n                                        status.lightEnabled = false;\r\n                                    });\r\n                                }\r\n                                window.QRScanner.cancelScan();\r\n                            });\r\n\r\n                            assetFlash.addEventListener(\"click\", function () {\r\n                                if (status.lightEnabled === false) {\r\n                                    window.QRScanner.enableLight(function () {\r\n                                        status.lightEnabled = true;\r\n                                    });\r\n                                } else {\r\n                                    window.QRScanner.disableLight(function () {\r\n                                        status.lightEnabled = false;\r\n                                    });\r\n                                }\r\n                            });\r\n\r\n                            window.QRScanner.show(function () {\r\n                                window.QRScanner.scan(function (err, text) {\r\n                                    if (err) {\r\n                                        // when the cancle event is gets triggered error loop will be called\r\n                                        if (err.name === \"SCAN_CANCELED\") {\r\n                                            window.QRScanner.destroy();\r\n                                        } else {\r\n                                            console.error(err._message);\r\n                                        }\r\n                                    } else {\r\n                                        //if in case the light is on after scanning the below method will off the flash lisht\r\n                                        window.QRScanner.disableLight();\r\n                                        window.QRScanner.destroy();\r\n\r\n                                        scope.code = getCode(text);\r\n                                        scope.callWebApi(btoa(scope.code));\r\n                                    }\r\n\r\n                                    document.body.style.setProperty(\"background-color\", \"var(--statusbar-bg-color, #2c3445)\", \"important\");\r\n                                    document.body.style.visibility = \"visible\";\r\n                                    scannerView.style.setProperty(\"visibility\", \"visible\", \"important\");\r\n                                    assetScannerButton.style.setProperty(\"visibility\", \"hidden\", \"important\");\r\n                                    assetCancle.style.setProperty(\"visibility\", \"hidden\", \"important\");\r\n                                    assetFlash.style.setProperty(\"visibility\", \"hidden\", \"important\");\r\n                                });\r\n                            });\r\n                        }\r\n\r\n                    });\r\n\r\n                };\r\n\r\n                function getCode(text) {\r\n                    if (text.split('documentscan').length > 1)\r\n                        return atob(decodeURIComponent(text.split('scan/')[1])).split('=')[1]\r\n                    else return text;\r\n                }\r\n\r\n                var popupListener = $rootScope.$on(\"ShowAssetPopUp\", function (event, data) {\r\n                    var code = data.code;\r\n                    if ($rootScope.ShowAssetPopUp) {\r\n                        $rootScope.ShowAssetPopUp = false;\r\n                        scope.callWebApi(btoa(code));\r\n                    }\r\n                });\r\n\r\n                var destroListener = scope.$on('$destroy', function () {\r\n                    popupListener();\r\n                    destroListener();\r\n                });\r\n\r\n\r\n                scope.callWebApi = function (code) {\r\n                    LoaderService.show();\r\n                    CommonMethodsFactory.getScannedDocuments(code, scope);\r\n                };\r\n\r\n                scope.ReadAgain = function () {\r\n                    scope.openDoc(scope.currentOpenedDoc);\r\n                }\r\n\r\n                scope.openFile = function (file) {\r\n                    scope.openDoc(file);\r\n                    if (!file.isChecked && !file.IsSigned && file.IsAllowedToSign) {\r\n                        scope.currentOpenedDoc = file;\r\n                        scope.currentOpenedDoc.isChecked = true;\r\n                        scope.currentOpenedDoc.IsSigned = true;\r\n                        scope.currentOpenedDoc.IsAllowedToSign = false;\r\n                        scope.showList = false;\r\n                        scope.isDocOpened = true;\r\n                    }\r\n                }\r\n\r\n                scope.filterData = function () {\r\n                    for (var i = 0; i < scope.files.length; i++) {\r\n                        var file = scope.files[i];\r\n                        if (file.IsSigned == undefined && file.IsAllowedToSign == undefined) scope.DocToBeSignedList.push(file);\r\n                        if (file.IsSigned && !file.IsAllowedToSign) scope.DocSignedList.push(file);\r\n                        if (!file.IsSigned && file.IsAllowedToSign) scope.DocToBeSignedList.push(file);\r\n                        if (!file.IsSigned && !file.IsAllowedToSign) scope.DocNoSignList.push(file);\r\n                    }\r\n                    scope.files = [];\r\n                }\r\n\r\n                scope.filterSignData = function (file) {\r\n                    scope.DocSignedList.push(file);\r\n                    for (var i = 0; i < scope.DocToBeSignedList.length; i++) {\r\n                        if (scope.DocToBeSignedList[i].Id == file.Id) {\r\n                            scope.DocToBeSignedList.splice(i, 1);\r\n                        }\r\n                    }\r\n\r\n                    if (scope.DocToBeSignedList.length == 0) scope.toogleList.showSigned = true;\r\n                }\r\n\r\n                scope.toggleGroup = function (type) {\r\n                    switch (type) {\r\n                        case \"Signed\":\r\n                            toogle(!scope.toogleList.showSigned, false, false);\r\n                            break;\r\n                        case \"ToBeSigned\":\r\n                            toogle(false, !scope.toogleList.showToSign, false);\r\n                            break;\r\n                        case \"NoSign\":\r\n                            toogle(false, false, !scope.toogleList.showNoSIgn);\r\n                            break;\r\n                    }\r\n                }\r\n\r\n                function toogle(showSigned, showToSign, showNoSIgn) {\r\n                    scope.toogleList.showSigned = showSigned;\r\n                    scope.toogleList.showToSign = showToSign;\r\n                    scope.toogleList.showNoSIgn = showNoSIgn;\r\n                }\r\n\r\n                scope.closePopUp = function () {\r\n                    scope.showList = true;\r\n                    scope.isDocOpened = false;\r\n                    scope.isDocReadyForSign = false;\r\n                    scope.postData.signatureImage = null;\r\n                    scope.DocSignedList = [];\r\n                    scope.DocToBeSignedList = [];\r\n                    scope.DocNoSignList = [];\r\n                    scope.popup.close();\r\n                }\r\n\r\n                scope.getTitle = function () {\r\n                    return scope.title;\r\n                }\r\n\r\n                scope.cancle = function () {\r\n                    scope.currentOpenedDoc.isChecked = false;\r\n                    scope.currentOpenedDoc.IsSigned = false;\r\n                    scope.currentOpenedDoc.IsAllowedToSign = true;\r\n                    scope.showList = true;\r\n                    scope.isDocOpened = false;\r\n                    scope.isDocReadyForSign = false;\r\n                    scope.postData.signatureImage = null;\r\n                }\r\n\r\n                scope.showSign = function () {\r\n                    scope.isDocOpened = false;\r\n                    scope.isDocReadyForSign = true;\r\n                }\r\n\r\n                scope.getImageIcon = function (docCode) {\r\n                    switch (docCode) {\r\n                        case 'Link':\r\n                            return $rootScope.getIconValue('LinkOutline');\r\n\r\n                        case 'HTML':\r\n                            return $rootScope.getIconValue('Html');\r\n\r\n                        case 'File':\r\n                            return $rootScope.getIconValue('Document');\r\n\r\n                        default:\r\n                            return '';\r\n                    }\r\n                }\r\n\r\n                scope.isBackgroundDownloadLink = function (docItem) {\r\n                    return (docItem.LinkName && docItem.LinkName.length > 0 && docItem.Link && docItem.Link.length > 0);\r\n                };\r\n\r\n                scope.isOnlineDownloadLink = function (docItem) {\r\n                    return !scope.isBackgroundDownloadLink(docItem);\r\n                };\r\n\r\n                scope.getImageBase64 = function (signVal) {\r\n                    scope.signatureVal.IsDoneSign = true;\r\n                    scope.postData.signatureImage = signVal;\r\n                }\r\n\r\n                scope.setDirective = function (drtFun, instance) {\r\n                    scope.directiveScope = drtFun;\r\n                }\r\n\r\n                scope.save = function () {\r\n\r\n                    scope.directiveScope();\r\n\r\n                    if (scope.postData.signatureImage) {\r\n                        scope.postData.assetId = scope.currentOpenedDoc.RelatedId;\r\n                        scope.postData.documentVersionId = scope.currentOpenedDoc.Id;\r\n                        scope.postData.userId = scope.userDetails.UserId;\r\n                        scope.postData.qrCodeFieldValue = scope.code;\r\n                        scope.postData.signedDate = new Date();\r\n                        LoaderService.show();\r\n                        var postPromise = QuestionnaireUtility.postDocumentSign('asset', scope.postData);\r\n                        postPromise.then(\r\n                            function (success) {\r\n                                LoaderService.hide();\r\n                                scope.showList = true;\r\n                                scope.isDocOpened = false;\r\n                                scope.isDocReadyForSign = false;\r\n                                scope.postData.signatureImage = null;\r\n                                scope.filterSignData(scope.currentOpenedDoc);\r\n                            },\r\n                            function (error) {\r\n                                LoaderService.hide();\r\n                                console.log(error);\r\n                            }\r\n                        );\r\n                    } else {\r\n                        var errMessage = $rootScope.getResourceText(\"MSG_MOBILE_DOCUMENT_SIGN_ERROR\");\r\n                        var title = $rootScope.getResourceText(\"LIT_ERROR\");\r\n                        PopupUtil.alert(title, errMessage);\r\n                    }\r\n\r\n                }\r\n\r\n                scope.openDoc = function (file) {\r\n                    console.log(file);\r\n\r\n                    switch (file.DocumentTypeCode) {\r\n                        case \"Link\":\r\n                            DocumentLibraryUtil.download(file);\r\n                            break;\r\n\r\n                        case \"HTML\":\r\n                            LoaderService.hide();\r\n                            DocumentLibraryUtil.openHtmlDocument(file, scope);\r\n                            break;\r\n\r\n                        case \"File\":\r\n                            FileUtil.openFile(file.DeviceFilePath, file.Type);\r\n                            break;\r\n\r\n                        default:\r\n                            return null;\r\n                    }\r\n                }\r\n\r\n                scope.getList = function () {\r\n                    return 'templates/asset_document_templates/list.html';\r\n                }\r\n\r\n                scope.getPlatformSpecificTemplate = function () {\r\n                    // Currently handling only for IOS and Android\r\n                    var isIOS = (ionic.Platform.isAndroid() == false);\r\n                    if (isIOS) {\r\n                        return 'templates/asset_document_templates/IosTemplate.html';\r\n                    }\r\n                    else {\r\n                        return 'templates/asset_document_templates/AndroidTemplate.html';\r\n                    }\r\n\r\n                };\r\n            }\r\n        };\r\n    }]);\r\n\r\napp.directive('fileUploader', [\"$rootScope\", \"$q\", function ($rootScope, $q) {\r\n    return {\r\n        restrict: \"E\",\r\n        templateUrl: \"templates/fileUploader.html\",\r\n        scope: {\r\n            upload: '=',\r\n            attachments: '=',\r\n            extensions: '@',\r\n            mod: '@',\r\n            entity: '='\r\n        },\r\n        link: function link($scope, $element, attr, modelCtrl) {\r\n            $scope.SelectFileText = $rootScope.getResourceText('LIT_MOBILE_SELECT_FILE');\r\n            $scope.FolderIcon = $rootScope.getIconValue('Folder');\r\n\r\n            var labelEle = $element.find('.fileSelectorLabel');\r\n            var divEle = $element.find(\".fileUploadBlock\");\r\n            labelEle.bind('click', function () {\r\n                switch ($scope.mod) {\r\n                    case 'askade':\r\n                        if ($scope.attachments && $scope.attachments.filter(a => a.FilePath === null).length > 0) {\r\n                            $element.find('input')[0].click();\r\n                            divEle[0].style.display = \"flex\";\r\n                        }\r\n                        else $scope.upload(false);\r\n                        break;\r\n                    default:\r\n                        $element.find('input')[0].click();\r\n                        divEle[0].style.display = \"flex\";\r\n                        break;\r\n                }\r\n            });\r\n\r\n            $scope.UploadFile = function () {\r\n                var deferedPromise = $q.defer();\r\n                var inputEle = $element.find('input');\r\n\r\n                if (inputEle.length > 0) {\r\n                    var file = inputEle[0].files[0];\r\n                    if (file) {\r\n                        var extension = file.type.split('/')[1];\r\n                        if ($scope.extensions != null && $scope.extensions.includes(extension)) {\r\n                            var reader = new FileReader();\r\n                            reader.readAsArrayBuffer(file);\r\n                            reader.onloadend = readerSuccess;\r\n\r\n                            function readerSuccess(event) {\r\n\r\n                                var isIPad = ionic.Platform.isIPad();\r\n                                var isIOS = ionic.Platform.isIOS();\r\n                                var isAndroid = ionic.Platform.isAndroid();\r\n                                var directoryToPath = \"\";\r\n\r\n                                var blob = new Blob([new Uint8Array(reader.result)], { type: file.type });\r\n                                if (isIPad || isIOS) {\r\n                                    directoryToPath = cordova.file.dataDirectory;\r\n                                } else if (isAndroid) {\r\n                                    directoryToPath = cordova.file.externalDataDirectory;\r\n                                }\r\n\r\n                                var size = blob.size;\r\n\r\n                                window.resolveLocalFileSystemURL(directoryToPath, function (fs) {\r\n\r\n                                    var extension = `.${file.type.split('/')[1]}`;\r\n                                    var fileObj = file.name.split(extension);\r\n                                    var fileName = fileObj[0] + new Date().getTime() + extension;\r\n\r\n                                    fs.getFile(fileName, { create: true, exclusive: false }, function (fileEntry) {\r\n                                        fileEntry.createWriter(function (writer) {\r\n                                            writer.onwriteend = function (e) {\r\n                                                deferedPromise.resolve(e.target.localURL);\r\n                                                inputEle[0].value = \"\";\r\n                                                divEle[0].style.display = \"none\";\r\n                                            };\r\n\r\n                                            writer.onerror = function (e) {\r\n                                                deferedPromise.reject(\"NOT VALID EXTENSION\");\r\n                                            };\r\n\r\n                                            writer.write(blob);\r\n                                        });\r\n                                    });\r\n                                })\r\n                            }\r\n                        }\r\n                        else\r\n                            deferedPromise.reject(\"NOT VALID EXTENSION\");\r\n                    } else deferedPromise.reject();\r\n\r\n                    deferedPromise.promise.then((success) => {\r\n                        UploadToThatMod(success, null);\r\n                    }, (error) => {\r\n                        UploadToThatMod(null, error);\r\n                    })\r\n                }\r\n            }\r\n\r\n            function UploadToThatMod(success, error) {\r\n                switch ($scope.mod) {\r\n                    case \"askade\":\r\n                        if (success) $scope.upload(true, success);\r\n                        else $scope.upload(true, null);\r\n                        break;\r\n                    case \"apv\":\r\n                        if (success) $scope.upload(true, $scope.entity, success);\r\n                        else $scope.upload(true, $scope.entity, null);\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}]);","\"use strict\";\n\n(function () {\n  var app = angular.module(\"questionnaire\", [\n    \"EntityUtils\",\n    \"LocalStorageUtils\",\n    \"directives\",\n    \"commonUtils\",\n    \"ionic-toast\",\n    \"Modal-Popup\",\n    \"Camera-Gallery\",\n    \"factoryService\",\n    \"commonMethods\",\n    \"commonUtils\",\n  ]);\n  app.factory(\"$exceptionHandler\", [\n    \"$injector\",\n    function ($injector) {\n      return function (exception, cause) {\n        var localStorageUtility = $injector.get(\"LocalStorageUtility\");\n        localStorageUtility.addExceptionToLogTable(exception, cause);\n        var rScope = $injector.get(\"$rootScope\");\n        rScope.$broadcast(\"exceptionRefresh\", exception, cause);\n      };\n    },\n  ]);\n  app\n    .config([\n      \"$ionicConfigProvider\",\n      function ($ionicConfigProvider) {\n        $ionicConfigProvider.views.maxCache(0);\n      },\n    ])\n    .run([\n      \"LocalStorageHelper\",\n      \"$cordovaSplashscreen\",\n      \"LocalStorageUtility\",\n      \"customersManager\",\n      \"$rootScope\",\n      \"resourceLanguageManager\",\n      \"iconsManager\",\n      \"$cordovaNetwork\",\n      \"questionnaireManager\",\n      \"personQuestionnaireManager\",\n      \"$timeout\",\n      \"actionPlanWizardManager\",\n      \"personApwManager\",\n      \"ionicToast\",\n      \"Restangular\",\n      \"userDetailsManager\",\n      \"userApplicationsManager\",\n      \"personAskadeFileTypeWizardManager\",\n      \"LoaderService\",\n      \"FileUtil\",\n      \"$ionicPlatform\",\n      \"$cordovaDeeplinks\",\n      \"$state\",\n      \"$ionicHistory\",\n      \"AuthenticationService\",\n      \"ResetPoolUtil\",\n      \"PopupUtil\",\n      \"CommonMethodsFactory\",\n      \"documentLibraryManager\",\n      \"favoritesManager\",\n      \"DeviceUtil\",\n      \"$q\",\n      \"HomeScreenUtil\",\n      \"ToggleUrlMethodFactory\",\n      \"AppMessages\",\n      function (\n        LocalStorageHelper,\n        $cordovaSplashscreen,\n        LocalStorageUtility,\n        customersManager,\n        $rootScope,\n        resourceLanguageManager,\n        iconsManager,\n        $cordovaNetwork,\n        questionnaireManager,\n        personQuestionnaireManager,\n        $timeout,\n        actionPlanWizardManager,\n        personApwManager,\n        ionicToast,\n        Restangular,\n        userDetailsManager,\n        userApplicationsManager,\n        personAskadeFileTypeWizardManager,\n        LoaderService,\n        FileUtil,\n        $ionicPlatform,\n        $cordovaDeeplinks,\n        $state,\n        $ionicHistory,\n        AuthenticationService,\n        ResetPoolUtil,\n        PopupUtil,\n        CommonMethodsFactory,\n        documentLibraryManager,\n        favoritesManager,\n        DeviceUtil,\n        $q,\n        HomeScreenUtil,\n        ToggleUrlMethodFactory,\n        AppMessages\n      ) {\n        $rootScope.getInternalUrl = function getInternalUrl(imgUri) {\n          var prom = $q.defer();\n          window.resolveLocalFileSystemURL(imgUri, function success(fileEntry) {\n            if (ionic.Platform.isAndroid() === true)\n              return prom.resolve(window.Ionic.WebView.convertFileSrc(imgUri));\n            var resolvedInteralUrl = fileEntry.toInternalURL();\n            prom.resolve(resolvedInteralUrl);\n          });\n          return prom.promise;\n        };\n\n        document.addEventListener(\"deviceready\", function () {\n          if (\n            window.device.platform != \"Android\" &&\n            IonicDeeplink.notifyWebReady\n          ) {\n            IonicDeeplink.notifyWebReady(function (success) {\n              console.log(\"From Deeplink\", success);\n            });\n          }\n        });\n\n        window.handleDeepLink = function (routePayload) {\n          setTimeout(function () {\n            if (routePayload && routePayload.originalURL) {\n              LoaderService.show();\n              var link = routePayload.originalURL;\n              if (link && link.split(\"applink/\").length > 1) {\n                var token = link.split(\"applink/\")[1];\n                var code = null;\n                if (token.split(\"?code=\").length > 1) {\n                  code = token.split(\"?code=\")[1];\n                  token = token.split(\"?code=\")[0];\n                }\n                if (code) {\n                  code = atob(code);\n                  DeviceUtil.setKeyValueWithSharedPreferences(\n                    \"scannedCode\",\n                    code\n                  );\n                  $rootScope.ShowAssetPopUp = true;\n                }\n                if (token) {\n                  $rootScope.$emit(\"CallParentMethod\", {\n                    data: token,\n                    shouldShowToaster: true,\n                  });\n                }\n                if (link.split(\"?geo=\").length > 1) {\n                  var geoData = link.split(\"?geo=\")[1];\n                  $rootScope.$emit(\"getGeoLocationValues\", { data: geoData });\n                }\n              }\n            }\n          }, 500);\n        };\n\n        $ionicPlatform.ready(function () {\n          //DeviceUtil.setKeyValueWithSharedPreferences('CustomerURL', 'https://test.safetynet.dk/Carlsberg_SIT');\n          var initDbPromise = LocalStorageHelper.initDb();\n\n          var isIPad = ionic.Platform.isIPad();\n          var isIOS = ionic.Platform.isIOS();\n\n          //cordova.plugins.Keyboard.disableScroll(false);\n          $rootScope.getResourceText = function (resourceId) {\n            var resourceText =\n              resourceLanguageManager.getResourceById(resourceId);\n\n            if (\n              resourceText.ResourceText === null ||\n              angular.isUndefined(resourceText.ResourceText)\n            ) {\n              var defaultText = resourceText.DefaultText;\n\n              if (defaultText === null || angular.isUndefined(defaultText)) {\n                return resourceText.ResourceId;\n              } else {\n                return defaultText;\n              }\n            } else {\n              return resourceText.ResourceText;\n            }\n          };\n\n          $rootScope.getIconValue = function (id) {\n            try {\n              return iconsManager.getIcon(id);\n            } catch (error) {}\n          };\n\n          $rootScope.onOrientationChangeForCalender = function () {\n            if (ionic.Platform.isAndroid() === true) {\n              screen.orientation.lock(\"portrait\");\n            }\n          };\n\n          $rootScope.closeLoader = function () {\n            LoaderService.hide();\n          };\n\n          // Below code needs to be removed in the next release..\n          var isFreshInstall = window.localStorage.getItem(\"isFreshInstall\");\n          var loginRedirect = window.localStorage.getItem(\"loginRedirect\");\n          var token = window.localStorage.getItem(\"token\");\n          var AppDetails = window.localStorage.getItem(\"AppDetails\");\n\n          window.localStorage.removeItem(\"documentLibraryDownloadInStarted\");\n          window.localStorage.removeItem(\n            \"documentLibraryDownloadInProgressList\"\n          );\n\n          var isRedirectToWelcome = false;\n          var toBeUpdatedBuild =\n            isFreshInstall !== null ||\n            loginRedirect != null ||\n            token != null ||\n            AppDetails != null;\n          if (toBeUpdatedBuild === true) {\n            isFreshInstall = isFreshInstall === null ? true : isFreshInstall;\n            isFreshInstall = true;\n\n            var setInstallProm = DeviceUtil.setKeyValueWithSharedPreferences(\n              \"isFreshInstall\",\n              isFreshInstall\n            );\n            setInstallProm.then(function () {\n              window.localStorage.removeItem(\"isFreshInstall\");\n              if (ionic.Platform.isAndroid() === true) {\n                screen.orientation.lock(\"portrait\");\n              }\n              isRedirectToWelcome = true;\n              $state.go(\"welcome\");\n            });\n\n            loginRedirect = loginRedirect === null ? \"false\" : loginRedirect;\n            var setLoginRedirectProm =\n              DeviceUtil.setKeyValueWithSharedPreferences(\n                \"loginRedirect\",\n                loginRedirect\n              );\n            setLoginRedirectProm.then(function () {\n              window.localStorage.removeItem(\"loginRedirect\");\n            });\n\n            if (token !== null) {\n              var tokenSharedProm = DeviceUtil.setKeyValueWithSharedPreferences(\n                \"token\",\n                token\n              );\n              tokenSharedProm.then(function (token) {\n                window.localStorage.removeItem(\"token\");\n              });\n            }\n\n            var appDetailsSharedProm =\n              DeviceUtil.setKeyValueWithSharedPreferences(\n                \"AppDetails\",\n                AppDetails\n              );\n            appDetailsSharedProm.then(function (token) {\n              window.localStorage.removeItem(\"AppDetails\");\n            });\n          }\n\n          $ionicPlatform.ready(function () {\n            initDbPromise.promise.then(function (success) {\n              var customer = customersManager.getCustomers();\n              var userLoggedIn =\n                userDetailsManager.getUserLastLoggedTimeStamp();\n\n              if (customer == null) {\n                var resourceDefaultData = null;\n                var defaultIcon = null;\n                LocalStorageUtility.addResourceLanguageDetails(\n                  resourceDefaultData\n                );\n                LocalStorageUtility.addDefaultIcons(defaultIcon);\n              } else {\n                var onlineVal = customer.OnlineVal;\n                var custName = customer.UniqueUrlPart;\n                var ckey = customer.CKey;\n                var isCustomUrlEnabled = customer.IsCustomUrlEnabled;\n\n                if (!isCustomUrlEnabled) {\n                  var onlineValueForBaseUrl = onlineVal;\n                  if (\n                    onlineVal.toLowerCase() === \"cloud\" &&\n                    custName.toLowerCase() === \"cloud1\"\n                  ) {\n                    onlineValueForBaseUrl = \"cloudfp\";\n                  }\n\n                  var baseUrl = CommonMethodsFactory.getBaseUrl(\n                    onlineValueForBaseUrl\n                  );\n                  Restangular.setBaseUrl(\n                    \"https://\" + baseUrl + \"/\" + custName + \"/api/v1/\"\n                  );\n                  //Restangular.setBaseUrl('http://192.168.1.6/s16/api/v1/');\n\n                  // $rootScope.$emit('RenderButtonBgHeaderColor');\n                } else {\n                  var baseUrl = custName;\n                  if (baseUrl.includes(\"api/v1\"))\n                    Restangular.setBaseUrl(\"https://\" + baseUrl);\n                  else\n                    Restangular.setBaseUrl(\"https://\" + baseUrl + \"/api/v1/\");\n                }\n                darkModeEnable();\n              }\n\n              if (isRedirectToWelcome === false) {\n                bootStrap();\n              }\n\n              $rootScope.$on(\"CallParentMethod\", function (event, dataParams) {\n                loginViaDeepLink(dataParams.data, dataParams.shouldShowToaster);\n              });\n\n              function loginViaDeepLink(params, shouldShowToaster) {\n                try {\n                  var decodedParams = decodeURIComponent(params);\n                  if (decodedParams.includes(\"code\")) {\n                    var dParams = decodedParams.split(\"?code=\");\n                    var code = dParams[1];\n                    decodedParams = dParams[0];\n                    code = atob(code);\n                    DeviceUtil.setKeyValueWithSharedPreferences(\n                      \"scannedCode\",\n                      code\n                    );\n                    $rootScope.ShowAssetPopUp = true;\n                  }\n\n                  var actualParams = atob(decodedParams); //tempTokens = actualParams;\n\n                  //Remove script thats form the parsed string. However the content\n                  //inside the script tag will be retained as string\n                  var replacer = /(<([^>]+)>)/gi;\n                  var sanitizedData = actualParams.replace(replacer, \"\");\n\n                  var allTokens = sanitizedData.split(\"|\");\n                  var tokenFull = allTokens[0];\n                  var token = tokenFull.split(\"=\")[1];\n                  var custNameFull = allTokens[1];\n                  var linkCustName = custNameFull.split(\"=\")[1];\n                  var onlineValFull = allTokens[2];\n                  var linkOnlineVal = allTokens[2].split(\"=\")[1];\n                  var linkUserName = allTokens[3].split(\"=\")[1];\n                  var deepLinkCKey = ckey;\n                  var onlineValWithCKey = linkCustName.split(\"-\");\n\n                  if (onlineValWithCKey.length == 2) {\n                    linkCustName = onlineValWithCKey[0];\n                    deepLinkCKey = onlineValWithCKey[1];\n                  }\n\n                  var userProfile =\n                    userDetailsManager.getUserLastLoggedTimeStamp();\n                  var customer = customersManager.getCustomers();\n                  var currentOnlineVal = \"\";\n                  var currentCustName = \"\";\n                  var currentCkey = \"\";\n\n                  if (customer) {\n                    // Only if customer data exists get the value\n                    currentOnlineVal = customer.OnlineVal;\n                    currentCustName = customer.UniqueUrlPart;\n                    currentCkey = customer.CKey;\n                  }\n                  if (userProfile) {\n                    var uName = userProfile.UserName; // Adding toUpperCase(), so that it is not case sensitive\n                    var template = \"\";\n\n                    if (\n                      currentCustName.toUpperCase() !==\n                        linkCustName.toUpperCase() ||\n                      currentOnlineVal.toUpperCase() !==\n                        linkOnlineVal.toUpperCase()\n                    ) {\n                      // Check for other environment and sub domain.\n                      // If the condition is satisfied reset the application.\n                      template = $rootScope.getResourceText(\n                        \"MSG_DELETE_DATA_FROM_PHONE\"\n                      );\n                      resetApplicationData(allTokens, template);\n                    } else {\n                      if (token === \"-1\") {\n                        if (\n                          currentCustName.toUpperCase() !==\n                            linkCustName.toUpperCase() ||\n                          currentOnlineVal.toUpperCase() !==\n                            linkOnlineVal.toUpperCase()\n                        ) {\n                          forCKeyOrUserChanged(\n                            deepLinkCKey,\n                            currentCkey,\n                            undefined,\n                            undefined,\n                            allTokens\n                          );\n                        }\n\n                        LoaderService.hide();\n                      } else {\n                        // Once it is sure environment and sub domain is not changed during deep link login\n                        // get the customer key based on the token recevied from the link\n                        var ckeyPromise = LocalStorageHelper.getCKeyData(token);\n                        ckeyPromise.then(function (successCKey) {\n                          // Once a token got from link, if valid (success response) then add to local storage\n                          // Setting the token value to null, as in the next execution of methods token is added\n                          // from the deep link and is saved to localstorage.\n                          //window.localStorage.setItem('token', null);\n                          DeviceUtil.setKeyValueWithSharedPreferences(\n                            \"token\",\n                            null\n                          );\n                          forCKeyOrUserChanged(\n                            successCKey.CKey,\n                            currentCkey,\n                            uName,\n                            linkUserName,\n                            allTokens\n                          );\n                        });\n                      }\n                    }\n                  } else {\n                    // If user profile does not exists. (First time use of application)\n                    addUserNameTokenCustomer(allTokens);\n                  } //Temp code..\n                } catch (err) {\n                  LoaderService.hide();\n                  if (shouldShowToaster)\n                    ionicToast.showDefault(\n                      $rootScope.getResourceText(\"MSG_MOBILE_LOGIN_EMPTY_TOKEN\")\n                    );\n                  else {\n                    var errorHeader =\n                      $rootScope.getResourceText(\"LIT_MOBILE_ERROR\") +\n                      $rootScope.getResourceText(\"LIT_MESSAGE\");\n                    var errorBody = $rootScope.getResourceText(\n                      \"MSG_MOBILE_TOKEN_INVALID\"\n                    );\n                    AppMessages.Error(errorHeader, errorBody);\n                  }\n                  console.log(err);\n                }\n              }\n\n              // var token = window.localStorage.getItem('token');\n              var token = null;\n              $cordovaDeeplinks\n                .route({\n                  \"/:environmentId/api/v1/suite/applink/:applinkId\": {\n                    target: \"/:environmentId/api/v1/suite/applink\",\n                    parent: \"products\",\n                  },\n                })\n                .subscribe(function (match) {\n                  // window.localStorage.setItem('fromDeepLink', '1');\n                  $ionicPlatform.ready(function () {\n                    initDbPromise.promise.then(\n                      function (success) {\n                        var params = match.$args.applinkId;\n                        var decodedParams = decodeURIComponent(params);\n                        var actualParams = atob(decodedParams);\n                        //Remove script thats form the parsed string. However the content\n                        //inside the script tag will be retained as string\n                        var replacer = /(<([^>]+)>)/gi;\n                        var sanitizedData = actualParams.replace(replacer, \"\");\n\n                        if (\n                          sanitizedData.indexOf(\"url\") !== -1 &&\n                          sanitizedData.split(\"url=\")[1].includes(\"http\")\n                        ) {\n                          var data = {\n                            customerUrl: sanitizedData.split(\"url=\")[1],\n                          };\n                          ToggleUrlMethodFactory.validateUrl(data);\n                        } else {\n                          var promiseDeviceUtil =\n                            DeviceUtil.getKeyValueWithSharedPreferences(\n                              \"token\"\n                            );\n                          promiseDeviceUtil.then(function (token) {\n                            $state.go(\"app.myProfile\");\n                          });\n\n                          DeviceUtil.setKeyValueWithSharedPreferences(\n                            \"stopLoginUpdateForDeepLink\",\n                            true\n                          );\n\n                          var setLinkProm =\n                            DeviceUtil.setKeyValueWithSharedPreferences(\n                              \"fromDeepLink\",\n                              \"1\"\n                            );\n                          setLinkProm.then(function () {\n                            // executes this method when data is saved sucessfully.\n                          });\n                          LoaderService.show(\n                            $rootScope.getResourceText(\"MSG_WAIT_TO_LOGIN\")\n                          );\n                          var code =\n                            match.$args.code != null\n                              ? atob(match.$args.code)\n                              : null;\n\n                          if (code) {\n                            DeviceUtil.setKeyValueWithSharedPreferences(\n                              \"scannedCode\",\n                              code\n                            );\n                            $rootScope.ShowAssetPopUp = true;\n                          }\n\n                          var allTokens = sanitizedData.split(\"|\");\n                          var tokenFull = allTokens[0];\n                          var token = tokenFull.split(\"=\")[1];\n                          var custNameFull = allTokens[1];\n                          var linkCustName = custNameFull.split(\"=\")[1];\n                          var onlineValFull = allTokens[2];\n                          var linkOnlineVal = allTokens[2].split(\"=\")[1];\n                          var linkUserName = allTokens[3].split(\"=\")[1];\n                          var deepLinkCKey = ckey;\n                          var onlineValWithCKey = linkCustName.split(\"-\");\n\n                          if (onlineValWithCKey.length == 2) {\n                            linkCustName = onlineValWithCKey[0];\n                            deepLinkCKey = onlineValWithCKey[1];\n                          }\n\n                          var userProfile =\n                            userDetailsManager.getUserLastLoggedTimeStamp();\n                          var customer = customersManager.getCustomers();\n                          var currentOnlineVal = \"\";\n                          var currentCustName = \"\";\n                          var currentCkey = \"\";\n\n                          if (customer) {\n                            // Only if customer data exists get the value\n                            currentOnlineVal = customer.OnlineVal;\n                            currentCustName = customer.UniqueUrlPart;\n                            currentCkey = customer.CKey;\n                          }\n                          if (userProfile) {\n                            var uName = userProfile.UserName; // Adding toUpperCase(), so that it is not case sensitive\n                            var template = \"\";\n\n                            if (\n                              currentCustName.toUpperCase() !==\n                                linkCustName.toUpperCase() ||\n                              currentOnlineVal.toUpperCase() !==\n                                linkOnlineVal.toUpperCase()\n                            ) {\n                              // Check for other environment and sub domain.\n                              // If the condition is satisfied reset the application.\n                              template = $rootScope.getResourceText(\n                                \"MSG_DELETE_DATA_FROM_PHONE\"\n                              );\n                              resetApplicationData(allTokens, template);\n                            } else {\n                              if (token === \"-1\") {\n                                if (\n                                  currentCustName.toUpperCase() !==\n                                    linkCustName.toUpperCase() ||\n                                  currentOnlineVal.toUpperCase() !==\n                                    linkOnlineVal.toUpperCase()\n                                ) {\n                                  forCKeyOrUserChanged(\n                                    deepLinkCKey,\n                                    currentCkey,\n                                    undefined,\n                                    undefined,\n                                    allTokens\n                                  );\n                                }\n\n                                LoaderService.hide();\n                              } else {\n                                // Once it is sure environment and sub domain is not changed during deep link login\n                                // get the customer key based on the token recevied from the link\n                                var ckeyPromise =\n                                  LocalStorageHelper.getCKeyData(token);\n                                ckeyPromise.then(function (successCKey) {\n                                  // Once a token got from link, if valid (success response) then add to local storage\n                                  // Setting the token value to null, as in the next execution of methods token is added\n                                  // from the deep link and is saved to localstorage.\n                                  //window.localStorage.setItem('token', null);\n                                  DeviceUtil.setKeyValueWithSharedPreferences(\n                                    \"token\",\n                                    null\n                                  );\n                                  forCKeyOrUserChanged(\n                                    successCKey.CKey,\n                                    currentCkey,\n                                    uName,\n                                    linkUserName,\n                                    allTokens\n                                  );\n                                });\n                              }\n                            }\n                          } else {\n                            // If user profile does not exists. (First time use of application)\n                            addUserNameTokenCustomer(allTokens);\n                          } //Temp code..\n                        }\n                      },\n                      function (nomatch) {\n                        console.log(nomatch);\n                        console.warn(\"No match\", nomatch);\n                      }\n                    );\n                  });\n                });\n\n              function darkModeEnable() {\n                var customer = customersManager.getCustomers();\n                if (customer.IsDarkModeEnable) {\n                  $rootScope.$emit(\"darkThemeBgColor\", { isDark: true });\n                } else {\n                  $rootScope.$emit(\"darkThemeBgColor\", { isDark: false });\n                  $rootScope.$emit(\"RenderButtonBgHeaderColor\");\n                }\n              }\n\n              function forCKeyOrUserChanged(\n                customerKey,\n                currentCustomerKey,\n                userName,\n                currentUserName,\n                allTokens\n              ) {\n                var template = \"\";\n                if (\n                  customerKey.toUpperCase() !== currentCustomerKey.toUpperCase()\n                ) {\n                  // If the customer key is not same, compared to previous login\n                  // reset the application\n                  template = $rootScope.getResourceText(\n                    \"MSG_DELETE_DATA_FROM_PHONE\"\n                  );\n                  resetApplicationData(allTokens, template);\n                }\n                // } else if (userName.toUpperCase() !== currentUserName.toUpperCase()) {\n                //   //For a scenario where a user is already logged in and another\n                //   //user is trying to log in of same environment, sub domain and customer key\n                //   // via deep link, prompt the user to confirm on delete and log in\n\n                //   /* Currently disabled becase on logout data from current user is deleted */\n                //   // template = $rootScope.getResourceText('MSG_MULTIPLE_USER_FOUND');\n                //   // resetApplicationData(allTokens, template);\n                // }\n                else {\n                  // This is for the scenario where the same logged in user has clicked\n                  // deep link.\n                  // var token = window.localStorage.getItem('token'); // Adding a \"null\" check because localstorage returns string value\n                  var promiseDeviceUtil =\n                    DeviceUtil.getKeyValueWithSharedPreferences(\"token\");\n                  promiseDeviceUtil.then(function (token) {\n                    LocalStorageHelper.reset();\n                    ResetPoolUtil.resetPool();\n                    if (token === null || token === \"-1\" || token === \"null\") {\n                      // For the scenario where logged in user has manually logged out of application\n                      addUserNameTokenCustomer(allTokens);\n                    } else {\n                      // For a scenario where token is still present from the previous login user.\n                      // In this case just validate the token received from the link\n                      // window.localStorage.setItem('token', token);\n                      var tokenSharedProm =\n                        DeviceUtil.setKeyValueWithSharedPreferences(\n                          \"token\",\n                          token\n                        );\n                      tokenSharedProm.then(function () {\n                        var tokenPromise = validateToken();\n                        tokenPromise.then(\n                          function (sucessResp) {\n                            LoaderService.hide();\n                            console.log(\"token valid\");\n                          },\n                          function (fail) {\n                            console.log(fail);\n                          }\n                        );\n                      });\n                    }\n                  });\n                }\n              }\n\n              function resetApplicationData(allTokens, template) {\n                var title = $rootScope.getResourceText(\"LIT_MESSAGE\");\n                var loaderPromise = LoaderService.hide();\n                loaderPromise.then(function () {\n                  // Displaying confirm box in case of multiple user found. On click of Ok previous user data is cleared\n                  var confirmPromise = PopupUtil.confirm(title, template);\n                  confirmPromise.then(function (success) {\n                    LoaderService.show(\n                      $rootScope.getResourceText(\"MSG_WAIT_TO_LOGIN\")\n                    );\n                    $timeout(function () {\n                      if (success) {\n                        // Reset all the data\n                        // Removing actual document library files stored in filesystem before doing a reset.\n                        var resetDocumentPromise =\n                          documentLibraryManager.removeDocumentLibrary();\n                        resetDocumentPromise.then(\n                          function () {\n                            LocalStorageHelper.reset();\n                            ResetPoolUtil.resetPool();\n                            //window.localStorage.removeItem('AppDetails');\n                            //window.localStorage.removeItem('token');\n                            window.localStorage.removeItem(\"userLanguage\");\n                            $state.go(\"login\");\n                            addUserNameTokenCustomer(allTokens);\n                          },\n                          function (error) {\n                            LoaderService.hide();\n                          }\n                        );\n                      } else {\n                        LoaderService.hide();\n                      }\n                    }, 100);\n                  });\n                });\n              }\n\n              function validateToken() {\n                var tokenValidityPromise =\n                  LocalStorageHelper.validateUserToken();\n                tokenValidityPromise.then(\n                  function (sucessResp) {},\n                  function (failResp) {\n                    $ionicHistory.nextViewOptions({\n                      disableBack: true,\n                    });\n                    ionicToast.showDefault(\n                      $rootScope.getResourceText(\"LIT_SESSION_TIMEOUT\")\n                    );\n                    window.localStorage.removeItem(\"AppDetails\");\n                    var currentState = $state.current.name;\n\n                    if (currentState !== \"login\") {\n                      $state.go(\"login\");\n                    }\n                  }\n                );\n                return tokenValidityPromise;\n              }\n\n              // var guideInstruction = window.localStorage.getItem('guideInstruction');\n              //var getGuideInstPrm = DeviceUtil.getKeyValueWithSharedPreferences('guideInstruction')\n\n              function onUserDetailsFetched() {\n                $ionicHistory.nextViewOptions({\n                  disableBack: true,\n                });\n\n                window.localStorage.setItem(\"fromLogin\", true);\n                $rootScope.$emit(\"refresh\");\n\n                var guideInstructionProm =\n                  DeviceUtil.getKeyValueWithSharedPreferences(\n                    \"guideInstruction\"\n                  );\n                guideInstructionProm\n                  .then(function (data) {\n                    if (!userLoggedIn) {\n                      userLoggedIn =\n                        userDetailsManager.getUserLastLoggedTimeStamp();\n                    }\n\n                    if (userLoggedIn) {\n                      var message = $rootScope\n                        .getResourceText(\"MSG_MOBILE_URL_SUCCESS\")\n                        .replace(\n                          \"__Organization__\",\n                          userLoggedIn.Customer.UniqueUrlPart\n                        );\n                      ionicToast.showDefault(message);\n                    } else {\n                      var message = $rootScope\n                        .getResourceText(\"MSG_MOBILE_URL_SUCCESS\")\n                        .replace(\"__Organization__\", \"\");\n                      ionicToast.showDefault(message);\n                    }\n\n                    if (userLoggedIn.Customer.DisplayFavorites) {\n                      var isFavEmpty = favoritesManager.isFavEmpty();\n                      if (!isFavEmpty) {\n                        window.localStorage.removeItem(\"fromLogin\");\n                        $state.go(\"app.favorite\", {\n                          reload: true,\n                        });\n                      } else {\n                        $state.go(\"app.home\", {\n                          reload: true,\n                        });\n                      }\n                    } else {\n                      $state.go(\"app.home\", {\n                        reload: true,\n                      });\n                    }\n                  })\n                  .catch(function () {\n                    var customer = customersManager.getCustomers();\n\n                    if (customer) {\n                      var message = $rootScope\n                        .getResourceText(\"MSG_MOBILE_URL_SUCCESS\")\n                        .replace(\"__Organization__\", customer.UniqueUrlPart);\n                      ionicToast.showDefault(message);\n                    } else {\n                      var message = $rootScope\n                        .getResourceText(\"MSG_MOBILE_URL_SUCCESS\")\n                        .replace(\"__Organization__\", \"\");\n                      ionicToast.showDefault(message);\n                    }\n\n                    if (!customer.DisableFavoritesGuideDisplay) {\n                      var guideConfirmPromise = PopupUtil.confirm(\n                        $rootScope.getResourceText(\"LIT_MESSAGE\"),\n                        $rootScope.getResourceText(\n                          \"MSG_MOBILE_CONFIRM_TO_SHOW_FAVORITE_GUIDE\"\n                        )\n                      );\n                      guideConfirmPromise.then(function (success) {\n                        var setGuidePromise =\n                          DeviceUtil.setKeyValueWithSharedPreferences(\n                            \"guideInstruction\",\n                            false\n                          );\n                        setGuidePromise.then(function () {\n                          if (success) {\n                            $state.go(\"sideapp\");\n                          } else {\n                            $state.go(\"app.home\");\n                          }\n                        });\n                      });\n                    } else {\n                      $state.go(\"app.home\");\n                    }\n                  });\n                LoaderService.hide();\n              }\n\n              function fetchUserDetails(userName) {\n                PopupUtil.hide(); // Hide Loading Animation shown while Login\n                LoaderService.show();\n                var userDetailsPromise =\n                  LocalStorageHelper.initUserDetails(userName);\n                userDetailsPromise.then(\n                  function (successUserDetailsResponse) {\n                    onUserDetailsFetched();\n                  },\n                  function (errorResp) {\n                    LoaderService.hide();\n                  }\n                );\n              }\n\n              function addToCustomer(\n                customer,\n                custName,\n                onlineVal,\n                userName,\n                isCustomUrlEnabled\n              ) {\n                if (customer != null) {\n                  var uniquePart =\n                    customer.UniqueUrlPart == null\n                      ? \"\"\n                      : customer.UniqueUrlPart.toLowerCase();\n                  custName = custName == null ? \"\" : custName.toLowerCase();\n\n                  if (\n                    customer.OnlineVal !== onlineVal ||\n                    uniquePart != custName\n                  ) {\n                    var resetPromise = LoaderService.hide();\n                    resetPromise.then(function (success) {\n                      if (success) {\n                        var title =\n                          $rootScope.getResourceText(\"LIT_RESET_DATA\");\n                        var template = $rootScope.getResourceText(\n                          \"MSG_DELETE_DATA_FROM_PHONE\"\n                        );\n                        var confirmPromise = PopupUtil.confirm(title, template);\n                        confirmPromise.then(function (success) {\n                          LoaderService.show();\n                          $timeout(function () {\n                            if (success) {\n                              // Adding Reset pool method\n                              // Removing the userLanguage value from localstorage, for a scenario where when user profile\n                              // is not present customer specific language is not displayed FT 7105\n                              ResetPoolUtil.resetPool();\n                              window.localStorage.removeItem(\"userLanguage\"); // Removing actual document library files stored in filesystem before doing a reset\n\n                              var resetDocumentPromise =\n                                documentLibraryManager.removeDocumentLibrary();\n                              resetDocumentPromise.then(\n                                function () {\n                                  var excludeList = [\"UserDetails\"];\n                                  var resetPromise =\n                                    LocalStorageHelper.reset(excludeList);\n                                  resetPromise.promise.then(function () {\n                                    fetchOtherDetails(\n                                      custName,\n                                      onlineVal,\n                                      userName,\n                                      isCustomUrlEnabled\n                                    );\n                                  });\n                                },\n                                function (error) {\n                                  LoaderService.hide();\n                                }\n                              );\n                            } else {\n                              LoaderService.hide();\n                            }\n                          }, 100);\n                        });\n                      }\n                    });\n                  } else {\n                    fetchOtherDetails(\n                      custName,\n                      onlineVal,\n                      userName,\n                      isCustomUrlEnabled\n                    );\n                  }\n                } else {\n                  fetchOtherDetails(\n                    custName,\n                    onlineVal,\n                    userName,\n                    isCustomUrlEnabled\n                  );\n                }\n              }\n\n              function fetchOtherDetails(\n                custName,\n                onlineVal,\n                userName,\n                isCustomUrlEnabled\n              ) {\n                //var deviceLangPromise = LocalStorageHelper.setUserDeviceLanguage(ckey);\n                //deviceLangPromise.then(function () {\n                var defaultLangPromise =\n                  LocalStorageHelper.setUserDefaultLanguage(\n                    custName,\n                    onlineVal,\n                    ckey\n                  );\n                defaultLangPromise.then(function () {\n                  downloadOtherDetails(\n                    custName,\n                    onlineVal,\n                    ckey,\n                    userName,\n                    isCustomUrlEnabled\n                  );\n                });\n                //});\n              }\n\n              function downloadOtherDetails(\n                custName,\n                onlineVal,\n                cKeyValue,\n                userName,\n                isCustomUrlEnabled\n              ) {\n                var refPromise = LocalStorageHelper.getEmptyPromise({\n                  CKey: cKeyValue,\n                });\n\n                if (userName !== \"ChangeEnvironment\") {\n                  var refPromise = LocalStorageHelper.refreshSuiteDetails(\n                    custName,\n                    onlineVal,\n                    isCustomUrlEnabled\n                  );\n                }\n\n                refPromise.then(function (cKey) {\n                  var customerKey = cKey.CKey;\n                  var suitePromise = LocalStorageHelper.initSuiteDetails(\n                    custName,\n                    onlineVal,\n                    customerKey,\n                    isCustomUrlEnabled\n                  );\n                  suitePromise.then(\n                    function (success) {\n                      // $rootScope.$emit('RenderButtonBgHeaderColor');\n                      darkModeEnable();\n                      $timeout(function () {\n                        $rootScope.$emit(\"OnlyWelcomeBgColor\", {\n                          isWelcome: false,\n                        });\n                      }, 200);\n\n                      if (userName && userName !== \"ChangeEnvironment\") {\n                        fetchUserDetails(userName);\n                        $rootScope.$emit(\"refresh\");\n                      } else {\n                        window.localStorage.removeItem(\"userLanguage\");\n                        $state.go(\"login\");\n                        $rootScope.$broadcast(\"refreshLogin\");\n                        LoaderService.hide();\n                      }\n                    },\n                    function (error) {\n                      console.log(error);\n                      return;\n                    }\n                  );\n                });\n              }\n\n              function addUserNameTokenCustomer(allTokens) {\n                var tokenFull = allTokens[0];\n                var token = tokenFull.split(\"=\")[1];\n                var custNameFull = allTokens[1];\n                var custName = custNameFull.split(\"=\")[1];\n                var onlineValFull = allTokens[2];\n                var onlineVal = allTokens[2].split(\"=\")[1];\n                var userName = allTokens[3].split(\"=\")[1];\n                var deepLinkCKey = \"\";\n                var onlineValWithCKey = custName.split(\"-\");\n                var isCustomUrlEnabled =\n                  allTokens[allTokens.length - 1].split(\"=\")[1] === \"True\";\n\n                if (!isCustomUrlEnabled) {\n                  if (onlineValWithCKey.length == 2) {\n                    custName = onlineValWithCKey[0];\n                    ckey = deepLinkCKey = onlineValWithCKey[1];\n                  }\n\n                  if (onlineVal == \"cloud\") {\n                    onlineVal = \"cloudse\";\n                  }\n\n                  var onlineValueForBaseUrl = onlineVal;\n                  if (\n                    onlineVal.toLowerCase() === \"cloud\" &&\n                    custName.toLowerCase() === \"cloud1\"\n                  ) {\n                    onlineValueForBaseUrl = \"cloudfp\";\n                  }\n\n                  var baseUrl = CommonMethodsFactory.getBaseUrl(\n                    onlineValueForBaseUrl\n                  );\n                  Restangular.setBaseUrl(\n                    \"https://\" + baseUrl + \"/\" + custName + \"/api/v1/\"\n                  ); //Restangular.setBaseUrl('http://192.168.1.25/s16/api/v1/');\n                } else {\n                  var baseUrl = custName;\n                  if (baseUrl.includes(\"api/v1\"))\n                    Restangular.setBaseUrl(\"https://\" + baseUrl);\n                  else\n                    Restangular.setBaseUrl(\"https://\" + baseUrl + \"/api/v1/\");\n                }\n\n                if (token === \"-1\") {\n                  var customer = customersManager.getCustomers();\n                  addToCustomer(\n                    customer,\n                    custName,\n                    onlineVal,\n                    userName,\n                    isCustomUrlEnabled\n                  );\n                } else {\n                  // window.localStorage.setItem('token', token);\n                  //alert('Hello');\n                  var tokenSharedProm =\n                    DeviceUtil.setKeyValueWithSharedPreferences(\"token\", token);\n                  tokenSharedProm.then(function (token2) {\n                    var tokenPromise = validateToken();\n                    tokenPromise.then(\n                      function (sucessResp) {\n                        LocalStorageUtility.addUserNameToken(token, userName);\n                        var customer = customersManager.getCustomers();\n                        addToCustomer(\n                          customer,\n                          custName,\n                          onlineVal,\n                          userName,\n                          isCustomUrlEnabled\n                        );\n                      },\n                      function (fail) {\n                        console.log(fail);\n                      }\n                    );\n                  });\n                }\n              }\n\n              function isDeviceOnline() {\n                var isOnline = $cordovaNetwork.isOnline();\n                var type = $cordovaNetwork.getNetwork();\n                isOnline = isOnline === true || type === \"unknown\";\n                return isOnline;\n              } // listen for Online event\n\n              $rootScope.$on(\"performSync\", function (e, data) {\n                $timeout(function () {\n                  var moduleName = data.modName;\n                  // var token = window.localStorage.getItem('token');\n                  var promiseDeviceUtil =\n                    DeviceUtil.getKeyValueWithSharedPreferences(\"token\");\n                  promiseDeviceUtil.then(function (token) {\n                    if (token != null) {\n                      var customer = customersManager.getCustomers();\n                      LoaderService.show();\n                      var isAutoUploadDelayInMinutesDisabled =\n                        customer.AutoUploadDelayInMinutes == 0 ||\n                        customer.AutoUploadDelayInMinutes == null ||\n                        customer.AutoUploadDelayInMinutes == undefined;\n                      if (\n                        customer.IsAutoSyncEnabled &&\n                        isAutoUploadDelayInMinutesDisabled &&\n                        isDeviceOnline() &&\n                        !customer.IsDemoCustomer\n                      ) {\n                        var tokenValidityPromise =\n                          LocalStorageHelper.validateUserToken();\n                        tokenValidityPromise.then(\n                          function (tokenValid) {\n                            var hidePromise = LoaderService.hide();\n                            hidePromise.then(function () {\n                              switch (moduleName) {\n                                case \"ActionPlan\":\n                                  processCompletedActionPlansProblems(false);\n                                  break;\n\n                                case \"All\":\n                                  runForAllModules();\n                                  break;\n\n                                case \"Askade\":\n                                case \"Claim\":\n                                  processCompletedAskadeWizards(\n                                    moduleName,\n                                    false\n                                  );\n                                  break;\n\n                                default:\n                                  processCompletedQuestionnaires(\n                                    moduleName,\n                                    false\n                                  );\n                                  break;\n                              }\n                            });\n                            successAnimLoader(data.animLoader);\n                          },\n                          function (tokenInValid) {\n                            LoaderService.hide();\n                          }\n                        );\n                      } else {\n                        LoaderService.hide();\n                        successAnimLoader(data.animLoader);\n                      }\n                    }\n                  });\n                }, 100);\n              });\n\n              //Close Animation Popup when clicked anywhere on the screen\n              document.onclick = function (e) {\n                var animEle = document.getElementsByClassName(\"animPopUpClose\");\n                if (animEle.length > 0) {\n                  PopupUtil.hideAnimPopUp();\n                }\n              };\n\n              $rootScope.$on(\n                \"performSyncBackgroundForAutoUpload\",\n                function (e, data) {\n                  runForAllModulesBackgroundForAutoUpload();\n                }\n              );\n\n              function runForAllModulesBackgroundForAutoUpload() {\n                processAllDelayedAnswers();\n              }\n\n              $rootScope.$on(\"performSyncBackground\", function (e, data) {\n                runForAllModulesBackground();\n              });\n\n              function runForAllModulesBackground() {\n                LoaderService.show();\n                var tokenValidityPromise =\n                  LocalStorageHelper.validateUserToken();\n                tokenValidityPromise.then(function (tokenValid) {\n                  var userDetails =\n                    userDetailsManager.getUserLastLoggedTimeStamp();\n\n                  if (userDetails != null && userDetails != undefined) {\n                    var userApplicationsDetails =\n                      userApplicationsManager.getUserApplications(\n                        userDetails.UserId\n                      );\n                  }\n\n                  var hidePromise = LoaderService.hide();\n                  hidePromise.then(function () {\n                    $timeout(function backGround() {\n                      if (userApplicationsDetails !== null) {\n                        for (\n                          var i = 0;\n                          i < userApplicationsDetails.length;\n                          i++\n                        ) {\n                          var modName = userApplicationsDetails[i].Text;\n\n                          switch (modName) {\n                            case \"ActionPlan\":\n                              processCompletedActionPlansProblems(true);\n                              break;\n                            case \"Apv\":\n                            case \"RiskProfile\":\n                            case \"EmployeeSatisfaction\":\n                            case \"ManagementEvaluation\":\n                            case \"HumanResource\":\n                            case \"FrontPlanner\":\n                              processCompletedQuestionnaires(modName, true);\n                              break;\n                            case \"Askade\":\n                            case \"Claim\":\n                              processCompletedAskadeWizards(modName, true);\n                              break;\n                            default:\n                              break;\n                          }\n                        }\n                      }\n                    }, 100);\n                  });\n                });\n              }\n\n              function runForAllModules() {\n                LoaderService.show();\n                var tokenValidityPromise =\n                  LocalStorageHelper.validateUserToken();\n                tokenValidityPromise.then(\n                  function (tokenValid) {\n                    var hidePromise = LoaderService.hide();\n                    hidePromise.then(function () {\n                      $timeout(function () {\n                        var userDetails =\n                          userDetailsManager.getUserLastLoggedTimeStamp();\n\n                        if (userDetails != null && userDetails != undefined) {\n                          var userApplicationsDetails =\n                            userApplicationsManager.getUserApplications(\n                              userDetails.UserId\n                            );\n                        }\n\n                        if (userApplicationsDetails !== null) {\n                          for (\n                            var i = 0;\n                            i < userApplicationsDetails.length;\n                            i++\n                          ) {\n                            var modName = userApplicationsDetails[i].Text;\n\n                            switch (modName) {\n                              case \"ActionPlan\":\n                                processCompletedActionPlansProblems(false);\n                                break;\n\n                              case \"Apv\":\n                              case \"RiskProfile\":\n                              case \"EmployeeSatisfaction\":\n                              case \"ManagementEvaluation\":\n                              case \"HumanResource\":\n                              case \"FrontPlanner\":\n                                processCompletedQuestionnaires(modName, false);\n                                break;\n\n                              case \"Askade\":\n                              case \"Claim\":\n                                processCompletedAskadeWizards(modName, false);\n                                break;\n\n                              default:\n                                break;\n                            }\n                          }\n                        }\n                      }, 100);\n                    });\n                  },\n                  function (tokenInValid) {\n                    LoaderService.hide();\n                  }\n                );\n              } // listen for Online event\n\n              $rootScope.$on(\n                \"$cordovaNetwork:online\",\n                function (event, networkState) {\n                  // var token = window.localStorage.getItem('token');\n                  var promiseDeviceUtil =\n                    DeviceUtil.getKeyValueWithSharedPreferences(\"token\");\n                  promiseDeviceUtil.then(function (token) {\n                    if (token != null) {\n                      var customer = customersManager.getCustomers();\n                      var isAutoUploadDelayInMinutesDisabled =\n                        customer &&\n                        (customer.AutoUploadDelayInMinutes == 0 ||\n                          customer.AutoUploadDelayInMinutes == null ||\n                          customer.AutoUploadDelayInMinutes == undefined);\n                      if (\n                        customer &&\n                        customer.IsAutoSyncEnabled &&\n                        isAutoUploadDelayInMinutesDisabled &&\n                        !customer.IsDemoCustomer\n                      ) {\n                        runForAllModules();\n                      }\n                    }\n                  });\n                }\n              );\n\n              function successAnimLoader(loaderCheck) {\n                if (loaderCheck) {\n                  $timeout(function () {\n                    var anim =\n                      '<lottie-player src=\"raw/saveSuccess.json\" background=\"transparent\" speed=\"1\" id=\"uploadAnim\" autoplay></lottie-player>';\n                    var contentTitle = \"{{getResourceText('LIT_SAVE')}}\";\n                    var contentLabel =\n                      \"{{getResourceText('MSG_MOBILE_SAVE_SETTING')}}\";\n                    var contentTimer = 3000;\n                    PopupUtil.animTimerPopUp(\n                      anim,\n                      contentTitle,\n                      contentLabel,\n                      contentTimer\n                    );\n                  }, 1500);\n                }\n              }\n\n              function processCompletedQuestionnaires(moduleName, skipLoader) {\n                var completedQuestionnairesList =\n                  personQuestionnaireManager.getCompletedQuestionnairesList(\n                    moduleName\n                  );\n\n                for (var i = 0; i < completedQuestionnairesList.length; i++) {\n                  var questionnaireList = completedQuestionnairesList[i];\n\n                  for (var j = 0; j < questionnaireList.Answers.length; j++) {\n                    var answeredQuestionnaireEntry =\n                      questionnaireList.Answers[j];\n                    var pqId =\n                      answeredQuestionnaireEntry.PersonQuestionnaire.Id;\n                    var pq =\n                      personQuestionnaireManager.getPersonQuestionnaire(pqId); //If multiple processes try to upload the same questionaire hence the check.\n                    helperProcessQuestionnaireAnswers(\n                      [pq],\n                      moduleName,\n                      skipLoader\n                    );\n                  }\n                }\n              }\n\n              function helperProcessQuestionnaireAnswers(\n                completedAnswers,\n                moduleName,\n                skipLoader\n              ) {\n                for (var i = 0; i < completedAnswers.length; i++) {\n                  var pq = completedAnswers[i];\n                  var uploadInProgress = pq.UploadInProgress;\n                  if (uploadInProgress == false && pq.hasDelayElapsed()) {\n                    var processesPqPromise = FileUtil.processFile(pq, true);\n                    var questionnaire = pq.Questionnaire;\n                    processesPqPromise.then(\n                      function (completePersonQuestionnaire) {\n                        //Skip Questionnaire data..\n                        //pq.Questionnaire = null;\n                        if (\n                          completePersonQuestionnaire.UploadInProgress == false\n                        ) {\n                          var uploadedPromise =\n                            LocalStorageHelper.uploadPersonQuestionnaire(\n                              completePersonQuestionnaire,\n                              moduleName\n                            );\n                          completePersonQuestionnaire.UploadInProgress = true;\n                          completePersonQuestionnaire.UploadFail = false;\n                          var completedPq = completePersonQuestionnaire;\n                          uploadedPromise.then(\n                            function (aoData) {\n                              //pq.Questionnaire = questionnaire;\n                              personQuestionnaireManager.uploadPostProcess(\n                                completedPq\n                              ); //Notify the questionnaire list tab for change in the completed list\n                              //and hence perform refresh operation on the completed list.\n\n                              $rootScope.$emit(\"refresh\");\n                              if (skipLoader === false) {\n                                var anim =\n                                  '<lottie-player src=\"raw/loadingSuccess.json\" background=\"transparent\" speed=\"1\" id=\"loadAnim\" autoplay></lottie-player>';\n                                var contentTitle =\n                                  $rootScope.getResourceText(\n                                    \"LIT_MOBILE_SUCCESS\"\n                                  );\n                                var contentLabel =\n                                  completedPq.Questionnaire.Name +\n                                  \" \" +\n                                  $rootScope.getResourceText(\n                                    \"MSG_MOBILE_UPLOADED_REGISTRATION\"\n                                  );\n                                var contentTimer = 5000;\n                                PopupUtil.animTimerPopUp(\n                                  anim,\n                                  contentTitle,\n                                  contentLabel,\n                                  contentTimer\n                                );\n                              }\n                            },\n                            function (error) {\n                              //pq.Questionnaire = questionnaire;\n                              completedPq.UploadInProgress = false;\n                              completedPq.UploadFail = true; //Notify the questionnaire list tab for change in the completed list\n                              //which was uploaded to be reset to ready for upload once again.\n                              //and hence perform refresh operation on the completed list.\n\n                              $rootScope.$emit(\"refresh\");\n                            }\n                          );\n                        }\n                      },\n                      function (inCompletePq) {\n                        // Check is performed only to validate if it is a file not found error.\n                        if (inCompletePq.message === \"NOT_FOUND_ERR\") {\n                          //Saving the questionnaire as to move to Inprogress section\n                          personQuestionnaireManager.savePersonQuestionniare(\n                            inCompletePq.personEntity,\n                            false\n                          ); // Showing toast message to notify user as to move to inprogress\n\n                          ionicToast.showDefault(\n                            inCompletePq.personEntity.Questionnaire.Name +\n                              \" \" +\n                              $rootScope.getResourceText(\"MSG_MOVED_INPROGRESS\")\n                          );\n                        }\n\n                        inCompletePq.UploadInProgress = false;\n                        inCompletePq.UploadFail = true;\n                        $rootScope.$emit(\"refresh\");\n                      }\n                    );\n                  }\n                }\n              }\n\n              function helperProcessCompletedAnswerActionPlan(\n                apwList,\n                skipLoader\n              ) {\n                for (var j = 0; j < apwList.length; j++) {\n                  var pApw = apwList[j];\n                  var uploadInProgress = pApw.UploadInProgress;\n                  if (uploadInProgress == false && pApw.hasDelayElapsed()) {\n                    personApwManager.processDateColumnForActionPlan(pApw);\n                    var processesPApwPromise = FileUtil.processFile(pApw, true);\n                    processesPApwPromise.then(\n                      function (completePersonApw) {\n                        //Skip Wizard data..\n                        completePersonApw.WizardId = pApw.Wizard.Id;\n                        completePersonApw.UploadInProgress = true;\n                        completePersonApw.UploadFail = false;\n                        var completedPApw = completePersonApw;\n                        var uploadPromise =\n                          LocalStorageHelper.uploadPersonActionPlanWizard(\n                            completePersonApw\n                          );\n                        uploadPromise.then(\n                          function (serverSucessResponse) {\n                            //TODO add a post upload method in the personApwManager like the questionnaire part .\n                            //Currently only removes from the Cache and LocalStorage other\n                            //dependencies not removed like the Category,LineOfBusiness table data.\n                            personApwManager.removeInstance(completePersonApw);\n                            $rootScope.$emit(\"refresh\");\n                            if (skipLoader === false) {\n                              var anim =\n                                '<lottie-player src=\"raw/loadingSuccess.json\" background=\"transparent\" speed=\"1\" id=\"loadAnim\" autoplay></lottie-player>';\n                              var contentTitle =\n                                $rootScope.getResourceText(\n                                  \"LIT_MOBILE_SUCCESS\"\n                                );\n                              var contentLabel =\n                                completePersonApw.Wizard.Name +\n                                \" \" +\n                                $rootScope.getResourceText(\n                                  \"MSG_MOBILE_UPLOADED_REGISTRATION\"\n                                );\n                              var contentTimer = 5000;\n                              PopupUtil.animTimerPopUp(\n                                anim,\n                                contentTitle,\n                                contentLabel,\n                                contentTimer\n                              );\n                            }\n                          },\n                          function (pApw) {\n                            completedPApw.UploadInProgress = false;\n                            completedPApw.UploadFail = true;\n                          }\n                        );\n                      },\n                      function (inCompletePersonApw) {\n                        // Check is performed only to validate if it is a file not found error.\n                        if (inCompletePersonApw.message === \"NOT_FOUND_ERR\") {\n                          //Saving the questionnaire as to move to Inprogress section\n                          personApwManager.savePersonApw(\n                            inCompletePersonApw.personEntity,\n                            false\n                          ); // Showing toast message to notify user as to move to inprogress\n\n                          ionicToast.showDefault(\n                            inCompletePersonApw.personEntity.Wizard.Name +\n                              \" \" +\n                              $rootScope.getResourceText(\"MSG_MOVED_INPROGRESS\")\n                          );\n                        }\n\n                        inCompletePersonApw.UploadInProgress = false;\n                        inCompletePersonApw.UploadFail = true;\n                        $rootScope.$emit(\"refresh\");\n                      }\n                    );\n                  }\n                }\n              }\n\n              function processCompletedActionPlansProblems(skipLoader) {\n                var completedApwList =\n                  personApwManager.getCompletedPersonAPWList();\n\n                for (var i = 0; i < completedApwList.length; i++) {\n                  var apwList = completedApwList[i];\n\n                  for (var j = 0; j < apwList.Answers.length; j++) {\n                    var answeredApwEntry = apwList.Answers[j];\n                    var pqApwId = answeredApwEntry.PersonApwAnswer.Id;\n                    var pApw =\n                      personApwManager.getPersonActionPlanWizard(pqApwId); //If multiple processes try to upload the same questionaire hence the check.\n\n                    helperProcessCompletedAnswerActionPlan([pApw], skipLoader);\n                  }\n                }\n              }\n\n              function processAllDelayedAnswers() {\n                var apwList =\n                  HomeScreenUtil.getActionPlanProblemCompletedWithAutoUploadDelayElapsed();\n                helperProcessCompletedAnswerActionPlan(apwList, true);\n\n                var askadeList =\n                  HomeScreenUtil.getAskadeCompletedWithAutoUploadDelayElapsed();\n                helperProcessCompletedAnswersAskade(askadeList, \"Askade\", true);\n\n                var claimsList =\n                  HomeScreenUtil.getClaimCompletedWithAutoUploadDelayElapsed();\n                helperProcessCompletedAnswersAskade(claimsList, \"Claim\", true);\n\n                var allModules = [\n                  \"Apv\",\n                  \"RiskProfile\",\n                  \"EmployeeSatisfaction\",\n                  \"HumanResource\",\n                  \"ManagementEvaluation\",\n                  \"FrontPlanner\",\n                ];\n                for (var i = 0; i < allModules.length; i++) {\n                  var moduleName = allModules[i];\n                  var questionnairesList =\n                    HomeScreenUtil.getModuleQuestionnaireCompletedWithAutoUploadDelayElapsed(\n                      moduleName\n                    );\n                  helperProcessQuestionnaireAnswers(\n                    questionnairesList,\n                    moduleName,\n                    true\n                  );\n                }\n              }\n\n              function helperProcessCompletedAnswersAskade(\n                completedAkwList,\n                moduleName,\n                skipLoader\n              ) {\n                for (var i = 0; i < completedAkwList.length; i++) {\n                  var pAkW = completedAkwList[i];\n                  var uploadInProgress = pAkW.UploadInProgress;\n                  if (uploadInProgress == false && pAkW.hasDelayElapsed()) {\n                    //Process date fields to contain date in the dd-MM-yyyy format before uploading.\n                    personAskadeFileTypeWizardManager.processDateColumnForAskade(\n                      pAkW\n                    );\n                    var processesPAkPromise = FileUtil.processFile(pAkW, true);\n                    processesPAkPromise.then(\n                      function (completePersonAskade) {\n                        //completePersonApw.WizardId = completePersonApw.Wizard.Id;\n                        completePersonAskade.UploadInProgress = true;\n                        completePersonAskade.UploadFail = false;\n                        var currentCompletedAk = completePersonAskade;\n                        var uploadPromise;\n\n                        console.log(moduleName);\n                        if (moduleName === \"Askade\") {\n                          uploadPromise =\n                            LocalStorageHelper.uploadPersonAskadeWizard(\n                              currentCompletedAk\n                            );\n                        } else {\n                          uploadPromise =\n                            LocalStorageHelper.uploadPersonClaimWizard(\n                              currentCompletedAk\n                            );\n                        }\n\n                        uploadPromise.then(\n                          function (serverSucessResponse) {\n                            personAskadeFileTypeWizardManager.removeInstance(\n                              currentCompletedAk\n                            );\n\n                            if (skipLoader === false) {\n                              var anim =\n                                '<lottie-player src=\"raw/loadingSuccess.json\" background=\"transparent\" speed=\"1\" id=\"loadAnim\" autoplay></lottie-player>';\n                              var contentTitle =\n                                $rootScope.getResourceText(\n                                  \"LIT_MOBILE_SUCCESS\"\n                                );\n                              var contentLabel =\n                                currentCompletedAk.AskadeFileTypeWizard.Name +\n                                \" \" +\n                                $rootScope.getResourceText(\n                                  \"MSG_MOBILE_UPLOADED_REGISTRATION\"\n                                );\n                              var contentTimer = 5000;\n                              PopupUtil.animTimerPopUp(\n                                anim,\n                                contentTitle,\n                                contentLabel,\n                                contentTimer\n                              );\n                            }\n\n                            $rootScope.$emit(\"refresh\");\n                          },\n                          function (error) {\n                            currentCompletedAk.UploadInProgress = false;\n                            currentCompletedAk.UploadFail = true;\n                          }\n                        );\n                      },\n                      function (inCompletePersonAkw) {\n                        // Check is performed only to validate if it is a file not found error.\n                        if (inCompletePersonAkw.message === \"NOT_FOUND_ERR\") {\n                          //Saving the questionnaire as to move to Inprogress section\n                          personAskadeFileTypeWizardManager.saveAkWizard(\n                            inCompletePersonAkw.personEntity,\n                            false\n                          ); // Showing toast message to notify user as to move to inprogress\n\n                          ionicToast.showDefault(\n                            inCompletePersonAkw.personEntity\n                              .AskadeFileTypeWizard.Name +\n                              \" \" +\n                              $rootScope.getResourceText(\"MSG_MOVED_INPROGRESS\")\n                          );\n                        }\n\n                        inCompletePersonAkw.UploadInProgress = false;\n                        inCompletePersonAkw.UploadFail = true;\n                        $rootScope.$emit(\"refresh\");\n                      }\n                    );\n                  }\n                }\n              }\n\n              function processCompletedAskadeWizards(moduleName, skipLoader) {\n                var completedAskadeList =\n                  personAskadeFileTypeWizardManager.getCompletedPCaseList(\n                    moduleName\n                  );\n\n                for (var i = 0; i < completedAskadeList.length; i++) {\n                  var askadeList = completedAskadeList[i];\n\n                  for (var j = 0; j < askadeList.Answers.length; j++) {\n                    var answeredAkEntry = askadeList.Answers[j];\n                    var pAkId = answeredAkEntry.PersonAskadeAnswer.Id;\n                    var pAkW =\n                      personAskadeFileTypeWizardManager.getPersonAskadeFileTypeWizard(\n                        pAkId\n                      );\n\n                    helperProcessCompletedAnswersAskade(\n                      [pAkW],\n                      moduleName,\n                      skipLoader\n                    );\n                  }\n                }\n              }\n\n              if (isIPad === false && isIOS === false) {\n                window.addEventListener(\"native.keyboardhide\", function () {\n                  if (ionic.Platform.isAndroid() === true) {\n                    var activeElement = document.activeElement;\n                    var activeElementType = activeElement.type;\n\n                    if (\n                      activeElementType === \"textarea\" ||\n                      activeElementType === \"text\" ||\n                      activeElementType === \"numeric\"\n                    ) {\n                      activeElement.blur();\n                    }\n\n                    screen.orientation.unlock();\n                  }\n                });\n\n                document.activeElement.addEventListener(\n                  \"focus\",\n                  function () {\n                    var activeElement = document.activeElement;\n                    var activeElementType = activeElement.type;\n\n                    if (ionic.Platform.isAndroid() === true) {\n                      var landscapeOrientation = [-90, 90];\n\n                      if (\n                        landscapeOrientation.indexOf(window.orientation) >= 0\n                      ) {\n                        //landscape..\n                        if (\n                          activeElementType === \"textarea\" ||\n                          activeElementType === \"text\" ||\n                          activeElementType === \"numeric\"\n                        ) {\n                          screen.orientation.lock(\"portrait\");\n                          cordova.plugins.Keyboard.show();\n                        }\n                      }\n                    }\n                  },\n                  true\n                );\n\n                window.addEventListener(\"orientationchange\", function (e) {\n                  var landscapeOrientation = [-90, 90];\n                  var keyboardVisible = cordova.plugins.Keyboard.isVisible;\n\n                  if (landscapeOrientation.indexOf(window.orientation) >= 0) {\n                    var activeElement = document.activeElement;\n                    var activeElementType = activeElement.type;\n\n                    if (\n                      activeElementType === \"textarea\" ||\n                      activeElementType === \"text\" ||\n                      activeElementType === \"numeric\"\n                    ) {\n                      if (ionic.Platform.isAndroid() === true) {\n                        if (keyboardVisible === true) {\n                          screen.lockOrientation(\"portrait\");\n                          screen.orientation.lock(\"portrait\");\n                        }\n                      } else {\n                        cordova.plugins.Keyboard.close();\n                        activeElement.blur();\n                      }\n                    }\n                  }\n                });\n              }\n\n              // Creating new directoried for storing images and PDF in the run method.\n\n              function createDirectories() {\n                var subDirName = \"TempFiles\";\n                var dirExistProm = FileUtil.checkDirectoryExists(subDirName);\n                dirExistProm.then(\n                  function (success) {\n                    // Folder is present\n                  },\n                  function (fail) {\n                    var dirCreateProm = FileUtil.createSubDirectory(subDirName);\n                    dirCreateProm.then(function (success) {\n                      // Folder was not present, but it is created\n                    });\n                  }\n                );\n                var subDirImageName = \"ImageFiles\";\n                var directoryExistProm =\n                  FileUtil.checkDirectoryExists(subDirImageName);\n                directoryExistProm.then(\n                  function (success) {\n                    // Folder is present\n                  },\n                  function (fail) {\n                    var directoryCreateProm =\n                      FileUtil.createSubDirectory(subDirImageName);\n                    directoryCreateProm.then(function (success) {\n                      // Folder was not present, but it is created\n                    });\n                  }\n                );\n              }\n\n              createDirectories();\n              $rootScope.$on(\"createDirectories\", function (e, data) {\n                // This is called when a Master reset is called.\n                // During reset all the directories are deleted, so creating fresh directory.\n                createDirectories();\n              });\n\n              function statusBarColorCheck() {\n                var customer = customersManager.getCustomers();\n                if (customer.IsDarkModeEnable) {\n                  var darkHeaderColor = \"#000000\";\n                  StatusBar.backgroundColorByHexString(darkHeaderColor);\n                } else {\n                  var userLoggedIn =\n                    userDetailsManager.getUserLastLoggedTimeStamp();\n                  StatusBar.backgroundColorByHexString(\n                    userLoggedIn.Customer.ColourCode\n                  );\n                }\n              }\n\n              function addToCustomerUrl(\n                custName,\n                onlineVal,\n                ckey,\n                isCustomUrl\n              ) {\n                var suitePromise = LocalStorageHelper.initSuiteDetails(\n                  custName,\n                  onlineVal,\n                  ckey,\n                  isCustomUrl\n                );\n                suitePromise.then(\n                  function (success) {\n                    darkModeEnable();\n                    $rootScope.$broadcast(\"refreshLogin\");\n                    setAppEnvironment;\n                  },\n                  function (error) {\n                    console.log(error);\n                    return;\n                  }\n                );\n              }\n\n              //setAppEnvironment takes a customer url and sets the environment mainly used for intune set up\n              function setAppEnvironment(customerUrl) {\n                var setGuidePromise =\n                  DeviceUtil.setKeyValueWithSharedPreferences(\n                    \"isIntuneSetUp\",\n                    true\n                  );\n                var domainData =\n                  CommonMethodsFactory.getUrlDetails(customerUrl);\n                var custName = domainData.environment;\n                var onlineVal = domainData.subDomain;\n                var ckeyVal = domainData.cKey;\n                var ckey = null;\n                var isOnline = DeviceUtil.isDeviceOnline();\n\n                if (ckeyVal) {\n                  ckey = ckeyVal;\n                }\n\n                var onlineValueForBaseUrl = onlineVal;\n                if (\n                  onlineVal.toLowerCase() === \"cloud\" &&\n                  custName.toLowerCase() === \"cloud1\"\n                ) {\n                  onlineValueForBaseUrl = \"cloudfp\";\n                }\n\n                var customer = customersManager.getCustomers();\n                var changeCustomer = false;\n\n                if (customer != null) {\n                  var uniquePart =\n                    customer.UniqueUrlPart == null\n                      ? \"\"\n                      : customer.UniqueUrlPart.toLowerCase();\n                  custName = custName == null ? \"\" : custName.toLowerCase();\n\n                  if (\n                    customer.OnlineVal !== onlineVal ||\n                    uniquePart != custName\n                  ) {\n                    changeCustomer = true;\n                  }\n                }\n\n                if (customer == null) {\n                  changeCustomer = true;\n                }\n\n                if (changeCustomer == true)\n                  if (isOnline === false) {\n                    AppMessages.Error(\n                      $rootScope.getResourceText(\"LIT_ALERT\"),\n                      $rootScope.getResourceText(\n                        \"MSG_CHECK_INTERNET_CONNECTION\"\n                      )\n                    );\n                    LoaderService.hide();\n                  } else {\n                    LoaderService.show();\n                    var baseUrl = CommonMethodsFactory.getBaseUrl(\n                      onlineValueForBaseUrl\n                    );\n\n                    if (baseUrl) {\n                      Restangular.setBaseUrl(\n                        \"https://\" + baseUrl + \"/\" + custName + \"/\" + \"api/v1/\"\n                      );\n                      var validate = Restangular.all(\"suite\").one(\n                        \"details/\" + ckey\n                      );\n\n                      validate.get().then(\n                        function (success) {\n                          addToCustomerUrl(\n                            custName,\n                            onlineVal,\n                            ckey,\n                            customer && customer.IsCustomUrlEnabled\n                          );\n                          LoaderService.hide();\n                          return success;\n                        },\n                        function (error) {\n                          console.log(error);\n                        }\n                      );\n                    } else {\n                      // AppMessages.Error($rootScope.getResourceText('LIT_ALERT'),\n                      // $rootScope.getResourceText('MSG_URL_NOT_VALID'));\n                      LoaderService.hide();\n                    }\n                  }\n              }\n              function bootStrap() {\n                if (userLoggedIn != null) {\n                  var isUserDetailsValid =\n                    userDetailsManager.getIfdownloadValidForType(\"UserDetails\");\n                  if (isUserDetailsValid === false) {\n                    //Removing both appdetails and token for an unsuccessfull download off SuiteDetails/UserDetails\n                    AuthenticationService.logout(false);\n                    $ionicHistory.nextViewOptions({\n                      disableBack: true,\n                    });\n                    ResetPoolUtil.resetPool();\n                    $state.go(\"login\");\n                  }\n\n                  // var loggedToken = window.localStorage.getItem('token');\n                  var promiseDeviceUtil =\n                    DeviceUtil.getKeyValueWithSharedPreferences(\"token\");\n                  promiseDeviceUtil\n                    .then(function (loggedToken) {\n                      if (loggedToken != null) {\n                        console.log(loggedToken);\n                        // Based on the customer setting value display Favorites screen\n                        if (userLoggedIn.Customer.DisplayFavorites) {\n                          var isFavEmpty = favoritesManager.isFavEmpty();\n                          if (!isFavEmpty) {\n                            $state.go(\"app.favorite\", {\n                              reload: true,\n                            });\n                          } else {\n                            $state.go(\"app.home\", {\n                              reload: true,\n                            });\n                          }\n                        } else {\n                          $state.go(\"app.home\", {\n                            reload: true,\n                          });\n                        }\n                      } else {\n                        ResetPoolUtil.resetPool();\n                        $state.go(\"login\");\n                      }\n                    })\n                    .catch(function () {\n                      ResetPoolUtil.resetPool();\n                      $state.go(\"login\");\n                    });\n                  statusBarColorCheck();\n                  // StatusBar.backgroundColorByHexString(userLoggedIn.Customer.ColourCode);\n                } else {\n                  $ionicHistory.nextViewOptions({\n                    disableBack: true,\n                  });\n                  var promiseDeviceUtil =\n                    DeviceUtil.getKeyValueWithSharedPreferences(\n                      \"isIntuneSetUp\"\n                    );\n                  promiseDeviceUtil.then(\n                    function (intuneSetpUp) {\n                      if (intuneSetpUp) {\n                        $state.go(\"login\");\n                      } else {\n                        $state.go(\"toggleUrl\");\n                      }\n                    },\n                    function (err) {\n                      $state.go(\"toggleUrl\");\n                    }\n                  );\n                }\n              }\n\n              var preferencePromise =\n                DeviceUtil.getKeyValueWithSharedPreferencesForString(\n                  \"CustomerURL\",\n                  \"\"\n                );\n              preferencePromise.then(\n                function (customerUrl) {\n                  customerUrl = customerUrl.replace(/['\"]+/g, \"\");\n                  if (customerUrl) {\n                    setAppEnvironment(customerUrl);\n                  }\n                },\n                function (error) {\n                  console.log(error);\n                }\n              );\n\n              var preferencePromise =\n                DeviceUtil.getKeyValueWithSharedPreferencesForString(\n                  \"route\",\n                  \"\"\n                );\n              preferencePromise.then(\n                function (route) {\n                  if (route && route.length > 0) {\n                    setTimeout(function () {\n                      window.navigateFromPush(route);\n                      window.handleDeepLink(route);\n                    }, 700);\n                    DeviceUtil.removeByKeySharedPreferences(\"route\");\n                  }\n                },\n                function (error) {\n                  alert(error);\n                }\n              );\n            });\n          });\n        });\n      },\n    ]);\n})();\n\n(function () {\n  var app = angular\n    .module(\"actionPlan\", [\n      \"EntityUtils\",\n      \"LocalStorageUtils\",\n      \"directives\",\n      \"commonUtils\",\n      \"ionic-toast\",\n      \"Modal-Popup\",\n      \"Camera-Gallery\",\n    ])\n    .config([\n      \"$ionicConfigProvider\",\n      function ($ionicConfigProvider) {\n        $ionicConfigProvider.views.maxCache(0);\n      },\n    ]);\n})();\n\n(function () {\n  var app = angular.module(\"documentLibrary\", []);\n})();\n\n(function () {\n  var app = angular.module(\"documentLibrary\", []);\n})();\n\n(function () {\n  var app = angular.module(\"askade\", []);\n})();\n","\"use strict\";\n\nvar app = angular.module('Modal-Popup', []);\napp.factory(\"$exceptionHandler\",  ['$injector', function($injector) {\n    return function (exception, cause) {\n        var localStorageUtility = $injector.get('LocalStorageUtility')\n        localStorageUtility.addExceptionToLogTable(exception,cause);\n        var rScope = $injector.get('$rootScope');\n        rScope.$broadcast('exceptionRefresh', exception, cause);\n    };\n }]);\napp.factory('ModalUtil', [\"$ionicModal\", \"IOSUtil\", function ($ionicModal, IOSUtil) {\n    var modelUtil = {\n        //Cleanup the video modal when we're done with it!\n        initModal: function initModal(currentScope) {\n            var template = '<div class=\"modal\" ng-click=\"close()\"><ion-content><img ng-src=\"{{src}}\" src=\"{{src}}\" style=\"display:block; width:90%; max-width:600px; margin:auto\" /></ion-content></div>';\n            currentScope.Modal = $ionicModal.fromTemplate(template, {\n                scope: currentScope,\n                animation: 'slide-in-up'\n            });\n        },\n        getImageFilePath:function(imageSource){\n            var isIPad = ionic.Platform.isIPad();\n            var isIOS = ionic.Platform.isIOS();\n\n            if (isIPad || isIOS) {\n                var findIndex = imageSource.lastIndexOf('/');\n                var fileName = imageSource.substring(findIndex + 1, imageSource.length);\n                var directoryPath = imageSource.replace(fileName, '');\n                directoryPath = IOSUtil.correctIOSPath(directoryPath);\n                imageSource = directoryPath + fileName;\n                imageSource = window.Ionic.WebView.convertFileSrc(imageSource);\n            }\n            return imageSource;\n        },\n        openModal: function openModal(currentScope, imageSource) {\n            // Adding IOS check, so as to handle path issue after the change related to moving files to a specific folder.\n            // In IOS on app update path name used to update because of this attachments were missing\n            var isIPad = ionic.Platform.isIPad();\n            var isIOS = ionic.Platform.isIOS();\n            if (isIPad || isIOS) {\n                var findIndex = imageSource.lastIndexOf('/');\n                var fileName = imageSource.substring(findIndex + 1, imageSource.length);\n                var directoryPath = imageSource.replace(fileName, '');\n                directoryPath = IOSUtil.correctIOSPath(directoryPath);\n                imageSource = directoryPath + fileName;\n                imageSource = window.Ionic.WebView.convertFileSrc(imageSource);\n            }\n            currentScope.src = imageSource;\n            currentScope.Modal.show();\n        },\n        closeModal: function closeModal(currentScope) {\n            currentScope.Modal.hide(); // Removes modal instance\n            currentScope.Modal.remove();\n        }\n    };\n    return modelUtil;\n}]);\napp.factory('PopupUtil', ['$q', '$ionicPopup', '$timeout', 'PictureUtil', '$rootScope', 'GeneralUtil', 'FileUtil', function ($q, $ionicPopup, $timeout, PictureUtil, $rootScope, GeneralUtil, FileUtil) {\n    var popUpScope = {\n        popUpHandle: {},\n        listPopup: {},\n        timerPopup: {},\n        getAttachment: function getAttachment(title, id, currentScope, canPickDoc) {\n            // An elaborate, custom popup\n            currentScope.qId = id;\n            var deferedPromise = $q.defer();\n            var extensions = currentScope.userDetail.Customer.AllowedExtensions != null ? currentScope.userDetail.Customer.AllowedExtensions : null;\n            \n            var allowedExtensions = extensions;\n            if (allowedExtensions != null) {\n                allowedExtensions = allowedExtensions.split(',');\n                var alteredExtensions = [];\n                for (var i = 0; i < allowedExtensions.length; i++) {\n                    alteredExtensions.push(`.${allowedExtensions[i]}`);\n                }\n                currentScope.allowedExtensions = alteredExtensions.join();\n            }\n\n            if (currentScope.allowedExtensions != null)\n                currentScope.canPickDoc = canPickDoc;\n\n            currentScope.captureImage = function (id) {\n                deferedPromise = PictureUtil.takePicturePromise(deferedPromise);\n                popUpScope.popUpHandle.close();\n            };\n\n            currentScope.chooseImage = function (id) {\n                deferedPromise = PictureUtil.selectGalleryImagesPromise(deferedPromise);\n                popUpScope.popUpHandle.close();\n            };\n\n            popUpScope.popUpHandle = $ionicPopup.show({\n                templateUrl: \"templates/selectFilePopUp.html\",\n                title: \"<div class='popUpTitleBackground'>\" + title + \"</div>\",\n                scope: currentScope\n            });\n\n            $timeout(function () {\n                currentScope.gallerySelected = false;\n                popUpScope.popUpHandle.close(); //close the popup after 3 seconds for some reason\n            }, 3000);\n\n            return deferedPromise;\n        },\n        showFileSelector: function showFileSelector(title, questionId, currentScope) {\n            // An elaborate, custom popup\n            currentScope.qId = questionId;\n            popUpScope.popUpHandle = $ionicPopup.show({\n                templateUrl: \"templates/selectFilePopUp.html\",\n                title: \"<div class='popUpTitleBackground'>\" + title + \"</div>\",\n                scope: currentScope\n            });\n            popUpHandle.then(function (res) {\n                console.log('Tapped!', res);\n            });\n            $timeout(function () {\n                popUpScope.popUpHandle.close(); //close the popup after 3 seconds for some reason\n            }, 5000);\n        },\n        showFileList: function showFileList(title, files, currentScope) {\n            // An elaborate, custom popup\n            currentScope.files = files;\n            popUpScope.popUpHandle = $ionicPopup.show({\n                templateUrl: \"templates/news/fileList.html\",\n                title: \"<div>\" + title + \"</div>\",\n                cssClass: 'listPopUpClass',\n                scope: currentScope,\n                buttons: [{\n                    text: $rootScope.getResourceText('LIT_CANCEL_TEXT')\n                }]\n            });\n            popUpScope.popUpHandle.then(function (res) {//console.log('Tapped!', res);\n            });\n        },\n        hide: function hide() {\n            if (popUpScope.popUpHandle.close) {\n                popUpScope.popUpHandle.close();\n            }\n        },\n        confirm: function confirm(title, body) {\n            var confirmPopup = $ionicPopup.confirm({\n                title: \"<div class='popUpTitleBackground'>\" + title + \"</div>\",\n                template: body,\n                okText: $rootScope.getResourceText('LIT_OK'),\n                cancelText: $rootScope.getResourceText('LIT_CANCEL_TEXT')\n            });\n            confirmPopup.then(function (res) {\n                if (res) {\n                    confirmPopup.close();\n                    return true;\n                } else {\n                    confirmPopup.close();\n                    return false;\n                }\n            });\n            return confirmPopup;\n        },\n        readAloudAlert: function readAloudAlert(title, message, scope) {\n            var alertPopup = $ionicPopup.alert({\n                title: \"<div class='popUpTitleBackground'>\" + title + \"</div>\",\n                template: \"<div class='buttons displayInlineBlock verticalTopAlign popUpSpeakerIcon' ng-if='readAloud'>\" + \"<div class= 'icon displayInlineBlock helpLinkIcon'>\" + \"<img ng-src='images/speaker.png' ng-click=\\\"ttsConvert(\\'\" + message.replace(\"'\", \"\\\\'\") + \"\\')\\\" />\" + \"</div >\" + \"</div ><ion-scroll class='disclaimer-text'>\" + message + \"</ion-scroll>\",\n                scope: scope,\n                buttons: [{\n                    text: $rootScope.getResourceText('LIT_OK'),\n                    type: 'button button-outline'\n                }]\n            });\n        },\n        alert: function alert(title, message) {\n            var alertPopup = $ionicPopup.alert({\n                title: \"<div class='popUpTitleBackground'>\" + title + \"</div>\",\n                template: \"<ion-scroll class='disclaimer-text'>\" + message + \"</ion-scroll>\",\n                buttons: [{\n                    text: $rootScope.getResourceText('LIT_OK'),\n                    type: 'button button-outline'\n                }]\n            });\n        },\n        // HTML pop for Document library of type HTML\n        htmlDocAlert: function htmlDocAlert(title, htmlContent) {\n            var alertPopup = $ionicPopup.alert({\n                title: \"<div class='popUpTitleBackground'>\" + title + \"</div>\",\n                template: \"<ion-content class='popupHtmlCss' scroll='true' overflow-scroll='true'>\" + \"<div>\" + htmlContent.html() + \"</div>\" + \"</ion-content>\",\n                cssClass: \"docHtmlView\",\n                buttons: [{\n                    text: $rootScope.getResourceText('LIT_OK'),\n                    type: 'button button-outline'\n                }]\n            });\n            return alertPopup;\n        },\n        listPopUp: function listPopUp(title, searchText, currentScope) {\n            var deferred = $q.defer();\n            var source = currentScope.dataSource;\n            currentScope.search = searchText;\n\n            currentScope.getSelectedValue = function (item) {\n                currentScope.SelectedValue = item;\n                deferred.resolve(item);\n            };\n\n            popUpScope.listPopup = $ionicPopup.show({\n                templateUrl: \"templates/listPopUp.html\",\n                title: title,\n                cssClass: 'listPopUpClass',\n                scope: currentScope,\n                buttons: [{\n                    text: $rootScope.getResourceText('LIT_CANCEL_TEXT')\n                }]\n            });\n            return deferred.promise;\n        },\n        hideListPopUp: function hideListPopUp() {\n            popUpScope.listPopup.close();\n        },\n        timerPopUp: function timerPopUp(title, currentScope, time) {\n            var deferred = $q.defer();\n\n            currentScope.getTimeSelected = function (item, event) {\n                deferred.resolve(item);\n                for (var i = 0; i < time.length; i++) {\n                    var elId = 'time_' + time[i];\n                    var element = document.getElementById(elId);\n                    element.classList.remove(\"existingValue\");\n                }\n                var timeId = event.srcElement.id;\n                var timeIdValue = '#' + timeId;\n                angular.element(timeIdValue).addClass(\"existingValue\");\n                $timeout(function () {\n                    popUpScope.timerPopup.close();\n                }, 100);\n            };\n\n            popUpScope.timerPopup = $ionicPopup.show({\n                templateUrl: \"templates/timePickerTemplate.html\",\n                title: title,\n                scope: currentScope,\n                buttons: [{\n                    text: $rootScope.getResourceText('LIT_CANCEL_TEXT')\n                }]\n            });\n            return deferred.promise;\n        },\n        bodyPartConfirm: function bodyPartConfirm(title) {\n            var confirmPopup = $ionicPopup.confirm({\n                title: \"<div class='popUpTitleBackground'>\" + title + \"</div>\",\n                templateUrl: \"templates/bodySelectorPopUp.html\",\n                cssClass: \"bodyPopUp\",\n                okText: $rootScope.getResourceText('LIT_OK'),\n                cancelText: $rootScope.getResourceText('LIT_BACK')\n            });\n            confirmPopup.then(function (res) {\n                if (res) {\n                    confirmPopup.close();\n                    return true;\n                } else {\n                    confirmPopup.close();\n                    return false;\n                }\n            });\n            return confirmPopup;\n        },\n\n        //animated popup handling\n        animTimerPopUp: function animTimerPopUp(anim, title, label, timer) {\n            popUpScope.popUpHandle = $ionicPopup.show({\n                template: anim +\n                    '<div class=\"popUpContentTitle\">' + title + '</div>' +\n                    '<div class=\"popUpContentLabel\">' + label + '</div>',\n                cssClass: 'animPopUp animPopUpClose'\n            });\n            $timeout(function () {\n                popUpScope.popUpHandle.close(); //close the popup after 3 seconds for some reason\n            }, timer);\n        },\n        animPopUp: function animPopUp(anim, title, label) {\n            popUpScope.popUpHandle = $ionicPopup.show({\n                template: anim +\n                    '<div class=\"popUpContentTitle\">' + title + '</div>' +\n                    '<div class=\"popUpContentLabel\">' + label + '</div>',\n                cssClass: 'animPopUp animPopUpClose'\n            });\n        },\n        hideAnimPopUp: function hideAnimPopUp() {\n            popUpScope.popUpHandle.close();\n        },\n        animConfirm: function animConfirm(icon, title, label) {\n            var confirmPopup = $ionicPopup.confirm({\n                template: icon +\n                    '<div class=\"popUpContentTitle\">' + title + '</div>' +\n                    '<div class=\"popUpContentLabel\">' + label + '</div>',\n                cssClass: 'animPopUp',\n                okText: $rootScope.getResourceText('LIT_OK'),\n                cancelText: $rootScope.getResourceText('LIT_CANCEL_TEXT')\n            });\n            confirmPopup.then(function (res) {\n                if (res) {\n                    confirmPopup.close();\n                    return true;\n                } else {\n                    confirmPopup.close();\n                    return false;\n                }\n            });\n            return confirmPopup;\n        },\n        animAlert: function animAlert(icon, title, label) {\n            var alertPopup = $ionicPopup.alert({\n                template: icon +\n                    '<div class=\"popUpContentTitle\">' + title + '</div>' +\n                    '<div class=\"popUpContentLabel\">' + label + '</div>',\n                cssClass: 'animPopUp',\n                buttons: [{\n                    text: $rootScope.getResourceText('LIT_OK'),\n                    type: 'button button-outline'\n                }]\n            });\n        },\n        showDocFileList: function showDocFileList(title, files, currentScope) {\n            // An elaborate, custom popup\n            currentScope.files = files;\n            currentScope.title = title;\n            popUpScope.popUpHandle = $ionicPopup.show({\n                templateUrl: \"templates/asset_document_templates/docList.html\",\n                cssClass: 'listPopUpClass assetPopUp',\n                scope: currentScope\n            });\n            currentScope.popup = popUpScope.popUpHandle;\n            \n        },\n    };\n    return popUpScope;\n}]);\napp.factory('PopOverUtil', [\"$ionicPopover\", function ($ionicPopover) {\n    var popOverUtil = {\n        initPopOver: function initPopOver(templateUrl, currentScope) {\n            $ionicPopover.fromTemplateUrl(templateUrl, {\n                scope: currentScope\n            }).then(function (popover) {\n                currentScope.popover = popover;\n            }, function (err) {\n                var t = '';\n            });\n        },\n        openPopOver: function openPopOver(currentScope, event) {\n            currentScope.popover.show(event);\n        },\n        closePopover: function closePopover(currentScope) {\n            currentScope.popover.hide();\n        }\n    };\n    return popOverUtil;\n}]);\n"],"sourceRoot":""}